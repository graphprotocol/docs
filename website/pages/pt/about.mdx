---
title: Sobre o The Graph
---

Esta página explicará o que é o The Graph e como pode começar.

## O que é o The Graph?

O The Graph é um protocolo descentralizado para indexação e queries de dados de blockchains. O The Graph possibilita a consulta de dados que são difíceis de consultar diretamente.

Projetos com contratos inteligentes complexos, como o [Uniswap](https://uniswap.org/) e iniciativas de NFTs como o [Bored Ape Yacht Club](https://boredapeyachtclub.com/), armazenam dados na blockchain Ethereum, o que torna muito difícil ler qualquer coisa que não seja dados básicos diretamente da blockchain.

In the case of Bored Ape Yacht Club, we can perform basic read operations on [the contract](https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code) like getting the owner of a certain Ape, getting the content URI of an Ape based on their ID, or the total supply. This can be done because these read operations are programmed directly into the smart contract. However, more advanced real-world queries and operations like aggregation, search, relationships, and non-trivial filtering are _not_ possible. For example, if we wanted to query for Apes that are owned by a certain address and filter by one of its characteristics, we would not be able to get that information by interacting directly with the contract itself.

To get this data, you would have to process every single [`transfer`](https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code#L1746) event ever emitted, read the metadata from IPFS using the Token ID and IPFS hash, and then aggregate it. It would take **hours or even days** for a decentralized application (dapp) running in a browser to get an answer to these simple questions.

Também valeria construir o seu próprio servidor, processar as transações lá, salvá-las em um banco de dados, e construir um endpoint de API sobre tudo isso tudo para poder fazer o query dos dados. Porém, esta opção [consome muitos recursos](/network/benefits/), precisa de manutenção, apresenta um único ponto de falha, e quebra propriedades de segurança importantes obrigatórias para a descentralização.

**Indexar dados de blockchain é muito, muito difícil.**

Blockchain properties like finality, chain reorganizations, or uncled blocks complicate this process further. They make it time consuming and conceptually hard to retrieve correct query results from blockchain data.

The Graph provides a solution with a decentralized protocol that indexes and enables the efficient and high-performance querying of blockchain data. These APIs (indexed "subgraphs") can then be queried with a standard GraphQL API. Today, there is a hosted service as well as a decentralized protocol with the same capabilities. Both are backed by the open source implementation of [Graph Node](https://github.com/graphprotocol/graph-node).

## Como o The Graph Funciona

O The Graph aprende quais dados indexar, e como indexar os dados na Ethereum com base em descrições de subgraph — conhecidas como manifests de subgraph. A descrição do subgraph define os contratos inteligentes de interesse para o mesmo, os eventos nestes contratos para prestar atenção, e como mapear dados de evento para dados que o The Graph armazenará no seu banco de dados.

Quando tiver escrito um `subgraph manifest`, use o Graph CLI para armazenar a definição no IPFS e mandar o indexador começar a indexar dados para o subgraph.

Este diagrama dá mais detalhes sobre o fluxo de dados quando um manifest de subgraph for lançado, na questão de transações na Ethereum:

![Um gráfico que explica como o The Graph utiliza Graph Nodes para servir queries para consumidores de dados](/img/graph-dataflow.png)

O fluxo segue estes passos:

1. Um dApp adiciona dados à Ethereum através de uma transação em contrato inteligente.
2. O contrato inteligente emite um ou mais eventos enquanto processa a transação.
3. O Graph Node escaneia continuamente a Ethereum por novos blocos e os dados que podem conter para o seu subgraph.
4. O Graph Node encontra eventos na Ethereum para o seu subgraph nestes blocos e executa os handlers de mapeamento que forneceu. O mapeamento é um módulo WASM que cria ou atualiza as entidades de dados que o Graph Node armazena em resposta a eventos na Ethereum.
5. O dApp consulta o Graph Node para dados indexados da blockchain, através do [endpoint GraphQL](https://graphql.org/learn/) do node. O Graph Node, por sua vez, traduz os queries GraphQL em queries para o seu armazenamento subjacente de dados para poder retirar estes dados, com o uso das capacidades de indexação do armazenamento. O dApp exibe estes dados em uma interface rica para utilizadores finais, que eles usam para emitir novas transações na Ethereum. E o ciclo se repete.

## Próximos Passos

The following sections provide more detail on how to define subgraphs, how to deploy them, and how to query data from the indexes that Graph Node builds.

Before you start writing your own subgraph, you might want to have a look at [Graph Explorer](https://thegraph.com/explorer) and explore some of the subgraphs that have already been deployed. The page for each subgraph contains a playground that lets you query that subgraph's data with GraphQL.
