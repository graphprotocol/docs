---
title: ग्राफ नेटवर्क को एक मौजूदा सबग्राफ को अपग्रेड करना
---

## परिचय

यह एक गाइड है जो आपको बताएगा कि होस्टेड सेवा से ग्राफ के डीसेंट्रलाइज्ड नेटवर्क में अपने सबग्राफ को कैसे अपग्रेड करें। 1,000 से अधिक सबग्राफ सफलतापूर्वक ग्राफ नेटवर्क में अपग्रेड किए गए हैं, जिनमें स्नैपशॉट, लूपरिंग, ऑडियस, प्रीमिया, लाइवपीर, यूमा, कर्व, लिडो, और बहुत से अन्य प्रोजेक्ट्स शामिल हैं!

अपग्रेड करने की प्रक्रिया तेज़ है और आपके सबग्राफ हमेशा के लिए विश्वसनीयता और प्रदर्शन का लाभ उठाएंगे, जिसे आप केवल ग्राफ नेटवर्क पर ही प्राप्त कर सकते हैं।

### आवश्यक शर्तें

- आप पहले से ही होस्ट की गई सेवा पर एक सबग्राफ तैनात कर चुके हैं।
- सबग्राफ एक चैन को इंडेक्स कर रहा है जो ग्राफ नेटवर्क पर उपलब्ध है (या बीटा में उपलब्ध है)।
- आपके पास ईथर (ETH) वॉलेट है जिसका उपयोग ऑन-चेन सबग्राफ प्रकाशित करने के लिए किया जाता है।
- आपके पास लगभग 10,000 जीआरटी (GRT) है, जिसका उपयोग आपके सबग्राफ को क्यूरेट करने के लिए होता है, ताकि इंडेक्सर्स उसे इंडेक्स करना शुरू कर सकें।

## ग्राफ नेटवर्क को एक मौजूदा सबग्राफ को अपग्रेड करना

> आप अपने सबग्राफ के लिए विशिष्ट कमांड [सबग्राफ स्टूडियो](https://thegraph.com/studio/) में पा सकते हैं।

1.  ग्राफ-सीएलआई का नवीनतम संस्करण स्थापित करें:

```sh
npm install -g @graphprotocol/graph-cli
```

```sh
yarn global add @graphprotocol/graph-cli
```

सुनिश्चित करें कि सबग्राफ.yaml में आपका `apiVersion` `0.0.5` या इससे अधिक है।

2.  सबग्राफ के मुख्य परियोजना रिपॉजिटरी में, सबग्राफ को स्टूडियो पर डिप्लॉय और बिल्ड करने के लिए प्रमाणित करें।

```sh
graph auth --studio <DEPLOY_KEY>
```

3.  फ़ाइलें उत्पन्न करें और सबग्राफ बनाएं:

```sh
graph codegen && graph build
```

यदि आपके सबग्राफ में बिल्ड त्रुटियाँ हैं, तो [असेंबलीस्क्रिप्ट माइग्रेशन गाइड](/release-notes/assemblyscript-migration-guide/) देखें।

4.  अपने वॉलेट से [सबग्राफ स्टूडियो](https://thegraph.com/studio/) में साइन इन करें और सबग्राफ तैनात करें। आप अपना `<SUBGRAPH_SLUG>` स्टूडियो यूआई में पा सकते हैं, जो आपके सबग्राफ के नाम पर आधारित है।

```sh
graph deploy --studio <SUBGRAPH_SLUG>
```

5.  स्टूडियो के खेल के मैदान पर परीक्षण प्रश्न। यहां [सुशी - मेननेट एक्सचेंज सबग्राफ] \(https://thegraph.com/explorer/subgraph?id=0x4bb4c1b0745ef7b4642feeccd0740dec417ca0a0-0&view=Playground) के लिए कुछ उदाहरण दिए गए हैं:

```sh
{
  users(first: 5) {
    id
    liquidityPositions {
      id
    }
  }
  bundles(first: 5) {
    id
    ethPrice
  }
}
```

6.  इस बिंदु पर, आपका सबग्राफ अब सबग्राफ स्टूडियो पर डिप्लॉय हो गया है, लेकिन इसे अभी तक डीसेंट्रलाइज्ड नेटवर्क पर प्रकाशित नहीं किया गया है। आप अब सबग्राफ का टेस्ट कर सकते हैं ताकि यह आपकी इच्छा के अनुसार काम कर रहा है यह सुनिश्चित कर सकते हैं, जिसका टेम्पररी क्वेरी URL ऊपर दाएं स्तंभ में दिखाई देता है। जैसा कि नाम से स्पष्ट है, यह एक अस्थायी URL है और उत्पादन में उपयोग नहीं करना चाहिए।

- अपडेट करना सिर्फ अपने मौजूदा सबग्राफ का एक और संस्करण ऑन-चेन प्रकाशित करना है।
- क्योंकि इससे लागत उत्पन्न होती है, इसलिए सबग्राफ को प्रकाशित करने से पहले "डेवलपमेंट क्वेरी URL" का उपयोग करके सबग्राफ को सबग्राफ स्टूडियो में डिप्लॉय और टेस्ट करना अत्यंत सिफारिश किया जाता है। एक उदाहरण लेन-देन को देखे [here](https://etherscan.io/tx/0xd0c3fa0bc035703c9ba1ce40c1862559b9c5b6ea1198b3320871d535aa0de87b). कीमतें लगभग 0.0425 ETH पर 100 ग्वेई परिवर्तन के आस-पास हैं।
- जब भी आपको अपने सबग्राफ को अपडेट करने की आवश्यकता होगी, तो आपको एक अपडेट शुल्क देना होगा। क्योंकि इससे लागत उत्पन्न होती है, इसलिए गोएर्ली पर अपने सबग्राफ को डिप्लॉय और टेस्ट करने की आपको सुझाव दिया जाता है इसे मेननेट पर डिप्लॉय करने से पहले। कुछ केसों में, यदि उस सबग्राफ पर कोई सिग्नल नहीं है, तो उसे आपको कुछ GRT भी चाहिए हो सकता है। उस सबग्राफ के उस संस्करण पर सिग्नल/क्युरेशन होने की स्थिति में (ऑटो-माइग्रेट का उपयोग करके) टैक्स विभाजित होंगे।

7.  "प्रकाशित करें" बटन दबाकर ग्राफ़ के विकेन्द्रीकृत नेटवर्क पर सबग्राफ प्रकाशित करें।

यह सुनिश्चित करने के लिए कि यह इंडेक्सर्स द्वारा अनुक्रमित है, आपको अपने सबग्राफ को जीआरटी के साथ क्यूरेट करना चाहिए। गैस की लागत बचाने के लिए, आप अपने सबग्राफ को उसी लेनदेन में क्यूरेट कर सकते हैं जिसे आप नेटवर्क पर प्रकाशित करते हैं। उच्च गुणवत्ता वाली सेवा के लिए अपने सबग्राफ को कम से कम 10,000 जीआरटी के साथ क्यूरेट करने की अनुशंसा की जाती है।

और बस! प्रकाशन पूरा करने के बाद, आप अपने सबग्राफ़ को [द ग्राफ़ एक्सप्लोरर](https://thegraph.com/explorer) के माध्यम से विकेंद्रीकृत नेटवर्क पर लाइव देख पाएंगे।

डिस्कॉर्ड पर बेझिझक [#क्यूरेटर चैनल](https://discord.gg/s5HfGMXmbW) का लाभ उठाएं ताकि क्यूरेटर को पता चल सके कि आपका सबग्राफ सिग्नल के लिए तैयार है। यदि आप अपनी अपेक्षित क्वेरी मात्रा उनके साथ साझा करते हैं तो यह भी सहायक होगा। इसलिए, वे अनुमान लगा सकते हैं कि उन्हें आपके सबग्राफ पर कितना जीआरटी संकेत देना चाहिए।

### एक एपीआई key बनाएँ

आप सबग्राफ स्टूडियो में एक एपीआई कुंजी उत्पन्न कर सकते हैं [here] \(https://thegraph.com/studio/apikeys/)।

![API key creation page](/img/api-image.png)

प्रत्येक सप्ताह के अंत में, उस अवधि के दौरान हुए क्वेरी शुल्कों पर आधारित एक चालान तैयार किया जाएगा। यह चालान आपके शेष राशि में उपलब्ध GRT का उपयोग करके स्वचालित रूप से भुगतान किया जाएगा। आपके शेष राशि को आपके क्वेरी शुल्कों के खर्च के निकाले जाने के बाद अपडेट किया जाएगा। क्वेरी शुल्क GRT में आर्बिट्रम नेटवर्क के माध्यम से भुगतान किये जाएंगे। आपको अपने एपीआई कुंजी को सक्षम करने के लिए आर्बिट्रम बिलिंग अनुबंध में GRT जोड़ने की आवश्यकता होगी जिसके लिए निम्नलिखित कदमों का पालन करें:

- अपनी पसंद के एक्सचेंज पर जीआरटी खरीदें।
- अपने वॉलेट में जीआरटी भेजें।
- स्टूडियो में बिलिंग पेज पर, ऐड जीआरटी पर क्लिक करें।

![Add GRT in billing](/img/Add-GRT-New-Page.png)

- अपनी बिलिंग शेष राशि में अपना GRT जोड़ने के लिए steps का पालन करें।
- आपका GRT स्वचालित रूप से आर्बिट्रम नेटवर्क से जुड़ जाएगा और आपके बिलिंग बैलेंस में जुड़ जाएगा।

![Billing pane](/img/New-Billing-Pane.png)

> नोट: अपने बिलिंग शेष में जीआरटी जोड़ने पर पूर्ण निर्देशों के लिए [आधिकारिक बिलिंग पृष्ठ](../billing.mdx) देखें।

### अपनी एपीआई key सुरक्षित करना

यह अनुशंसा की जाती है कि आप एपीआई के उपयोग को दो तरीकों से सीमित करके सुरक्षित करें:

1.  अधिकृत सबग्राफ
2.  अधिकृत डोमेन

आप अपनी एपीआई कुंजी [here](https://thegraph.com/studio/apikeys/test/) सुरक्षित कर सकते हैं।

![Subgraph lockdown page](/img/subgraph-lockdown.png)

### विकेंद्रीकृत नेटवर्क पर आपके सबग्राफ को क्वेरी करना

अब आप ग्राफ़ एक्सप्लोरर में नेटवर्क पर इंडेक्सर्स की अनुक्रमण स्थिति की जांच कर सकते हैं (उदाहरण [here] \(https://thegraph.com/explorer/subgraph?id=S9ihana8D733WTEShJ1KctSTCvY1VJ7gdVwhUujq4Ejo&view=Indexers))। शीर्ष पर हरी रेखा इंगित करती है कि पोस्टिंग के समय 8 इंडेक्सर्स ने उस सबग्राफ को सफलतापूर्वक अनुक्रमित किया था। इसके अलावा इंडेक्सर टैब में आप देख सकते हैं कि किन इंडेक्सर्स ने आपका सबग्राफ उठाया है।

![Rocket Pool subgraph](/img/rocket-pool-subgraph.png)

जैसे ही पहले इंडेक्सर ने आपके सबग्राफ को पूरी तरह से इंडेक्स कर लिया, आप सबग्राफ को विकेंद्रीकृत नेटवर्क पर क्वेरी करना शुरू कर सकते हैं। अपने सबग्राफ के लिए क्वेरी URL को पुनः प्राप्त करने के लिए, आप क्वेरी URL के बगल में स्थित प्रतीक पर क्लिक करके इसे कॉपी/पेस्ट कर सकते हैं। आपको कुछ ऐसा दिखाई देगा:

`https://gateway.thegraph.com/api/[api-key]/subgraphs/id/S9ihna8D733WTEShJ1KctSTCvY1VJ7gdVwhUujq4Ejo`

महत्वपूर्ण: `[api-key]` को उपरोक्त अनुभाग में उत्पन्न वास्तविक एपीआई कुंजी से बदलना सुनिश्चित करें।

अब आप अपने ग्राफ़िकल अनुरोधों को भेजने के लिए अपने डैप में उस क्वेरी URL का उपयोग कर सकते हैं।

बधाई हो! अब आप विकेंद्रीकरण के अग्रणी हैं!

> नोट: नेटवर्क की वितरित प्रकृति के कारण संभव है कि विभिन्न इंडेक्सर्स ने विभिन्न ब्लॉक तक इंडेक्स किया हो। केवल ताज़ा डेटा प्राप्त करने के लिए आप इंडेक्सर को स्पष्ट कर सकते हैं कि उसे किस न्यूनतम ब्लॉक तक इंडेक्स किया होना चाहिए जिसके साथ आपका क्वेरी सेव किया जाएगा, यह विकल्प दिए गए उदाहरण में दिखाया गया है: `{ number_gte: $minBlock }` (यहां $minBlock को वास्तविक न्यूनतम ब्लॉक नंबर से बदल दें)।

```graphql
{
  stakers(block: { number_gte: 14486109 }) {
    id
  }
}
```

नेटवर्क की प्रकृति और पुनर्गठन को कैसे संभालना है, इसके बारे में अधिक जानकारी दस्तावेज़ीकरण लेख [डिस्ट्रीब्यूटेड सिस्टम्स](/querying/distributed-systems/) में वर्णित है।

## नेटवर्क पर एक सबग्राफ़ अपडेट करना

यदि आप नेटवर्क पर किसी मौजूदा सबग्राफ को अपडेट करना चाहते हैं, तो आप ग्राफ सीएलआई का उपयोग करके अपने सबग्राफ के एक नए संस्करण को सबग्राफ स्टूडियो में तैनात करके ऐसा कर सकते हैं।

1.  यदि आप नेटवर्क पर किसी मौजूदा सबग्राफ को अपडेट करना चाहते हैं, तो आप ग्राफ सीएलआई का उपयोग करके अपने सबग्राफ के एक नए संस्करण को सबग्राफ स्टूडियो में तैनात करके ऐसा कर सकते हैं।
2.  निम्नलिखित को तैनात करें और कमांड में नया संस्करण निर्दिष्ट करें (जैसे। v0.0.1, v0.0.2, आदि):

```sh
graph deploy --studio <SUBGRAPH_SLUG>
```

3.  खेल के मैदान में क्वेरी करके सबग्राफ स्टूडियो में नए संस्करण का परीक्षण करें
4.  ग्राफ़ नेटवर्क पर नया संस्करण प्रकाशित करें। याद रखें कि इसके लिए गैस की आवश्यकता होती है (जैसा कि ऊपर अनुभाग में वर्णित है)।

### मालिक अद्यतन शुल्क: डीप डाइव

> ध्यान दें: आर्बिट्रम पर क्यूरेशन बॉन्डिंग कर्व्स का उपयोग नहीं करता है। आर्बिट्रम के बारे में और जानें [here] \(/ आर्बिट्रम/आर्बिट्रम-एफएक्यू/)।

अपडेट के लिए जीआरटी को सबग्राफ के पुराने संस्करण से नए संस्करण में स्थानांतरित करना आवश्यक है। इसका मतलब यह है कि प्रत्येक अपडेट के लिए, एक नया बॉन्डिंग कर्व बनाया जाएगा (बॉन्डिंग कर्व्स पर अधिक जानकारी [here](/network/curating#bonding-curve-101))।

नए बॉन्डिंग कर्व द्वारा नए संस्करण में माइग्रेट होने वाले सभी GRT पर 1% क्यूरेशन कर लगाया जाता है। स्वामी 1.25% या 1.25% तक का यह कर भुगतान करना होता है। दूसरे 1.25% को सभी क्यूरेटर्स के रूप में एक शुल्क के रूप में शामिल किया जाता है। यह प्रोत्साहन डिजाइन इसलिए है कि सबग्राफ के मालिक को पुनरावृत्ति अपडेट कॉल्स के साथ अपने क्यूरेटर्स के धन को सूखा नहीं सकता। यदि क्यूरेशन गतिविधि नहीं है, तो अपने ही सबग्राफ को सिग्नल करने के लिए आपको 100 GRT का न्यूनतम भुगतान करना होगा।

आइए एक उदाहरण बनाते हैं, यह केवल तभी होता है जब आपका सबग्राफ सक्रिय रूप से क्यूरेट किया जा रहा हो:

- सबग्राफ के v1 पर ऑटो-माइग्रेट का उपयोग करके 100,000 जीआरटी का संकेत दिया जाता है
- स्वामी v2 पर अद्यतन करता है। 100,000 जीआरटी को एक नए बॉन्डिंग वक्र में स्थानांतरित कर दिया जाता है, जहां 97,500 जीआरटी को नए वक्र में डाल दिया जाता है और 2,500 जीआरटी को जला दिया जाता है
- उसके बाद, स्वामी को आधे कर के फीस के लिए 1250 GRT को दहन करना पड़ता है। स्वामी को इसे अपडेट से पहले अपने वॉलेट में होना चाहिए, अन्यथा अपडेट सफल नहीं होगा। यह अपडेट के साथी ट्रांजेक्शन में होता है।

_हालांकि यह तंत्र वर्तमान में नेटवर्क पर लाइव है, समुदाय वर्तमान में सबग्राफ डेवलपर्स के लिए अपडेट की लागत को कम करने के तरीकों पर चर्चा कर रहा है।_

### एक सबग्राफ का एक स्थिर संस्करण बनाए रखना

यदि आप अपने सबग्राफ में बहुत सारे बदलाव कर रहे हैं, तो इसे लगातार अपडेट करना और अपडेट की लागत का सामना करना अच्छा विचार नहीं है। आपके सबग्राफ का एक स्थिर और सुसंगत संस्करण बनाए रखना न केवल लागत के नजरिए से महत्वपूर्ण है, बल्कि इसलिए भी कि इंडेक्सर्स अपने सिंकिंग समय में आत्मविश्वास महसूस कर सकें। जब आप अपडेट की योजना बनाते हैं तो इंडेक्सर्स को चिह्नित किया जाना चाहिए ताकि इंडेक्सर सिंकिंग समय प्रभावित न हो। जब आप अपने सबग्राफ का संस्करण बना रहे हों तो इंडेक्सर्स को यह बताने के लिए डिस्कॉर्ड पर [#इंडेक्सर्स चैनल](https://discord.gg/JexvtHa7dq) का बेझिझक लाभ उठाएं।

सबग्राफ हरिज APIs हैं जिन्हें बाहरी डेवलपर्स उपयोग कर रहे हैं। खुले APIs को सख्त मानकों का पालन करना चाहिए ताकि ये बाहरी डेवलपर्स के एप्लिकेशन को ख़राब ना करें। द ग्राफ नेटवर्क में, सबग्राफ डेवलपर को इंडेक्सर्स को ध्यान में रखना चाहिए और देखना चाहिए कि वे एक नए सबग्राफ को सिंक करने में कितना समय लगते हैं, साथ ही अन्य डेवलपर्स जो उनके सबग्राफ का उपयोग कर रहे हैं, को भी ध्यान में रखना चाहिए।

### सबग्राफ के मेटाडेटा को अपडेट करना

आप नई संस्करण प्रकाशित किए बिना अपने सबग्राफ की मेटाडेटा को अपडेट कर सकते हैं। मेटाडेटा में सबग्राफ का नाम, छवि, विवरण, वेबसाइट URL, स्रोत कोड URL, और श्रेणियां शामिल होती हैं। डेवलपर्स इसे सबग्राफ स्टूडियो में अपने सबग्राफ के विवरण को अपडेट करके कर सकते हैं, जहां आप सभी लागू फ़ील्ड को संपादित कर सकते हैं।

सुनिश्चित करें कि **Explorer में सबग्राफ विवरण अपडेट करें** चेकबॉक्स चिह्नित है और **सेव** पर क्लिक करें। यदि यह चेकबॉक्स चिह्नित है, तो एक ऑन-चेन ट्रांजैक्शन उत्पन्न होगा जो नए डिप्लॉयमेंट के साथ नए संस्करण को प्रकाशित किए बिना, एक्सप्लोरर में सबग्राफ विवरण को अपडेट करेगा।

## ग्राफ़ नेटवर्क में एक सबग्राफ़ तैनात करने के लिए सर्वोत्तम अभ्यास

1.  सबग्राफ विकास के लिए ईएनएस नाम का लाभ उठाना:

- Set up your ENS [here](https://app.ens.domains/)
- अपना ENS नाम अपनी सेटिंग में जोड़ें [here](https://thegraph.com/explorer/settings?view=display-name)।

2.  आपकी प्रोफ़ाइलें जितनी अधिक भरी होंगी, आपके सबग्राफ़ को अनुक्रमित और क्यूरेट किए जाने की संभावना उतनी ही बेहतर होगी।

## ग्राफ़ नेटवर्क पर एक सबग्राफ का बहिष्कार करना

अपने सबग्राफ को अस्वीकृत करने और उसे ग्राफ़ नेटवर्क से हटाने के लिए [here] \(/manageing/deprecating-a-subgraph) चरणों का पालन करें।

## ग्राफ़ नेटवर्क पर एक सबग्राफ + बिलिंग को क्वेरी करना

होस्टेड सेवा को उन्हें बिना किसी प्रतिबंध के अपने सबग्राफ डिप्लॉय करने की अनुमति देने के लिए स्थापित किया गया था।

द ग्राफ नेटवर्क को वास्तविक रूप से डिसेंट्रलाइज़ किया जाने के लिए, क्वेरी शुल्कों का भुगतान प्रोटोकॉल के प्रोत्साहनों का एक मुख्य हिस्सा होना आवश्यक है। एपीआईस की सदस्यता और क्वेरी शुल्क भुगतान करने के बारे में अधिक जानकारी के लिए, बिलिंग दस्तावेज़ीकरण पर जांच करें यहाँ [here](/billing/)।

### नेटवर्क पर क्वेरी शुल्क का अनुमान लगाना

यह उत्पाद UI में एक लाइव सुविधा नहीं होने के बावजूद, आप अपने प्रति क्वेरी के लिए अधिकतम बजट तय कर सकते हैं, मासिक रूप से देने के लिए राशि को लेकर जिसे आप प्रत्याशित क्वेरी वॉल्यूम से विभाजित कर सकते हैं।

जब आप अपने क्वेरी बजट का निर्धारण करते हैं, तो यह निश्चित नहीं है कि एक इंडेक्सर उसमें आपको सेव करने के लिए तैयार होगा। यदि गेटवे आपको एक इंडेक्सर से मिला देता है जो आपको आपके बजट या उससे कम कीमत पर क्वेरी सेव करने के लिए तैयार होता है, तो आपको अपने बजट और उनकी कीमत के अंतर का भुगतान करना होगा। इससे, एक कम क्वेरी कीमत आपको उपलब्ध इंडेक्सर्स का समूह कम कर देती है, जिससे आपको प्राप्त की गई सेवा की गुणवत्ता प्रभावित हो सकती है। उच्च क्वेरी शुल्क होना लाभकारी है, क्योंकि इससे क्युरेशन और प्रमुख इंडेक्सर्स को आपके सबग्राफ को आकर्षित कर सकता है।

ध्यान रखें कि यह एक गतिशील और विकसित हो रहा बाजार है, लेकिन आप इसके साथ कैसे इंटरैक्ट करते हैं वह आपके नियंत्रण में है। प्रोटोकॉल या गेटवे में कोई अधिकतम या न्यूनतम मूल्य निर्दिष्ट नहीं है। उदाहरण के लिए, नीचे दिए गए संदर्भ में नेटवर्क पर कुछ dapps द्वारा भुगतान किए गए मूल्यों को देख सकते हैं (प्रति सप्ताह आधार पर)। नीचे दिखाए गए अंतिम स्तंभ में, GRT में क्वेरी शुल्क दिखाया गया है।

![QueryFee](/img/QueryFee.png)

## अतिरिक्त संसाधन

यदि आप अभी भी भ्रमित हैं, तो डरें नहीं! निम्नलिखित संसाधनों की जाँच करें या नीचे दिए गए विकेंद्रीकृत नेटवर्क में सबग्राफ को अपग्रेड करने पर हमारी वीडियो गाइड देखें:

<VideoEmbed youtube="CzdQ3dFFrjo" />

- [द ग्राफ़ नेटवर्क कॉन्ट्रैक्ट्स](https://github.com/graphprotocol/contracts)
- [क्यूरेशन कॉन्ट्रैक्ट](https://github.com/graphprotocol/contracts/blob/dev/contracts/curation/Curation.sol) - अंतर्निहित कॉन्ट्रैक्ट जिसे GNS लपेटता है
  - Address - `0x8fe00a685bcb3b2cc296ff6ffeab10aca4ce1538`
- [सबग्राफ़ स्टूडियो दस्तावेज़ीकरण](/तैनाती/सबग्राफ़-स्टूडियो)
