---
title: किसी मौजूदा सबग्राफ को ग्राफ़ नेटवर्क में माइग्रेट करना
---

## परिचय

यह गाइड है कि कैसे अपने सबग्राफ को होस्टेड सर्विस से द ग्राफ के विकेंद्रीकृत नेटवर्क में माइग्रेट किया जाए। Opyn, UMA, mStable, Audius, PoolTogether, Livepeer, RAI, Enzyme, DODO, Pickle, और BadgerDAO जैसी परियोजनाओं के लिए द ग्राफ़ नेटवर्क में माइग्रेशन सफल रहा है, जो सभी नेटवर्क पर इंडेक्सर्स द्वारा दिए गए डेटा पर निर्भर हैं। ग्राफ़ के विकेन्द्रीकृत नेटवर्क पर अब 700 से अधिक सबग्राफ लाइव हैं, जो क्वेरी शुल्क उत्पन्न करते हैं और वेब3 डेटा को सक्रिय रूप से अनुक्रमित करते हैं।

माइग्रेशन की प्रक्रिया तेज है और आपके सबग्राफ हमेशा उस विश्वसनीयता और प्रदर्शन से लाभान्वित होंगे जो आप केवल द ग्राफ नेटवर्क पर प्राप्त कर सकते हैं।

### मान्यताओं

- आप पहले से ही होस्ट की गई सेवा पर एक सबग्राफ तैनात कर चुके हैं।
- सबग्राफ ग्राफ़ नेटवर्क पर उपलब्ध (या बीटा में उपलब्ध) श्रृंखला को अनुक्रमित कर रहा है।
- सबग्राफ़ हैंडलर फ़ंक्शंस में `ipfs.cat` का उपयोग नहीं करता है।
- सबग्राफ में पूर्ण-पाठ खोज निर्भरता नहीं है (यह अभी तक विकेंद्रीकृत नेटवर्क पर पूरी तरह से समर्थित नहीं है)।

## किसी मौजूदा सबग्राफ को ग्राफ़ नेटवर्क में माइग्रेट करना

> आप [सबग्राफ स्टूडियो](https://thegraph.com/studio/) में अपने सबग्राफ के लिए विशिष्ट आदेश प्राप्त कर सकते हैं।

1. Graph-cli का नवीनतम संस्करण प्राप्त करें:

```sh
npm install -g @graphprotocol/graph-cli
```

```sh
yarn global add @graphprotocol/graph-cli
```

पक्का करें कि आपका `apiVersion` subgraph.yaml में `0.0.5` या इससे बड़ा होना चहिए।

2. सबग्राफ के मुख्य प्रोजेक्ट रिपॉजिटरी के अंदर, सबग्राफ को स्टूडियो पर तैनात करने और बनाने के लिए प्रमाणित करें:

```sh
graph auth --studio <DEPLOY_KEY>
```

3. फाइलें उत्पन्न करें और सबग्राफ बनाएं:

```sh
graph codegen && graph build
```

यदि आपके सबग्राफ में बिल्ड त्रुटियाँ हैं, तो [AssemblyScript माइग्रेशन गाइड](/release-notes/assemblyscript-migration-guide/) देखें।

4. अपने वॉलेट के साथ [सबग्राफ स्टूडियो](https://thegraph.com/studio/) में साइन इन करें और सबग्राफ तैनात करें। आप अपने `<SUBGRAPH_SLUG>` को Studio UI में ढूंढ सकते हैं, जो आपके सबग्राफ के नाम पर आधारित है।

```sh
graph deploy --studio <SUBGRAPH_SLUG>
```

5. स्टूडियो के खेल के मैदान पर क्वेरियों का परीक्षण करें। यहां [सुशी - मेननेट एक्सचेंज सबग्राफ](https://thegraph.com/explorer/subgraph?id=0x4bb4c1b0745ef7b4642feeccd0740dec417ca0a0-0&view=Playground) के कुछ उदाहरण दिए गए हैं:

```sh
{
  users(first: 5) {
    id
    liquidityPositions {
      id
    }
  }
  bundles(first: 5) {
    id
    ethPrice
  }
}
```

6. इस समय पर, आपका सबग्राफ अब सबग्राफ स्टूडियो पर तैनात है, लेकिन अभी तक विकेंद्रीकृत नेटवर्क पर प्रकाशित नहीं हुआ है। अब आप यह सुनिश्चित करने के लिए सबग्राफ का परीक्षण कर सकते हैं कि यह अस्थायी क्वेरी URL का उपयोग करके काम कर रहा है, जैसा कि ऊपर दाएं कॉलम के शीर्ष पर दिखाया गया है। जैसा कि इस नाम से पहले ही पता चलता है, यह एक अस्थायी URL है और इसे उत्पादन में इस्तेमाल नहीं किया जाना चाहिए।

- प्रकाशन एक ऑन-चेन क्रिया है और इसके लिए एथेरियम में गैस की भुगतान करने के लिए की आवश्यकता होगी - लेनदेन का एक उदाहरण देखें [यहाँ](https://etherscan.io/tx/0xd0c3fa0bc035703c9ba1ce40c1862559b9c5b6ea1198b3320871d535aa0de87b)। 100 gwei पर कीमतें लगभग 0.0425 ETH हैं।
- किसी भी समय आपको अपने सबग्राफ को अपग्रेड करने की आवश्यकता होगी, आपसे अपग्रेड शुल्क लिया जाएगा। अपग्रेड करना आपके मौजूदा सबग्राफ ऑन-चेन का एक और संस्करण प्रकाशित कर रहा है। क्योंकि इसमें एक लागत लगती है, इसीलिए मेननेट पर तैनात करने से पहले गोएरली पर अपने सबग्राफ को तैनात करने और परीक्षण करने की अत्यधिक अनुशंसा की जाती है। कुछ मामलों में, उस सबग्राफ पर कोई संकेत नहीं होने पर कुछ जीआरटी की भी आवश्यकता हो सकती है। उस सबग्राफ संस्करण (ऑटो-माइग्रेट का उपयोग करके) पर सिग्नल/क्यूरेशन होने की स्थिति में, करों को विभाजित किया जाएगा।

7. "प्रकाशित करें" बटन दबाकर ग्राफ़ के विकेंद्रीकृत नेटवर्क पर सबग्राफ प्रकाशित करें।

और बस! आपके द्वारा प्रकाशित किए जाने के बाद, आप [द ग्राफ़ एक्सप्लोरर](https://thegraph.com/explorer) के माध्यम से विकेंद्रीकृत नेटवर्क पर अपने सबग्राफ को लाइव देख सकेंगे।

डिस्कॉर्ड पर [#Curators channel](https://discord.gg/rC8rBuRtbH) का बेझिझक लाभ उठाएं ताकि क्यूरेटर को पता चल सके कि आपका सबग्राफ सिग्नल देने के लिए तैयार है। यदि आप उनके साथ अपनी अपेक्षित क्वेरी मात्रा साझा करते हैं तो यह भी सहायक होगा। इसलिए, वे अनुमान लगा सकते हैं कि उन्हें आपके सबग्राफ पर कितने जीआरटी का संकेत देना चाहिए।

### एक एपीआई key बनाएँ

आप [यहां](https://thegraph.com/studio/apikeys/) सबग्राफ स्टूडियो में एक एपीआई key उत्पन्न कर सकते हैं।

![एपीआई key निर्माण पेज](/img/api-image.png)

प्रत्येक सप्ताह के अंत में, इस अवधि के दौरान किए गए क्वेरी शुल्क के आधार पर एक चालान जनरेट किया जाएगा। आपके बैलेंस में उपलब्ध GRT का उपयोग करके इस चालान का स्वचालित रूप से भुगतान किया जाएगा। आपकी क्वेरी शुल्क की लागत वापस लेने के बाद आपकी शेष राशि अपडेट की जाएगी। क्वेरी शुल्क का भुगतान आर्बिट्रम नेटवर्क के माध्यम से जीआरटी में किया जाता है। आपको निम्नलिखित चरणों के माध्यम से अपनी एपीआई key को सक्षम करने के लिए आर्बिट्रम बिलिंग कॉन्ट्रैक्ट में जीआरटी जोड़ने की आवश्यकता होगी:

- अपनी पसंद के एक्सचेंज पर जीआरटी खरीदें।
- अपने वॉलेट में जीआरटी भेजें।
- स्टूडियो में बिलिंग पेज पर, ऐड जीआरटी पर क्लिक करें।

![बिलिंग में जीआरटी जोड़ें](/img/Add-GRT-New-Page.png)

- अपनी बिलिंग शेष राशि में अपना GRT जोड़ने के लिए चरणों का पालन करें।
- आपका GRT स्वचालित रूप से आर्बिट्रम नेटवर्क से जुड़ जाएगा और आपके बिलिंग बैलेंस में जुड़ जाएगा।

![बिलिंग फलक](/img/New-Billing-Pane.png)

> ध्यान दें: अपनी बिलिंग शेष राशि में GRT जोड़ने के बारे में पूर्ण निर्देशों के लिए [आधिकारिक बिलिंग पृष्ठ](../billing.mdx) देखें।

### अपनी एपीआई key सुरक्षित करना

यह अनुशंसा की जाती है कि आप एपीआई के उपयोग को दो तरीकों से सीमित करके सुरक्षित करें:

1. अधिकृत सबग्राफ
2. अधिकृत डोमेन

आप अपनी एपीआई key [यहां](https://thegraph.com/studio/apikeys/test/) सुरक्षित कर सकते हैं।

![सबग्राफ लॉकडाउन पेज](/img/subgraph-lockdown.png)

### विकेंद्रीकृत नेटवर्क पर अपने सबग्राफ को क्वेरी करना

अब आप ग्राफ़ एक्सप्लोरर में नेटवर्क पर इंडेक्सर्स की इंडेक्सिंग स्थिति की जांच कर सकते हैं (उदाहरण [यहां](https://thegraph.com/explorer/subgraph?id=S9ihna8D733WTEShJ1KctSTCvY1VJ7gdVwhUujq4Ejo&view=Indexers)). शीर्ष पर हरी रेखा इंगित करती है कि पोस्टिंग के समय 8 इंडेक्सर्स ने उस सबग्राफ को सफलतापूर्वक अनुक्रमित किया। इंडेक्सर टैब में भी आप देख सकते हैं कि कौन से इंडेक्सर्स ने आपका सबग्राफ उठाया है।

![रॉकेट पूल सबग्राफ](/img/rocket-pool-subgraph.png)

जैसे ही पहले इंडेक्सर ने आपके सबग्राफ को पूरी तरह से इंडेक्स कर लिया, आप सबग्राफ को विकेंद्रीकृत नेटवर्क पर क्वेरी करना शुरू कर सकते हैं। अपने सबग्राफ के लिए क्वेरी URL को पुनः प्राप्त करने के लिए, आप क्वेरी URL के बगल में स्थित प्रतीक पर क्लिक करके इसे कॉपी/पेस्ट कर सकते हैं। आपको कुछ ऐसा दिखाई देगा:

`https://gateway.thegraph.com/api/[api-key]/subgraphs/id/S9ihna8D733WTEShJ1KctSTCvY1VJ7gdVwhUujq4Ejo`

महत्वपूर्ण: `[api-key]` को उपरोक्त अनुभाग में जेनरेट की गई वास्तविक API key से बदलना सुनिश्चित करें।

अब आप अपने ग्राफ़िकल अनुरोधों को भेजने के लिए अपने डैप में उस क्वेरी URL का उपयोग कर सकते हैं।

बधाई हो! अब आप विकेंद्रीकरण के अग्रणी हैं!

> नोट: नेटवर्क की वितरित प्रकृति के कारण ऐसा हो सकता है कि अलग-अलग इंडेक्सर्स ने अलग-अलग ब्लॉकों तक इंडेक्स किया हो। केवल ताजा डेटा प्राप्त करने के लिए आप न्यूनतम ब्लॉक निर्दिष्ट कर सकते हैं जिसे इंडेक्सर को ब्लॉक के साथ आपकी क्वेरी को पूरा करने के लिए अनुक्रमित करना होगा: `{ number_gte: $minBlock }` फ़ील्ड तर्क जैसा कि नीचे दिए गए उदाहरण में दिखाया गया है :

```graphql
{
  stakers(block: { number_gte: 14486109 }) {
    id
  }
}
```

नेटवर्क की प्रकृति के बारे में अधिक जानकारी और पुनर्संगठनों को कैसे संभालना है, इसका वर्णन दस्तावेज़ीकरण लेख [वितरित सिस्टम्स](/querying/distributed-systems/) में किया गया है।

## नेटवर्क पर एक सबग्राफ को अपग्रेड करना

यदि आप नेटवर्क पर एक मौजूदा सबग्राफ को अपग्रेड करना चाहते हैं, तो आप ग्राफ़ सीएलआई का उपयोग करके सबग्राफ स्टूडियो में अपने सबग्राफ का एक नया संस्करण तैनात करके ऐसा कर सकते हैं।

1. अपने वर्तमान सबग्राफ में परिवर्तन करें। गोएर्ली में प्रकाशित करके सबग्राफ स्टूडियो पर छोटे सुधारों का परीक्षण करना एक अच्छा विचार है।
2. निम्नलिखित को तैनात करें और कमांड में नया संस्करण निर्दिष्ट करें (जैसे। v0.0.1, v0.0.2, आदि):

```sh
graph deploy --studio <SUBGRAPH_SLUG>
```

3. खेल के मैदान में क्वेरी करके सबग्राफ स्टूडियो में नए संस्करण का परीक्षण करें
4. ग्राफ़ नेटवर्क पर नया संस्करण प्रकाशित करें। याद रखें कि इसके लिए गैस की आवश्यकता होती है (जैसा कि ऊपर अनुभाग में बताया गया है)।

### ओनर अपग्रेड फीस: डीप डाइव

एक अपग्रेड के लिए GRT को सबग्राफ के पुराने संस्करण से नए संस्करण में माइग्रेट करने की आवश्यकता होती है। इसका मतलब है कि हर अपग्रेड के लिए, एक नया बॉन्डिंग कर्व बनाया जाएगा (बांडिंग कर्व्स के बारे में[यहां](/network/curating#bonding-curve-101) पर अधिक)।

नया बॉन्डिंग कर्व नए संस्करण में स्थानांतरित होने वाले सभी जीआरटी पर 1% क्यूरेशन टैक्स लेता है। मालिक को इसका 50% या 1.25% भुगतान करना होगा। अन्य 1.25% शुल्क के रूप में सभी क्यूरेटर द्वारा अवशोषित किया जाता है। यह प्रोत्साहन डिज़ाइन एक सबग्राफ़ के मालिक को पुनरावर्ती अपग्रेड कॉल के साथ अपने क्यूरेटर के सभी फंडों को ख़त्म करने से रोकने के लिए है। यदि कोई क्यूरेशन गतिविधि नहीं है, तो आपको अपने स्वयं के सबग्राफ पर हस्ताक्षर करने के लिए न्यूनतम 100 जीआरटी का भुगतान करना होगा।

आइए एक उदाहरण बनाते हैं, यह केवल तभी होता है जब आपका सबग्राफ सक्रिय रूप से क्यूरेट किया जा रहा हो:

- एक सबग्राफ के v1 पर ऑटो-माइग्रेट का उपयोग करके 100,000 GRT का संकेत दिया जाता है
- मालिक ने v2 में अपग्रेड किया। 100,000 GRT को एक नए बॉन्डिंग कर्व में माइग्रेट किया जाता है, जहां 97,500 GRT को नए कर्व में डाला जाता है और 2,500 GRT को बर्न किया जाता है
- आधे शुल्क का भुगतान करने के लिए मालिक के पास 1250 GRT जला हुआ है। अपग्रेड से पहले मालिक के पास यह उनके वॉलेट में होना चाहिए, अन्यथा, अपग्रेड सफल नहीं होगा। यह अपग्रेड होने वाले समान लेनदेन में होता है।

_जबकि यह तंत्र वर्तमान में नेटवर्क पर लाइव है, समुदाय वर्तमान में सबग्राफ डेवलपर्स के लिए अपग्रेड की लागत को कम करने के तरीकों पर चर्चा कर रहा है।_

### एक सबग्राफ का एक स्थिर संस्करण बनाए रखना

यदि आप अपने सबग्राफ में बहुत सारे बदलाव कर रहे हैं, तो इसे लगातार अपग्रेड करना और अपग्रेड लागतों को सामने रखना एक अच्छा विचार नहीं है। अपने सबग्राफ का एक स्थिर और सुसंगत संस्करण बनाए रखना महत्वपूर्ण है, न केवल लागत के नजरिए से बल्कि इसलिए भी कि इंडेक्सर्स अपने सिंकिंग समय में आत्मविश्वास महसूस कर सकें। जब आप अपग्रेड की योजना बनाते हैं तो इंडेक्सर्स को फ़्लैग किया जाना चाहिए ताकि इंडेक्सर सिंकिंग समय प्रभावित न हो। डिस्कॉर्ड पर [#इंडेक्सर्स चैनल](https://discord.gg/rC8rBuRtbH) का लाभ उठाने का महसूस करें ताकि इंडेक्सर्स को पता चल सके कि आप अपने सबग्राफ का संस्करण कब बना रहे हैं।

सबग्राफ ओपन एपीआई हैं जिनका बाहरी डेवलपर्स लाभ उठा रहे हैं। ओपन एपीआई को सख्त मानकों का पालन करने की जरूरत है ताकि वे बाहरी डेवलपर्स के ऐप्स को तोड़ न दें। द ग्राफ़ नेटवर्क में, एक सबग्राफ़ डेवलपर को इंडेक्सर्स पर विचार करना चाहिए और उन्हें एक नया सबग्राफ़ **साथ ही** अन्य डेवलपर्स जो अपने सबग्राफ़ का उपयोग कर रहे हैं, को सिंक करने में कितना समय लगता है।

### सबग्राफ के मेटाडेटा को अपडेट करना

आप एक नया संस्करण प्रकाशित किए बिना अपने सबग्राफ के मेटाडेटा को अपडेट कर सकते हैं। मेटाडेटा में सबग्राफ नाम, छवि, विवरण, वेबसाइट URL, मुल कोड के URL और श्रेणियां शामिल हैं। डेवलपर सबग्राफ स्टूडियो में अपने सबग्राफ विवरण अपडेट करके ऐसा कर सकते हैं जहां आप सभी लागू फ़ील्ड संपादित कर सकते हैं।

सुनिश्चित करें कि **एक्सप्लोरर में सबग्राफ विवरण अपडेट** चेक किया गया है और ** सेव ** पर क्लिक करें। यदि इसे चेक किया जाता है, तो एक ऑन-चेन लेनदेन उत्पन्न होगा जो एक्सप्लोरर में सबग्राफ विवरण अपडेट करता है बिना किसी नए परिनियोजन के एक नया संस्करण प्रकाशित किए बिना।

## ग्राफ़ नेटवर्क में एक सबग्राफ को तैनात करने के लिए सर्वोत्तम अभ्यास

1. सबग्राफ डेवलपमेंट के लिए ENS नाम का लाभ उठाना:

- अपना ENS सेट करें: [https://app.ens.domains/](https://app.ens.domains/)
- [यहां](https://thegraph.com/explorer/settings?view=display-name) अपनी सेटिंग में अपना ENS नाम जोड़ें।

2. आपके प्रोफाइल जितने अधिक भरे हुए हैं, आपके सबग्राफ के अनुक्रमित और क्यूरेट होने की संभावना उतनी ही बेहतर है।

## ग्राफ़ नेटवर्क पर एक सबग्राफ का बहिष्कार करना

अपने सबग्राफ को बहिष्कृत करने और इसे ग्राफ़ नेटवर्क से निकालने के लिए [यहां](/managing/deprecating-a-subgraph) चरणों का पालन करें।

## ग्राफ़ नेटवर्क पर एक सबग्राफ + बिलिंग को क्वेरी करना

होस्ट की गई सेवा की स्थापना डेवलपर्स को बिना किसी प्रतिबंध के अपने सबग्राफ तैनात करने की अनुमति देने के लिए की गई थी।

द ग्राफ नेटवर्क को वास्तव में विकेंद्रीकृत करने के लिए, प्रोटोकॉल के प्रोत्साहन के मुख्य भाग के रूप में क्वेरी शुल्क का भुगतान करना होगा। एपीआई की सदस्यता लेने और क्वेरी शुल्क का भुगतान करने के बारे में अधिक जानकारी के लिए, बिलिंग दस्तावेज़ [यहां](/billing/) देखें।

### नेटवर्क पर क्वेरी शुल्क का अनुमान लगाना

जबकि यह उत्पाद UI में एक लाइव विशेषता नहीं है, आप प्रति माह भुगतान करने के इच्छुक राशि को लेकर और इसे अपनी अपेक्षित क्वेरी मात्रा से विभाजित करके अपना अधिकतम बजट प्रति क्वेरी निर्धारित कर सकते हैं।

जब आप अपने क्वेरी बजट पर निर्णय लेते हैं, तो इस बात की कोई गारंटी नहीं है कि एक इंडेक्सर उस मूल्य पर क्वेरी को प्रस्तुत करने के लिए तैयार होगा। यदि कोई गेटवे आपको एक इंडेक्सर से मेल कर सकता है जो आपके द्वारा भुगतान किए जाने वाले मूल्य से समान या कम कीमत पर एक प्रश्न प्रस्तुत करने के लिए तैयार है, तो आप अपने बजट **और** उनकी कीमत के डेल्टा/अंतर का भुगतान करेंगे। परिणामस्वरूप, कम क्वेरी मूल्य आपके लिए उपलब्ध इंडेक्सर के पूल को कम कर देता है, जो आपको प्राप्त होने वाली सेवा की गुणवत्ता को प्रभावित कर सकता है। उच्च क्वेरी शुल्क होना फायदेमंद है, क्योंकि यह आपके सबग्राफ के लिए क्यूरेशन और बड़े-नाम वाले इंडेक्सर्स को आकर्षित कर सकता है।

याद रखें कि यह एक गतिशील और बढ़ता हुआ बाजार है, लेकिन आप इसके साथ कैसे इंटरैक्ट करते हैं यह आपके नियंत्रण में है। प्रोटोकॉल या गेटवे में निर्दिष्ट कोई अधिकतम या न्यूनतम मूल्य नहीं है। उदाहरण के लिए, आप नीचे नेटवर्क पर (प्रति सप्ताह के आधार पर) कुछ डैप द्वारा भुगतान की गई कीमत को देख सकते हैं। अंतिम कॉलम देखें, जो जीआरटी में क्वेरी फीस दिखाता है।

![क्वेरी शुल्क](/img/QueryFee.png)

## अतिरिक्त संसाधन

यदि आप अभी भी भ्रमित हैं, तो डरें नहीं! नीचे दिए गए संसाधनों को देखें या नीचे दिए गए विकेंद्रीकृत नेटवर्क में सबग्राफ माइग्रेट करने के बारे में हमारी वीडियो गाइड देखें:

<VideoEmbed youtube="CzdQ3dFFrjo" />

- [ग्राफ नेटवर्क कॉन्ट्रैक्ट](https://github.com/graphprotocol/contracts)
- [क्यूरेशन कॉन्ट्रैक्ट](https://github.com/graphprotocol/contracts/blob/dev/contracts/curation/Curation.sol) - अंतर्निहित कॉन्ट्रैक्ट जिसे GNS लपेटता है
  - Address - `0x8fe00a685bcb3b2cc296ff6ffeab10aca4ce1538`
- [सबग्राफ स्टूडियो प्रलेखन](/deploying/subgraph-studio)
