---
title: Создание подграфов на Base
---

Это руководство быстро познакомит вас с тем, как инициализировать, создать и развернуть ваш подграф в тестовой сети Base.

Что вам понадобится:

- Адрес контракта в тестовой сети Base
- Криптокошелек (например, MetaMask или Coinbase)

## Subgraph Studio

### 1. Установка the Graph CLI

The Graph CLI (>=v0.41.0) написан на JavaScript, и для его использования вам потребуется установить либо `npm`, либо `yarn`.

```sh
# NPM
npm install -g @graphprotocol/graph-cli

# Yarn
yarn global add @graphprotocol/graph-cli
```

### 2. Создание подграфа в Subgraph Studio

Перейдите в [Subgraph Studio](https://thegraph.com/studio/) и подключите ваш криптокошелек.

После подключения, нажмите "Create a Subgraph" и введите имя вашего подграфа.

Выберите "Base (testnet)" в качестве индексируемого блокчейна и нажмите "Create Subgraph".

### 3. Инициализация вашего Подграфа

> Вы можете найти конкретные команды для вашего подграфа в Subgraph Studio.

Убедитесь, что graph-cli обновлен до последней версии (выше 0.41.0)

```sh
graph --version
```

Инициализируйте свой подграф из существующего контракта.

```sh
graph init --studio <SUBGRAPH_SLUG>
```

Ваш подграф slug - это идентификатор для вашего подграфа. Инструмент CLI проведет вас по шагам создания подграфа, включая:

- Протокол: ethereum
- Подграф slug: `<SUBGRAPH_SLUG>`
- Каталог для создания подграфа в: `<SUBGRAPH_SLUG>`
- Сеть Ethereum: base-testnet \_ Contract address: `<CONTRACT_ADDRESS>`
- Стартовый блок (необязательно)
- Имя контракта: `<CONTRACT_NAME>`
- Да / нет для событий индексации (да означает, что ваш подграф будет bootstrapped объектами в схеме и простым маппингом для отправленных событий)

### 3. Создание вашего Подграфа

> Если исходящие события - это единственное, что вы хотите проиндексировать, то никакой дополнительной работы не требуется, и вы можете перейти к следующему шагу.

Предыдущая команда создает scaffold подграф, который вы можете использовать в качестве отправной точки для построения вашего подграфа. При внесении изменений в подграф вы будете в основном работать с тремя файлами:

- Манифест (subgraph.yaml) - Манифест определяет, какие источники данных будут индексироваться вашими подграфами. Обязательно добавьте `base-testnet` в качестве имени сети в файле манифеста, чтобы развернуть свой подграф в тестовой сети Base.
- Схема (schema.graphql) - Схема GraphQL определяет, какие данные вы хотите извлечь из подграфа.
- AssemblyScript Mappings (mapping.ts) - это код, который преобразует данные из ваших источников данных в объекты, определенные в схеме.

Если вы хотите проиндексировать дополнительные данные, вам нужно будет расширить манифест, схему и маппинг.

Для получения дополнительной информации о том, как написать свой подграф, см. [Creating a Subgraph](/developing/creating-a-subgraph).

### 4. Запуск в Subgraph Studio

Прежде чем вы сможете развернуть свой подграф, вам необходимо будет пройти аутентификацию в Subgraph Studio. Вы можете сделать это, выполнив следующую команду:

Аутентифицируйте подграф в studio

```
graph auth --studio <DEPLOY_KEY>
```

Затем войдите в свою директорию подграфа.

```
    cd <SUBGRAPH_DIRECTORY>
```

Создайте свой подграф с помощью следующей команды:

````
```
graph codegen && graph build
```
````

Наконец, вы можете развернуть свой подграф с помощью этой команды:

```
graph deploy --studio <SUBGRAPH_SLUG>
```

### 5. Запрос к вашему подграфу

Как только ваш подграф развернут, вы можете сделать запрос к нему из вашего dapp, используя `Development Query URL` в Subgraph Studio.

Примечание - Скорость работы Studio API ограничена. Следовательно, предпочтительно использовать для разработки и тестирования.

Чтобы узнать больше о запросе данных из вашего подграфа, смотрите страницу [Querying a Subgraph](/querying/querying-the-graph).
