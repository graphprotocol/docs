---
title: Создание сабграфов на Base
---

Это руководство быстро познакомит вас с тем, как инициализировать, создать и развернуть ваш сабграф в тестовой сети Base.

Вам понадобятся:

- Адрес контракта сети Base
- Крипто-кошелек (например, MetaMask или Coinbase Wallet)

## Subgraph Studio

### 1. Установка the Graph CLI

The Graph CLI (>=v0.41.0) написан на JavaScript, и для его использования вам потребуется установить либо `npm`, либо `yarn`.

```sh
# NPM
npm install -g @graphprotocol/graph-cli

# Yarn
yarn global add @graphprotocol/graph-cli
```

### 2. Создание сабграфа в Subgraph Studio

Перейдите на [Subgraph Studio](https://thegraph.com/studio/) и подключите ваш крипто-кошелек.

После подключения, нажмите "Create a Subgraph" и введите имя вашего сабграфа.

Выберите "Base (testnet)" в качестве индексируемого блокчейна и нажмите "Создать Сабграф".

### 3. Инициализация вашего Сабграфа

> Вы можете найти конкретные команды для вашего сабграфа в Subgraph Studio.

Убедитесь, что graph-cli обновлен до последней версии (выше 0.41.0)

```sh
graph --version
```

Инициализируйте свой подграф из существующего контракта.

```sh
graph init --studio <SUBGRAPH_SLUG>
```

Ваш сабграф slug - это идентификатор для вашего сабграфа. Инструмент CLI проведет вас по шагам создания сабграфа, включая:

- Протокол: ethereum
- Сабграф slug: `<SUBGRAPH_SLUG>`
- Каталог для создания сабграфа в: `<SUBGRAPH_SLUG>`
- Сеть Ethereum: base-testnet \_ Contract address: `<CONTRACT_ADDRESS>`
- Стартовый блок (необязательно)
- Имя контракта: `<CONTRACT_NAME>`
- Да / нет для событий индексации (да означает, что ваш сабграф будет загружен объектами в схеме и простыми сопоставлениями для отправленных событий)

### 3. Создание вашего Подграфа

> Если исходящие события - это единственное, что вы хотите проиндексировать, то никакой дополнительной работы не требуется, и вы можете перейти к следующему шагу.

Предыдущая команда создает сабграф scaffold, который вы можете использовать в качестве отправной точки для построения вашего сабграфа. При внесении изменений в сабграф вы будете в основном работать с тремя файлами:

- Манифест (subgraph.yaml) - Манифест определяет, какие источники данных будут индексироваться вашими сабграфами. Обязательно добавьте `base-testnet` в качестве имени сети в файле манифеста, чтобы развернуть свой сабграф в базовой тестовой сети.
- Схема (schema.graphql) - Схема GraphQL определяет, какие данные вы хотите извлечь из подграфа.
- Сопоставления сценариев сборки (mapping.ts) - это код, который преобразует данные из ваших источников данных в объекты, определенные в схеме.

Если вы хотите проиндексировать дополнительные данные, вам нужно будет расширить манифест, схему и сопоставления.

Для получения дополнительной информации о том, как написать свой сабграф, см. [Создание сабграфа](/developing/creating-a-subgraph).

### 4. Развертывание в Subgraph Studio

Прежде чем вы сможете развернуть свой сабграф, вам необходимо будет пройти аутентификацию в Subgraph Studio. Вы можете сделать это, выполнив следующую команду:

Аутентифицируйте сабграф в studio

```
graph auth --studio <DEPLOY_KEY>
```

Затем войдите в свой каталог сабграфов.

```
    cd <SUBGRAPH_DIRECTORY>
```

Создайте свой сабграф с помощью следующей команды:

````
```
graph codegen && graph build
```
````

Наконец, вы можете развернуть свой сабграф с помощью этой команды:

```
graph deploy --studio <SUBGRAPH_SLUG>
```

### 5. Запросите свой сабграф

Как только ваш сабграф будет развернут, вы можете запросить его из своего приложения, используя "URL запроса разработки" в Subgraph Studio.

Примечание - Скорость работы Studio API ограничена. Следовательно, предпочтительно использовать для разработки и тестирования.

Чтобы узнать больше о запросе данных из вашего сабграфа, смотрите страницу [Запрос сабграфа](/querying/querying-the-graph).
