---
title: Deploy Using Subgraph Studio
---

Learn how to deploy your subgraph to Subgraph Studio.

> Note: When you deploy a subgraph, you push it to Subgraph Studio, where you'll be able to test it. It's important to remember that deploying is not the same as publishing. When you publish a subgraph, you're publishing it on-chain.

## Subgraph Studio Overview

In [Subgraph Studio](https://thegraph.com/studio/), you can do the following:

- View a list of subgraphs you've created
- Manage, view details, and visualize the status of a specific subgraph
- Создание и управление ключами API для определенных подграфов
- Restrict your API keys to specific domains and allow only certain Indexers to query with them
- Create your subgraph
- Deploy your subgraph using The Graph CLI
- Test your subgraph in the playground environment
- Integrate your subgraph in staging using the development query URL
- Publish your subgraph to The Graph Network
- Manage your billing

## Install The Graph CLI

Before deploying, you must install The Graph CLI.

You must have [Node.js](https://nodejs.org/) and a package manager of your choice (`npm`, `yarn` or `pnpm`) installed to use The Graph CLI. Check for the [most recent](https://github.com/graphprotocol/graph-tooling/releases?q=%40graphprotocol%2Fgraph-cli&expanded=true) CLI version.

### Install with yarn

```bash
yarn global add @graphprotocol/graph-cli
```

### Install with npm

```bash
npm install -g @graphprotocol/graph-cli
```

## Начнем

1. Open [Subgraph Studio](https://thegraph.com/studio/).
2. Connect your wallet to sign in.
   - You can do this via MetaMask, Coinbase Wallet, WalletConnect, or Safe.
3. After you sign in, your unique deploy key will be displayed on your subgraph details page.
   - The deploy key allows you to publish your subgraphs or manage your API keys and billing. It is unique but can be regenerated if you think it has been compromised.

> Important: You need an API key to query subgraphs

### How to Create a Subgraph in Subgraph Studio

<VideoEmbed youtube="nGIFuC69bSA" />

> For additional written detail, review the [Quick Start](/quick-start/).

### Совместимость подграфов с сетью Graph

In order to be supported by Indexers on The Graph Network, subgraphs must:

- Index a [supported network](/developing/supported-networks)
- Не должны использовать ни одну из следующих функций:
  - ipfs.cat & ipfs.map
  - Неисправимые ошибки
  - Grafting

## Initialize Your Subgraph

Once your subgraph has been created in Subgraph Studio, you can initialize its code through the CLI using this command:

```bash
graph init --studio <SUBGRAPH_SLUG>
```

You can find the `<SUBGRAPH_SLUG>` value on your subgraph details page in Subgraph Studio, see image below:

![Subgraph Studio - Slug](/img/doc-subgraph-slug.png)

После запуска `graph init` Вам будет предложено ввести адрес контракта, сеть и ABI, которые Вы хотите запросить. Это приведет к созданию новой папки на Вашем локальном компьютере с базовым кодом для начала работы над субграфом. Затем Вы можете завершить работу над своим субграфом, чтобы убедиться, что он функционирует должным образом.

## Аутентификация в Graph

Прежде чем Вы сможете развернуть свой субграф в Subgraph Studio, Вам будет необходимо войти в свою учетную запись в CLI. Для этого Вам понадобится ключ развертывания, который Вы сможете найти на странице сведений о субграфе.

После этого используйте следующую команду для аутентификации через CLI:

```bash
graph auth --studio <DEPLOY KEY>
```

## Развертывание субграфа

Когда будете готовы, Вы сможете развернуть свой субграф в Subgraph Studio.

> Развертывание субграфа с помощью CLI отправляет его в Studio, где Вы сможете протестировать его и обновить метаданные. Это действие не приводит к публикации субграфа в децентрализованной сети.

Используйте следующую команду CLI для развертывания своего субграфа:

```bash
graph deploy --studio <SUBGRAPH_SLUG>
```

После выполнения этой команды CLI запросит метку версии.

- Настоятельно рекомендуется использовать [semver](https://semver.org/) для управления версиями типа `0.0.1`. При этом Вы можете выбрать любую строку в качестве версии, например: `v1`, `version1` или `asdf`.
- Созданные вами метки будут видны в Graph Explorer, и кураторы смогут использовать их для принятия решения, сигнализировать на определенную версию или нет, поэтому выбирайте метки с умом.

## Тестирование Вашего субграфа

После развертывания Вы можете протестировать свой субграф (в Subgraph Studio или в собственном приложении, используя URL-адрес запроса на развертывание), развернуть другую версию, обновить метаданные и, когда будете готовы, опубликовать в [Graph Explorer](https://thegraph.com/explorer).

Используйте Subgraph Studio, чтобы проверить логи на панели управления и обнаружить возможные ошибки в своем субграфе.

## Публикация Вашего субграфа

Чтобы успешно опубликовать свой субграф, ознакомьтесь с [публикацией субграфа](/publishing/publishing-a-subgraph/).

## Управление версиями Вашего субграфа с помощью CLI

Если Вы хотите обновить свой субграф, Вы можете сделать следующее:

- Вы можете развернуть новую версию в Studio, используя CLI (на этом этапе она будет только приватной).
- Если результат Вас устроит, Вы можете опубликовать новое развертывание в [Graph Explorer](https://thegraph.com/explorer).
- Это действие создаст новую версию вашего субграфа, о которой Кураторы смогут начать сигнализировать, а Индексаторы — индексировать.

Вы также можете обновить метаданные субграфа без публикации новой версии. В Studio можно обновить данные субграфа (аватар, название, описание и т.д.), выбрав опцию **Обновить данные** в [Graph Explorer](https://thegraph.com/explorer). Если эта опция выбрана, будет сгенерирована транзакция в сети, которая обновит информацию о субграфе в Explorer без необходимости публиковать новую версию с новым развертыванием.

> Примечание: Публикация новой версии субграфа в сети требует определенных затрат. Помимо комиссий за транзакцию, Вам нужно также оплатить часть кураторского сбора за авто-миграционный сигнал. Вы не сможете опубликовать новую версию субграфа, если на нее не был подан сигнал от Кураторов. Дополнительную информацию можно прочитать [здесь](/network/curating/).

## Автоматическое архивирование версий подграфа

Каждый раз, когда Вы развертываете новую версию субграфа в Subgraph Studio, предыдущая версия архивируется. Архивированные версии не будут проиндексированы/синхронизированы и, следовательно, их нельзя будет запросить. Вы можете разархивировать архивированную версию своего субграфа в Subgraph Studio.

> Примечание: предыдущие версии непубликованных субграфов, развернутых в Studio, будут автоматически архивированы.

![Subgraph Studio - Unarchive](/img/Unarchive.png)
