---
title: Быстрый старт
---

Узнайте, как легко публиковать и запрашивать [субграф](/developing/developer-faqs/#1-what-is-a-subgraph) на The Graph.

## Необходимые условия для данного руководства

- Криптовалютный кошелек
- Адрес смарт-контракта в одной из [поддерживаемых сетей](/developing/supported-networks/)

## Пошаговое руководство

### 1. Установка the Graph CLI

Для использования Graph CLI у Вас должен быть установлен [Node.js](https://nodejs.org/) и менеджер пакетов по Вашему выбору (`npm`, `yarn` или `pnpm`). Проверьте у себя наличие [самой последней](https://github.com/graphprotocol/graph-tooling/releases?q=%40graphprotocol%2Fgraph-cli&expanded=true) версии CLI.

Выполните одну из следующих команд на своём локальном компьютере:

Использование [npm](https://www.npmjs.com/):

```sh
npm install -g @graphprotocol/graph-cli@latest
```

Использование [yarn](https://yarnpkg.com/):

```sh
yarn global add @graphprotocol/graph-cli
```

### 2. Создание Вашего субграфа

Если в Вашем контракте есть события, команда `init` автоматически создаст каркас субграфа.

#### Создание с помощью Graph CLI

Используйте следующую команду для создания субграфа в Subgraph Studio с помощью CLI:

```sh
graph init --product subgraph-studio
```

#### Создание с помощью Subgraph Studio

Subgraph Studio позволяет создавать, управлять, развертывать и публиковать субграфы, а также создавать и управлять API-ключами.

1. Перейдите в [Subgraph Studio](https://thegraph.com/studio/) и подключите свой кошелек.
2. Нажмите "Создать субграф". Рекомендуется называть субграф с использованием Заглавного регистра: "Subgraph Name Chain Name".

Дополнительную информацию о создании субграфа и использовании Graph CLI смотрите в разделе [Creating a Subgraph](/developing/creating-a-subgraph).

### 3. Инициализация Вашего cубграфа

#### Из существующего контракта

Следующая команда инициализирует ваш субграф из существующего контракта:

```sh
graph init <SUBGRAPH_SLUG>
```

> Примечание: Если Ваш контракт был проверен на Etherscan, то ABI будет автоматически создано в CLI.

Вы можете найти команды для своего конкретного субграфа на странице субграфа в [Subgraph Studio](https://thegraph.com/studio/).

При инициализации субграфа CLI запросит у Вас следующую информацию:

- **Protocol**: Choose the protocol your subgraph will be indexing data from.
- **Subgraph slug**: Create a name for your subgraph. Your subgraph slug is an identifier for your subgraph.
- **Directory**: Choose a directory to create your subgraph in.
- **Ethereum network** (optional): You may need to specify which EVM-compatible network your subgraph will be indexing data from.
- **Contract address**: Locate the smart contract address you’d like to query data from.
- **ABI**: If the ABI is not auto-populated, you will need to input it manually as a JSON file.
- **Start Block**: You should input the start block to optimize subgraph indexing of blockchain data. Locate the start block by finding the block where your contract was deployed.
- **Contract Name**: Input the name of your contract.
- **Index contract events as entities**: It is suggested that you set this to true, as it will automatically add mappings to your subgraph for every emitted event.
- **Add another contract** (optional): You can add another contract.

На следующем скриншоте показан пример того, чего следует ожидать при инициализации субграфа:

![Subgraph command](/img/CLI-Example.png)

### 4. Создание Вашего субграфа

Команда `init` на предыдущем шаге создает шаблон субграфа, который Вы можете использовать в качестве отправной точки для его разработки.

При внесении изменений в субграф Вы будете работать в основном с тремя файлами:

- Манифест (`subgraph.yaml`) — определяет, какие источники данных Ваш субграф будет индексировать.
- Схема (`schema.graphql`) - Схема GraphQL определяет, какие данные Вы хотите извлечь из субграфа.
- AssemblyScript Mappings (mapping.ts) - это код, который преобразует данные из Ваших источников данных в объекты, определенные в схеме.

Для получения более детальной информации о том, как создать свой субграф, ознакомьтесь с разделом [Creating a Subgraph](/developing/creating-a-subgraph/).

### 5. Развертывание Вашего субграфа

Помните, развертывание — это не то же самое, что публикация.

- Когда Вы развертываете субграф, Вы загружаете его в [Subgraph Studio](https://thegraph.com/studio/), где можете его протестировать, подготовить и просмотреть.
- Когда Вы публикуете субграф, Вы публикуете его в децентрализованной сети на чейне.

1. После того как Ваш субграф будет написан, выполните следующие команды:

   ```sh
   graph codegen
   graph build
   ```

2. Аутентифицируйте и разверните свой субграф. Ключ развертывания можно найти на странице Subgraph в Subgraph Studio.

![Deploy key](/img/subgraph-studio-deploy-key.jpg)

````
```sh

graph auth <DEPLOY_KEY>

graph deploy <SUBGRAPH_SLUG>
```
````

- CLI запросит метку версии.
  - Настоятельно рекомендуется использовать [семантическое управление версиями] (https://semver.org/), например. «0.0.1». При этом Вы можете выбрать любую строку для версии, например: `v1`, `version1`, `asdf` и т. д.

### 6. Просмотр Вашего субграфа

Если Вы хотите проверить свой субграф перед его публикацией в сети, Вы можете использовать [Subgraph Studio](https://thegraph.com/studio/) для следующих действий:

- Запустить пример запроса.
- Проанализировать Ваш субграф на панели управления для проверки информации.
- Проверить логи на панели управления, чтобы убедиться, нет ли ошибок в Вашем субграфе. Логи рабочего субграфа будут выглядеть следующим образом:

  ![Subgraph logs](/img/subgraph-logs-image.png)

### Публикация Вашего субграфа в сети The Graph

Публикация субграфа в децентрализованной сети делает его доступным для [Кураторов](/network/curating/), чтобы начать его курирование, и для [Индексаторов](/network/indexing/), чтобы начать его индексирование.

#### Публикация с помощью Subgraph Studio

1. Чтобы опубликовать свой субграф, нажмите кнопку «Опубликовать» на панели управления.
2. Выберите сеть, в которую хотите опубликовать свой субграф.

#### Публикация с помощью CLI

Начиная с версии 0.73.0, Вы также можете публиковать свой субграф с помощью Graph CLI.

1. Откройте `graph-cli`.

2. Используйте следующие команды:

   ```sh
   graph codegen && graph build
   ```

   Затем,

   ```sh
   graph publish
   ```

3. Откроется окно, где Вы сможете подключить свой кошелек, добавить метаданные и развернуть финализированный субграф в выбранной Вами сети.

![cli-ui](/img/cli-ui.png)

Для настройки развертывания ознакомьтесь с разделом [Публикация субграфа](/publishing/publishing-a-subgraph/).

#### Добавление сигнала к Вашему субграфу

1. Чтобы привлечь индексаторов для выполнения запросов к Вашему субграфу, Вам следует добавить к нему сигнал кураторства в GRT.

   - Это действие улучшает качество обслуживания, снижает задержку и увеличивает надежность и доступность сети для Вашего субграфа.

2. Если индексаторы имеют право на получение вознаграждений за индексацию, они получат вознаграждения в GRT, в соответствии с количеством поданного сигнала.

   - Рекомендуется добавить как минимум 3,000 GRT, чтобы привлечь 3 индексаторов. Проверьте право на вознаграждение на основе использования функций субграфа и поддерживаемых сетей.

Чтобы узнать больше о кураторстве, прочитайте раздел [Curating](/network/curating/).

Чтобы сэкономить на расходах на газ, Вы можете курировать свой субграф в той же транзакции, в которой Вы его публикуете, выбрав эту опцию:

![Subgraph publish](/img/studio-publish-modal.png)

### 8. Запрос Вашего субграфа

Теперь Вы можете запросить свой субграф, отправив запросы GraphQL на URL-адрес запроса Вашего субграфа, который можно найти, нажав кнопку запроса.

Для получения дополнительной информации о запросах данных из Вашего субграфа прочитайте раздел [Querying The Graph](/querying/querying-the-graph/).
