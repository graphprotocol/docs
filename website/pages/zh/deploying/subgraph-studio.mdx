---
title: 如何使用子图工作室
---

欢迎使用您的新启动板👩🏽‍🚀

子图工作室是您构建和创建子图、添加元数据并将其发布到新去中心化浏览器([这里](/network/explorer)有更多介绍) 的地方。

您可以在子图工作室中执行的操作：

- 通过 Studio UI 创建子图
- 使用 CLI 部署子图
- 使用 Studio UI 发布子图
- 在面板上测试子图
- 使用查询 URL 将其集成到暂存中
- 为特定子图创建和管理 API 密钥

在子图工作室中，您可以完全控制您的子图。 您不仅可以在发布子图之前对其进行测试，还可以将 API 密钥限制在特定域中，并且只允许某些索引者从其 API 密钥中进行查询。

查询子图会产生查询费用，用于奖励Graph网络上的[索引人](/network/indexing)。如果您是一个 dapp 开发人员或子图开发人员，工作室将授权您构建更好的子图，以支持您或您的社区的查询。工作室由5个主要部分组成:

- 您的用户账户控件
- 您创建的子图列表
- 管理、查看细节及可视化特定子图状态的部分
- 用于管理 API 密钥的部分，您需要查询子图
- 管理账单的部分

## 如何创建您的账户

1. 使用您的钱包登录 - 您可以通过 MetaMask 或 WalletConnect 进行此操作
1. 一旦您登录，您将在您的账户主页上看到您唯一的部署密钥。这将允许您发布您的子图或管理您的 API 密钥 + 计费。您将拥有一个惟一的部署密钥，如果您认为该密钥已被破坏，则可以重新生成该密钥。

## 如何在子图工作室中创建子图

最好的部分！ 当您第一次创建子图时，您将被指示填写：

- 您的子图名称
- 图片
- 描述
- 类别 (e.g. `DeFi`, `NFTs`, `Governance`)
- 网站

## 子图与图形网络的兼容性

Graph网络还不能支持所有的数据源和托管服务上可用的功能。 为了被网络上的索引人支持，子图必须：

- 索引[支持的网络](/developing/supported-networks)
- 不得使用以下任何功能：
  - ipfs.cat & ipfs.map
  - 非致命错误
  - 嫁接

更多功能& 和网络将逐渐添加到图形网络。

### 子图生命周期流程

![子图生命周期](/img/subgraph-lifecycle.png)

创建子图之后，您就可以使用 [CLI](https://github.com/graphprotocol/graph-cli) 或者命令行界面来部署它了。使用 CLI 部署子图将把子图推送到工作室，在那里您可以使用控制面板测试子图。这将最终允许您发布到图形网络。有关 CLI 设置的更多信息，[请查看以下内容](/developing/defining-a-subgraph#install-the-graph-cli)(pst，请确保手头有部署密钥)。请记住，部署与发布**不同**。当您部署一个子图时，您只需将它推送到工作室，在那里您可以对它进行测试。相反，当您发布子图时，您是在链上发布它。

## 在子图工作室中测试您的子图

如果您想在将子图发布到网络之前对其进行测试，您可以在子图 **面板** 中执行此操作或查看您的日志。 子图日志将告诉您**在哪里**您的子图在发生什么情况下失败。

## 在子图工作室中发布您的子图

你已经走到了这一步——祝贺你！

为了成功发布子图，你需要完成本[博客](https://thegraph.com/blog/building-with-subgraph-studio)中概述的以下步骤。

还可以查看下面的视频概述：

<VideoEmbed youtube="HfDgC2oNnwo" />

请记住，当您处理发布流程时，您可以推送到主网或 Goerli。如果你是一个子图开发者，我们强烈建议你从 Goerli 开始，这是免费的。这将允许您查看子图在 Graph浏览器中的工作方式，并允许您测试策展元素。

索引人需要提交特定区块hash的索引记录的强制性证明。因为发布子图是在链上执行的操作，所以请记住，交易可能需要几分钟的时间才能完成。用于发布合同的任何地址都将是唯一能够发布未来版本的地址。明智地选择！

具有策展信号的子图显示给索引人，以便它们可以在去中心化网络上被索引。 您可以在一个交易中发布子图和信号，这允许您在子图上创建第一个策展信号并节省费用成本。 通过将您的信号添加到策展人稍后提供的信号中，您的子图也将有更高的机会最终提供查询。

**现在您已经发布了您的子图，让我们来看看您将如何定期管理它们。**请注意，如果您的子图有 同步失败。 这通常是因为子图有错误 - 日志会告诉您这些问题存在于哪里！

## 使用 CLI 对子图进行版本控制

出于各种原因，开发人员可能想要更新他们的子图。 在这种情况下，您可以使用 CLI 将新版本的子图部署到 工作室（此时它只是私有的），如果您对它感到满意，您可以将此新部署发布到Graph浏览器。 这将创建新版本的子图，策展人可以开始发出信号，索引人将能够索引这个新版本。

直到最近，开发人员还被迫在浏览器上部署和发布子图的新版本，以更新子图的元数据。现在，开发人员可以更新子图的元数据，**而无需发布新版本**。开发人员可以通过检查图形浏览器中名为 **更新细节** 选项来更新工作室中的子图详细信息(在配置文件图片、名称、描述等下)。如果选中此选项，将生成一个链上交易，该交易将更新浏览器中的子图详细信息，而无需发布带有新部署的新版本。

请注意，在网络上发布子图的新版本是有成本的。除了交易费用，开发人员还必须为自动迁移信号的部分策展税提供资金。如果策展人没有在子图上发出信号，则不能发布子图的新版本。更多关于策展风险的信息，请点击[这里](/network/curating)阅读。

### 子图版本的自动归档

每当您在子图工作室中部署新的子图版本时，都会归档以前的版本。 存档版本不会被索引/同步，因此无法查询。 您可以在 Studio UI 中取消存档子图的存档版本。 请注意，部署到工作室的以前版本的未发布子图将被自动存档。

![子图工作室 - 取消归档](/img/Unarchive.png)
