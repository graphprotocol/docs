---
title: 网络过渡常见问题解答
---

开发者将有充足的时间将其子图迁移到去中心化网络。根据索引人和网络准备情况，每个链的确切时间会有所不同，托管服务不会立即终止对所有链的支持，也不会突然停止。

托管服务（包括以太坊）上的每个链都将逐渐衰落，因为它在去中心化网络上得到支持，以实现功能对等和高质量的服务。这将在[MIPs计划](https://thegraph.com/blog/mips-multi-chain-indexing-incentivized-program/)中索引人的帮助下，在网络到网络的基础上进行，以实现对去中心化网络上每个网络的全面支持。

为了进一步明确对托管服务上每个网络的持续支持，这些FAQS解答了有关网络过渡过程细节的常见问题。如果您想现在开始子图迁移过程，这里有一个[分步指南](https://thegraph.com/blog/how-to-migrate-ethereum-subgraph)。要跳到迁移常见问题解答，请[单击此处](#migration-faqs)。

## 托管服务末期常见问题解答

### 在去中心化网络为子图提供核心功能之前，是否必须迁移子图？

子图开发人员现在可以开始迁移他们的以太坊主网子图，但在去中心化网络和托管服务存在功能核心功能之前，不会强制将子图迁移到网络。Gnosis链子图的迁移也将很快开始，一旦索引人测试了链并准备好在生产中对其进行索引，其他网络也将跟进。

### 弃用托管服务的时间线和流程是什么？

所有网络都将有自己的时间线，这取决于它们在网络上的启用时间以及完成每个阶段所需的时间线。核心开发人员正在努力尽快将大部分托管服务流量迁移到去中心化网络。

最重要的是，在去中心化网络上特定网络/子图的核心功能可用之前，您不会失去对托管服务的访问。

每个网络的托管服务弃用的三个不同阶段是：

#### 阶段1(The Sunray)：禁止为网络上质量相同的区块链创建新的子图

在此阶段，开发人员将无法再为该链的托管服务部署新的子图。开发人员仍然可以升级托管服务上的现有子图。

还没有网络开始从托管服务向去中心化网络过渡的第一阶段。

随着网络进入第1阶段，请注意，开发人员仍然可以使用子图工作室中速率受限的开发者预览URL来开发和测试其子图（最多1000个免费查询），而无需获取GRT或与协议经济性交互。

#### 阶段2(The Sunbeam)：禁用子图升级

在此阶段，必须通过子图工作室升级子图，然后发布到去中心化网络。网络的托管服务子图仍然存在，并且可以查询，但必须在Graph的去中心化网络上升级子图。

由于流程是由核心功能的退出标准驱动的，而不是日期，因此没有确切的时间表来确定任何网络何时会进入该阶段。

#### 阶段3(The Sunrise)：禁用查询子图

在此阶段，托管服务上的子图不再处理由Graph网络支持的网络的查询。在这个阶段，查询网络上子图的区块链数据的唯一方法是通过去中心化网络。测试查询仍然可以通过开发查询URL在[子图工作室](https://thegraph.com/studio/)中使用。

直到成功移动到第2阶段，网络将不会移动到第3阶段，并给开发者足够的时间迁移到去中心化网络。

![子图图表](/img/subgraph-chart.png)

> 注意：此图反映了每个网络的消减过程。托管服务消减时间会有所不同，不会一次消减。

### Goerli, Mumbai等测试网络会发生什么？

所有网络和测试网络都有资格在[子图工作室](https://thegraph.com/studio/)中获得免费的部署查询URL。此URL受速率限制，仅用于用于测试和开发产生的流量。想拥有产品级流量将需要已经发布到Graph网络的子图，以便具有生产级冗余和稳定性。

![速率上限](/img/rate-limit.png)

### Graph网络是否具有与托管服务相同的功能？

Graph网络上的索引人运行[Graph节点](https://github.com/graphprotocol/graph-node/releases)的最新网络批准版本，并且可以支持该版本中支持的任何子图功能。

有时，仍在开发中的未发布功能可能首先在Developer Preview URL上可用，该URL运行[Graph节点](https://github.com/graphprotocol/graph-node)的最新主提交。这些功能将在下一个Graph节点版本中在网络上可用。

如果某些子图功能在网络上不具有确定性或可验证性，则它们不符合索引奖励的条件。具体示例是从IPFS获取文件，以及在Graph网络上尚未支持的索引网络。

具有这些功能的子图可以发布到网络，但索引人可能无法获取。然而，具有足够信号的子图仍然可能吸引对收集查询费用感兴趣的索引人，任何子图都有资格获得查询费用。

### 与运行自己的基础设施相比，Graph网络的成本是多少？

如[这些案例研究](https://thegraph.com/docs/en/network/benefits/#low-volume-user-less-than-30000-queries-per-month)所示，Graph的去中心化网络比运行专用基础设施的成本低60-90%。

### 迁移到网络后，应该对托管服务子图做什么？

强烈建议隐藏托管服务子图以避免混淆。[本视频](https://www.loom.com/share/7cffd2a7845e4fbd8c51f45c516cb7f9)将介绍整个过程。

### 去中心化网络何时支持首选网络？

每个网络没有设定的时间线，它们将由索引人通过[MIP计划](https://thegraph.com/migration-incentive-program/)决定，其中新网络由索引人测试。由于网络上支持新的网络，用户将收到充分的通知，为迁移做好准备。Graph生态系统的核心开发人员和贡献者正在努力尽快实现对更多网络的支持。

### 以太坊主网是否进入网络过渡过程的第一阶段？

虽然以太坊最初预计将于2022年第三个季度末开始脱离托管服务，但这一计划已被[推迟](https://thegraph.com/blog/transitioning-to-decentralized-graph-network)，以解决用户反馈问题。对用户体验、计费和其他用户请求实现的额外改进将推动以太坊的托管服务过渡时间表。通过下面的集成状态跟踪器和[The Graph Twitter](https://twitter.com/graphprotocol)了解以太坊何时进入Sunray阶段。

### Graph 网络集成状态跟踪器

下表说明了每个网络在网络集成过程中的位置。如果您的首选网络尚未列出，则集成尚未开始，且该网络仍由Graph的托管服务完全支持。

> 此表将不包含[子图工作室](https://thegraph.com/studio/)中保持免费的测试网络。

| 网络 | 宣布在Graph网络上集成 | 网络集成完成 | 阶段1：禁用托管服务上的新子图 | 阶段2：禁用托管服务上的子图升级 | 阶段3：禁用托管服务上的子图 |
| --- | :-: | :-: | :-: | :-: | :-: |
| 以太坊 | ✓ | ✓ |  |  |  |
| Gnosis（以前称为 xDAI） | ✓ | ✓\* |  |  |  |
| Polygon | ✓ |  |  |  |  |
| Celo | ✓ | ✓\* |  |  |  |
| Arbitrum One | ✓ | ✓\* |  |  |  |
| Avalanche | ✓ | ✓\* |  |  |  |
| Optimism | ✓ |  |  |  |  |
| Fantom | ✓ |  |  |  |  |

\*该网络目前正在Graph的去中心化网络上进行测试。

## 查询费用、API密钥和计费常见问题解答

### 查询费用如何定价？

在去中心化网络中，查询费用受到查询需求的影响。核心开发人员创建了一个名为 [Agora](https://github.com/graphprotocol/agora) 的查询定价成本模型语言。它使索引人能够有效地为查询定价。在 [Agora](https://github.com/graphprotocol/agora/blob/master/docs/README.md) 文档中了解更多信息。

### 如何设置最大查询预算？

用户可以在“预算”选项卡下的“ Subgraph Studio [API Key](https://thegraph.com/studio/apikeys/)”部分中设置最大查询预算。[观看此视频](https://www.loom.com/share/b5fc533e48584cb694017392c80c75e0)，以了解该过程的概述，以及调整您的 API 密钥的其他部分。

请注意，将您的最大查询预算设置得太低将排除索引人，可能导致低质量的服务，如查询失败、查询缓慢等。

截至2022年9月底，最佳实践是将最大查询预算保持在 0.00035-0.0004美元范围内。

### 如何保护 API 密钥？

鼓励用户在 [子图工作室](https://thegraph.com/studio/) 中通过子图和域来限制 API 密钥:

![受限制的域](/img/restrictdomain.png)

### 如何填写 API 密钥以支付查询费用？

您可以通过按“添加 GRT”按钮来填充子图工作室 [计费仪表板](https://thegraph.com/studio/billing/)中的计费余额。目前正在努力改善这方面的经验，以增加更多的无缝和经常性付款。

[这段视频](https://www.loom.com/share/a81de6ef11d64c62872ea210c58c6af5)概述了这个过程。

### 如何在 API 密钥中设置低账单余额警报？

用户应该在[这里](https://thegraph.com/studio/settings/)设置一个账单提醒到他们的电子邮件地址。

此外，当账单余额越来越低时，用户的用户界面中会闪现一个横幅来发出警告。

管理 API 密钥设置的最佳实践是什么？

建议使用0.0004美元的最大查询预算来维持较低的平均查询价格，同时保持高质量的服务。这可以在 [API Key 部分](https://thegraph.com/studio/apikeys/)的预算计费选项卡中完成。

## 迁移常见问题

### 怎样才能将子图迁移到Graph的去中心化网络中呢？

了解如何迁移您的子图到Graph网络与这个简单的[一步一步的指南](https://thegraph.com/blog/how-to-migrate-ethereum-subgraph)或[此视频](https://www.youtube.com/watch?v=syXwYEk-VnU&t=1s)。

### 对于早期迁移到Graph网络的子图，是否有迁移补助金？

是的，要申请补助金，就到[这里](mailto:migration@thegraph.foundation)来。

### 通过从 Graph 生态系统的迁移过程，是否有任何财务/技术/市场支持？

项目有移植补助金，用于管理子图(吸引索引人)和支付初始查询费用(在[这里](https://thegraph.typeform.com/to/Zz8UAPri?typeform-source=thegraph.com)申请) ，一个[直接的渠道](https://discord.gg/graphprotocol)，以帮助工程师的每一个步骤，并优先营销活动，以展示你的项目迁移后，例如这些 Twitter 里: [1](https://twitter.com/graphprotocol/status/1496891582401814537),[2](https://twitter.com/graphprotocol/status/1491926128302379008),&[3](https://twitter.com/graphprotocol/status/1491126245396201473)。

### 查询需要多长时间？

在去中心化网络中，查询平均需要150-300毫秒。

### Graph网络上的计费流程是否比托管服务上的更复杂？

是的，网络的用户体验还没有达到托管服务的质量平价。特别是计费用户体验，仍然处于非常早期的阶段，核心开发团队正在努力从流程中抽象出许多移动的部分。这些改进中的大部分将在不久的将来公布于众。

### 我可以支付Graph网络查询法令，信用卡，或稳定硬币？

在接下来的几个月里，用户为了支付他们的子图而需要采取的步骤将大大减少。尽管仍将使用 GRT 进行支付，但已经在努力实施一个法定的入口匝道和自动化支付系统，将法定和加密货币转换为 GRT 进行经常性支付。

### 网络是否会拥有与托管服务相同的用户体验？

虽然仍有工作要做，但目标是在 The Graph Network 上提供与目前托管服务上存在的质量相当甚至更好的用户体验。短期内，目标是提供更精简和可预测的计费体验，帮助用户将更多时间用于构建高质量的 dapp。

### 如何确保子图将被Graph网络上的索引人获取？

建议使用至少10,000 GRT 进行策划，用户可以在发布时的同一交易中进行策划。用户也可以要求策展社区在[这里](https://t.me/CurationStation)策展他们的子图。

早期移民有移民补助金来支付这些初始费用，你可以在[这里](mailto:migration@thegraph.foundation)申请。

### 为什么子图需要策展信号? 如果策展人在子图上没有足够的信号怎么办？

策划信号越高，子图对索引者越有吸引力，因为较高的信号和较高的索引回报之间存在线性相关。如果没有策展，索引人就没有动力选择子图。

### 子图开发人员用于策展信号的 GRT 会发生什么变化？

如果您是第一个信号子图，您的 GRT 信号量将不会下降。用于治疗的 GRT 可以稍后移除。此外，策展人获得索引人收取所有查询费用的10% 。

### 策展过程有哪些改进？

短期内，Arbitrum的初始策展模型将为策展信号提供原理性保护。从长远来看，核心开发人员将优先考虑为开发人员提供租赁策展信号的能力，打开一个更可预测的定价体验，同时仍然确保子图被充分索引。

### 如何在前端切换子图 API？

在至少一个索引人完全索引了一个子图之后，用户可以查询去中心化的网络。

为了检索子图的查询 URL，您可以通过单击查询 URL 旁边的符号来复制/粘贴它。你会看到这样的东西:

`https://gateway.thegraph.com/api/[api-key]/subgraphs/id/S9ihna8D733WTEShJ1KctSTCvY1VJ7gdVwhUujq4Ejo`

只需将[ API-Key] 替换为子图工作室 [API Key部分](https://thegraph.com/studio/apikeys/)中生成的 API 密钥。

### 查询的成本是多少？

网络中的平均查询成本是不同的。在2022年9月，每个查询费用的平均价格介于 0.00012-0.00020美元之间。

### 怎样才能知道子图有多少体积，将花费多少？

托管服务数量数据不公开。请在[这里](mailto:migration@thegraph.foundation)获取数量和成本估算。

### 网关是如何工作的? 它是完全去中心化的吗？

网关进程查询，以便索引人可以为 dapps 提供服务。网关处于一个逐步去中心化的中间阶段。很快会有更多消息。

## 使用网络的常见问题

### 升级子图有成本吗？

是的，这是1% 的策展信号。1% 平均分配给策展人 (0.5%) 和子图开发者(0.5%)。因此，每发出一个10K GRT 信号，子图开发人员就要花费50 GRT 进行升级。

### 如何加快同步时间？

尽量减少子图中智能合约调用的使用。访问智能合约状态需要对 RPC 进行 eth \_ call，这会减慢同步时间。

### 迁移子图工作室的时候有多重签名支持吗？

是的，最近增加了对多重签名的支持。您可以在[这里](https://thegraph.com/docs/studio/multisig)找到更多信息。

### 以太坊和Arbitrum上GRT的合约地址是什么？

- 以太坊: `0xc944E90C64B2c07662A292be6244BDf05Cda44a7`
- 以太坊Goerli测试网地址: `0x5c946740441C12510a167B447B7dE565C20b9E3C`
- Arbitrum: `0x9623063377AD1B27544C965cCd7342f7EA7e88C7`
- Arbitrum Goerli地址: `0x18c924bd5e8b83b47efadd632b7178e2fd36073d`

### 项目通常在 API 密钥中保留多少 GRT？

许多项目在 API 密钥中保留了30-60天的 GRT，所以他们不需要经常重新填充。要了解您的30-60天 GRT 费用是什么，请到[这里](mailto:migration@thegraph.foundation)来。

### 如何在去中心化的网络上进行查询支付？ 

费用每周开一次发票，从用户的 API 密钥中取出，用GRT 桥接并位于Arbitrum 上。

### 如何在去中心化网络中使用子图的 API 密钥？

API 密钥使用户能够在他们支付的最高查询价格和优先考虑价格、经济新鲜度和查询速度等因素方面拥有发言权。

### 当前托管服务和去中心化网络之间的服务质量比较如何？

托管服务和去中心化网络具有大致相同的中值延迟，但是去中心化网络在较高的百分位数具有较高的延迟。200个查询的比率通常相似，都> 99.9% 。由于它的去中心化，网络没有广泛的子图中断，而托管服务确实在罕见的情况下有临时中断，由于其中心化的性质。

### 如果这些常见问题没有回答我的问题怎么办？

如需任何其他帮助，请联系 [mobile@thegraph. foundation](mailto:migration@thegraph.foundation)。
