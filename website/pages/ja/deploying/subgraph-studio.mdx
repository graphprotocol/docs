---
title: Subgraph Studioの使い方
---

新しいランチパッドの使い方👩🏽‍🚀

Subgraph Studio は、サブグラフを構築・作成し、メタデータを追加して、新しい分散型エクスプローラーに公開するための場所です（詳細は[こちら](/network/explorer)）

Subgraph Studio でできること

- Studio UI によるサブグラフの作成
- CLI を使用したサブグラフのデプロイ
- スタジオ UI でサブグラフをリリースする
- プレイグラウンドでのテスト
- クエリ URL を使用してステージングに統合する
- 特定のサブグラフ用の API キーの作成と管理

Subgraph Studio では、サブグラフを完全にコントロールすることができます。サブグラフを公開する前にテストできるだけでなく、API キーを特定のドメインに限定したり、特定のインデクサに API キーからのクエリを許可したりすることもできます。

サブグラフへのクエリはクエリフィーを発生させ、グラフネットワーク上の[インデクサー](/network/indexing)への報酬とします。dapp の開発者やサブグラフの開発者は、この Studio を利用することで、より優れたサブグラフを構築し、自分やコミュニティのクエリを強化することができます。Studio は 5 つの主要部分で構成されています:

- ユーザー アカウント コントロール
- 作成したサブグラフのリスト
- 特定のサブグラフのステータスを管理、詳細表示、視覚化するセクション
- サブグラフのクエリに必要な API キーを管理するセクション
- 請求書を管理するためのセクション

## アカウントの作成方法

1. お使いのウォレットでサインインします - MetaMask または WalletConnect で行うことができます。
1. サインインすると、アカウントのホームページに固有のデプロイキーが表示されます。これにより、サブグラフの公開や API キーと課金の管理を行うことができます。固有のデプロイキーは、漏洩したと思われる場合に再生成することができます。

## Subgraph Studio でサブグラフを作成する方法

<VideoEmbed youtube="nGIFuC69bSA" />

## Subgraph と The Graph Network の互換性

The Graph Network は、Hosted Service で利用可能なデータソースや機能のすべてに対応しているわけではありません。ネットワーク上のインデクサでサポートされるためには、サブグラフは以下の条件を満たす必要があります。

- [サポートされているネットワーク](/developing/supported-networks)にインデックスを付ける
- 以下の機能のいずれも使用してはいけません:
  - ipfs.cat & ipfs.map
  - 致命的でないエラー
  - Grafting

The Graph Network の機能やネットワークは順次追加されていきます。

### サブグラフのライフサイクルフロー

![サブグラフのライフサイクル](/img/subgraph-lifecycle.png)

サブグラフを作成したら、[CLI](https://github.com/graphprotocol/graph-cli) またはコマンドライン インターフェイスを使用して展開できます。 CLI を使用してサブグラフをデプロイすると、サブグラフがスタジオにプッシュされ、プレイグラウンドを使用してサブグラフをテストできるようになります。これにより、最終的にグラフ ネットワークに公開できるようになります。 CLI セットアップの詳細については、[こちらをチェックしてください](/developing/defining-a-subgraph#install-the-graph-cli) (pst、デプロイ キーが手元にあることを確認してください)。.デプロイは**公開とは異なります**ことに注意してください。サブグラフをデプロイするときは、それをテストできる Studio にプッシュするだけです。対して、サブグラフを公開するときは、それをオンチェーンで公開しています。

## Subgraph Studio でのサブグラフのテスト

ネットワークに公開する前にサブグラフをテストしたい場合、Subgraph **Playground**でこれを行うか、ログを見ることができます。Subgraph のログは、サブグラフが失敗した場合に、**どこで**失敗したかを教えてくれます。

## Subgraph Studio でサブグラフを公開する

ここまで来ました - おめでとうございます！

サブグラフを正常に公開するには、この [ブログ](https://thegraph.com/blog/building-with-subgraph-studio) で概説されている次の手順を実行する必要があります。.

以下のビデオの概要もご覧ください:

<VideoEmbed youtube="HfDgC2oNnwo" />

パブリッシュ フローを実行している間、メインネットまたは Sepolia にプッシュできることを忘れないでください。初めてサブグラフを開発する場合は、無料で Sepolia に公開することから始めることを強くお勧めします。これにより、グラフ エクスプローラーでサブグラフがどのように機能するかを確認し、キュレーション要素をテストできます。

インデクサーは、特定のブロック ハッシュの時点で必須のインデックス作成証明レコードを提出する必要があります。サブグラフの公開はチェーン上で実行されるアクションであるため、トランザクションが完了するまでに最大で数分かかる場合があることに注意してください。コントラクトを公開するために使用するアドレスは、将来のバージョンを公開できる唯一のアドレスになります。賢明に選択してください！

キュレーションシグナルを持つサブグラフは、分散型ネットワーク上でインデックスを作成できるようにインデクサーに表示されます。サブグラフとシグナルを 1 つのトランザクションで公開できるので、サブグラフの最初のキュレーションシグナルをミントすることができ、ガス代を節約することができます。また、キュレーターが後から提供するシグナルに自分のシグナルを加えることで、自分のサブグラフが最終的にクエリを提供する確率が高くなります。

**サブグラフの公開が完了したところで、次にサブグラフの定期的な管理方法について説明します。**同期に失敗したサブグラフは、ネットワークに公開できないことに注意してください。これは通常、サブグラフにバグがあるためで、ログを見ればどこに問題があるかがわかります。

## CLI によるサブグラフのバージョン管理

開発者は、さまざまな理由でサブグラフを更新したい場合があります。このような場合、CLI を使用してスタジオにサブグラフの新バージョンをデプロイし（この時点ではプライベートのみ）、新しいデプロイメントを The Graph Explorer に公開することができます。これにより、サブグラフの新しいバージョンが作成され、キュレーターはシグナリングを開始することができ、インデクサはこの新しいバージョンにインデックスを付けることができます。

最近まで、開発者は、サブグラフのメタデータを更新するために、サブグラフの新しいバージョンを展開して Explorer に公開することを余儀なくされていました。これで、開発者は**新しいバージョンを公開することなく**、サブグラフのメタデータを更新できます。開発者は、The Graph Explorer の **Update Details** というオプションをチェックすることで、Studio のサブグラフの詳細 (プロフィール写真、名前、説明などの下) を更新できます。これがチェックされている場合、新しい展開で新しいバージョンを公開する必要なく、Explorer のサブグラフの詳細を更新するオンチェーン トランザクションが生成されます。

なお、サブグラフの新バージョンをネットワークに公開する際には、コストがかかります。トランザクション手数料に加えて、開発者は自動移行するシグナルにかかるキュレーション税の一部を賄う必要があります。キュレーターがシグナルを出していない場合、サブグラフの新バージョンを公開することはできません。キュレーションのリスクについて、詳しくは[こちら](/network/curating)をご覧ください。

### サブグラフのバージョンの自動アーカイブ

Subgraph Studio で新しいサブグラフのバージョンを展開すると、以前のバージョンがアーカイブされます。アーカイブされたバージョンはインデックス/同期されず、したがってクエリできません。Studio UI でサブグラフのアーカイブされたバージョンをアンアーカイブすることができます。スタジオにデプロイされた非公開のサブグラフの前のバージョンは、自動的にアーカイブされることに注意してください。

![Subgraph Studio - アーカイブ解除](/img/Unarchive.png)
