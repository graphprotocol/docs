---
title: Subgraph Studio にサブグラフをデプロイする
---

> サブグラフがデータをインデックスするネットワークが、分散型ネットワークで[サポートされている](/developing/supported-chains)ことを確認します。

こちらがSubgraph Studioにサブグラフをデプロイする手順です：

- Graph CLIをインストールする（yarnまたはnpmを使用）
- Subgraph Studio でサブグラフを作成する
- CLI から自分のアカウントを認証する
- Subgraph Studio にサブグラフをデプロイする

## Graph CLI のインストール

ホステッドサービス[hosted service](https://thegraph.com/hosted-service/)へのサブグラフのデプロイと、[Subgraph Studio](https://thegraph.com/studio/)へのサブグラフのデプロイに、同じ CLI を使用しています。以下は、graph-cli をインストールするためのコマンドです。これは、npm または yarn を使って行うことができます。

**yarn でインストールします:**

```bash
yarn global add @graphprotocol/graph-cli
```

**npm でインストールします:**

```bash
npm install -g @graphprotocol/graph-cli
```

## Subgraph Studio でサブグラフを作成する

実際のサブグラフをデプロイする前に、[Subgraph Studio](https://thegraph.com/studio/)でサブグラフを作成する必要があります。詳しくは、[Studio documentation](/deploying/subgraph-studio)をお読みになることをお勧めします。

## サブグラフの初期化

Subgraph Studio でサブグラフが作成されると、以下のコマンドでサブグラフのコードを初期化することができます:

```bash
graph init --studio <SUBGRAPH_SLUG>
```

`<SUBGRAPH_SLUG>`の値は、Subgraph Studio のサブグラフの詳細ページにあります:

![Subgraph Studio - Slug](/img/doc-subgraph-slug.png)

`graph init`を実行すると、クエリしたいコントラクトアドレス、ネットワーク、Abi の入力を求められます。これを行うと、サブグラフの作業を開始するためのいくつかの基本的なコードを含む新しいフォルダがローカルマシン上に生成されます。その後、サブグラフが期待通りに動作することを確認するために、サブグラフを最終的に完成させることができます。

## グラフ認証

Subgraph Studio にサブグラフをデプロイする前に、CLI で自分のアカウントにログインする必要があります。これを行うには、"My Subgraphs "ページまたはサブグラフの詳細ページにある deploy key が必要になります。

以下は、CLI から認証を行うために必要なコマンドです:

```bash
graph auth --studio <DEPLOY KEY>」
```

## Subgraph Studio へのサブグラフのデプロイ

準備ができたら、Subgraph Studio にサブグラフをデプロイすることができます。これを行うと、分散型ネットワークにサブグラフが公開されず、テストやメタデータの更新が可能な Studio アカウントにのみデプロイされます。

以下は、サブグラフのデプロイに必要な CLI コマンドです。

```bash
graph deploy --studio <SUBGRAPH_SLUG>
```

このコマンドを実行すると、CLI がバージョンラベルの入力を求めてきますので、`0.1`や`0.2`といったラベルを使ったり、`uniswap-v2-0.1`のようにアルファベットを使ったりと、好きなように名前を付けることができます。これらのラベルはグラフエクスプローラーに表示され、キュレーターがこのバージョンにシグナルを送りたいかどうかを判断するのに使われますので、賢く選択しましょう。

デプロイされた後は、Subgraph Studio でプレイグラウンドを使ってサブグラフをテストし、必要に応じて別のバージョンをデプロイし、メタデータを更新し、準備ができたら Graph Explorer にサブグラフを公開することができます。
