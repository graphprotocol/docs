---
title: ネットワーク移行に関するFAQ
---

開発者には、サブグラフを分散型ネットワークに移行するための十分な時間があります。正確なタイムラインは、インデクサーとネットワークの準備状況に基づいて、ネットワークごとに異なります。ホステッド サービスは、すべてのネットワークのサポートを一度に終了したり、突然終了したりすることはありません。

イーサリアムを含むホストされたサービスの各ネットワークは、機能の同等性と高品質のサービスを実現するために分散型ネットワークでサポートされるため、徐々に廃止されます。これは [MIPs プログラム](https://thegraph.com/blog/mips-multi-chain-indexing-incentivized-program/)、分散ネットワーク上の各ネットワークの完全なサポートを有効にします。

To add more clarity around continued support for each network on the hosted service, these FAQs answer common questions regarding the specifics of the network transition process. If you would like to start the subgraph migration process now, here is a [step-by-step guide](https://thegraph.com/blog/how-to-migrate-ethereum-subgraph). To skip to the migration FAQ, [click here](#migration-faqs).

## ホストされたサービスのサンセットに関するFAQ

### 分散型ネットワークがサブグラフの中核機能を提供する前に、自分のサブグラフを移行しなければならないのでしょうか？

サブグラフの開発者は、今すぐ Ethereum メインネット サブグラフの移行を開始できますが、分散型ネットワークとホステッド サービスの機能コア機能が存在する前に、サブグラフをネットワークに移行することを強制されることはありません。 Gnosis ネットワーク サブグラフの移行もすぐに開始され、インデクサーがネットワークをテストし、運用環境でインデックスを作成する準備が整ったら、他のネットワークが続きます。

### ホスティングサービスを廃止するスケジュールとプロセスを教えてください。

すべてのネットワークには、ネットワークでいつ有効になるか、および各フェーズを通過するのにかかるタイムラインに応じて、独自のタイムラインがあります。コア開発者は、ホストされたサービス トラフィックの大部分をできるだけ早く分散型ネットワークに移行するために取り組んでいます。

最も重要なことは、コア機能が分散ネットワーク上の特定のネットワーク/サブグラフで利用可能になる前に、ホストされたサービスへのアクセスを失わないことです。

各ネットワークのホステッド サービスの廃止には、次の 3 つの段階があります:

#### フェーズ1（The Sunray）ネットワーク上で品質パリティを持つブロックチェーンの新規サブグラフ作成を無効にする

この段階では、開発者はそのネットワークのホステッド サービスに新しいサブグラフをデプロイできなくなります。開発者は、ホストされたサービスの既存のサブグラフを引き続きアップグレードできます。

ホスト型サービスから分散型ネットワークへの移行のフェーズ 1 を開始したネットワークはまだありません。

ネットワークがフェーズ 1 に入っても、開発者は GRT を取得したり、プロトコル エコノミクスを操作したりすることなく、Subgraph Studio のレート制限された Developer Preview URL を引き続き使用して、サブグラフ (最大 1,000 件の無料クエリ) を開発およびテストできることに注意してください。

#### フェーズ2(The Sunbeam) サブグラフのアップグレードを無効にする

このフェーズでは、Subgraph Studio を使用してサブグラフをアップグレードし、その後分散ネットワークに公開する必要があります。このフェーズのネットワークのホストされたサービス サブグラフは引き続き存在し、クエリ可能ですが、サブグラフへのアップグレードは The Graph の分散型ネットワークで行う必要があります。

プロセスは日付ではなく、コア機能に関する終了基準によって決定されるため、ネットワークがこのフェーズに移行する正確なタイムラインはありません。

#### フェーズ3 (The Sunrise) サブグラフのクエリを無効にする

この段階では、The Graph Network がサポートするネットワークのホステッド サービスのサブグラフは、クエリを処理しなくなります。このフェーズでネットワーク上のサブグラフのブロックチェーン データをクエリする唯一の方法は、分散型ネットワークを使用することです。テスト クエリは、開発クエリ URL を介して [Subgraph Studio](https://thegraph.com/studio/) で引き続き利用できます。

フェーズ 2 への移行が成功し、開発者が分散型ネットワークに移行するための十分な時間を与えるまで、ネットワークはフェーズ 3 に移行しません。

![サブグラフチャート](/img/subgraph-chart.png)

> 注: この図は、ネットワークごとの廃止プロセスを反映しています。ホステッド サービスの廃止時間はさまざまであり、一度にすべてが廃止されるわけではありません。

### Goerli、Mumbai などのテスト ネットワークはどうなりますか?

すべてのネットワークとテスト ネットワークは、[Subgraph Studio](https://thegraph.com/studio/) で無料の展開クエリ URL を利用できます。この URL はレート制限されており、テストおよび開発トラフィック用です。プロダクション トラフィックには、プロダクション グレードの冗長性と安定性を確保するために、The Graph Network に発行されたサブグラフが必要です。

![レートリミット](/img/rate-limit.png)

### The Graph Networkは、ホスティングサービスと同じ機能を備えていますか？

グラフネットワーク上のインデクサーは、ネットワークが承認した[グラフノードの最新リリース](https://github.com/graphprotocol/graph-node/releases)を実行し、そのリリースでサポートされているすべてのサブグラフ機能をサポートすることができます。

まだ開発中の未発表の機能は、[Graph Node](https://github.com/graphprotocol/graph-node) の最新のメインコミットが実行される開発者プレビュー URL で最初に利用可能になることがあります。これらの機能は、次の Graph Node のリリースでネットワーク上で利用可能になります。

特定のサブグラフ機能は、ネットワーク上で決定論的でない、または検証可能でない場合、インデックス作成報酬の対象とはなりません。具体的な例としては、IPFSからのファイルのフェッチや、グラフネットワークでまだサポートされていないネットワークのインデキシングなどがあります。

このような特徴を持つサブグラフはネットワークに公開することができますが、インデクサーに拾われない可能性があります。しかし、十分なシグナルを持つサブグラフは、どのサブグラフでも対象となるクエリフィーの徴収に興味を持つインデクサーを引きつけるかもしれません。

### グラフネットワークは、自社でインフラを運用する場合と比較して、どの程度のコストがかかるのでしょうか？

グラフの分散型ネットワークは、[これらのケーススタディ](https://thegraph.com/docs/en/network/benefits/#low-volume-user-less-than-30-000-queries-per-month)に示されているように、専用インフラを運用するよりも60～90%低コストで済みます。

### ネットワークに移行した後、ホスティングサービスのサブグラフに何かすることはありますか？

混乱を避けるために、ホスティングサービスのサブグラフを隠すことを強くお勧めします。[このビデオ](https://www.loom.com/share/7cffd2a7845e4fbd8c51f45c516cb7f9)は、その手順を説明しています。

### 分散型ネットワークが優先ネットワークをサポートするのはいつですか?

チェーンごとに決まったスケジュールはなく、新しいチェーンがインデクサによってテストされる[MIPsプログラム](https://thegraph.com/migration-incentive-program/)を通じて、インデクサーの準備状況によって決定されるでしょう。新しいチェーンがネットワーク上でサポートされると、ユーザーは移行準備のために十分な通知を受け取ることになります。The Graphエコシステムのコア開発者と貢献者は、できるだけ早く、より多くのチェーンのサポートを実装するために取り組んでいます。

### イーサリアムのメインネットは、ネットワーク移行プロセスのフェーズ1に突入していますか？

イーサリアムは当初、2022年第3四半期末までにホスティングサービスからの移行を開始すると予想されていましたが、ユーザーのフィードバックに対応するため、[延期](https://thegraph.com/blog/transitioning-to-decentralized-graph-network)されました。ユーザーエクスペリエンス、課金、その他ユーザーの要望を満たすための追加的な改善が、イーサリアムのホストサービス移行のタイムラインを推進することになります。イーサリアムがいつThe Sunrayフェーズに移行するかは、以下の統合状況トラッカーや[The Graph Twitter.](http://www.twitter.com/graphprotocol)でご確認ください。

### グラフネットワーク統合状況トラッカー

次の表は、各ネットワークがネットワーク統合プロセスのどこにあるかを示しています。希望するネットワークがまだリストされていない場合、統合はまだ開始されておらず、そのネットワークはまだ The Graph のホストされたサービスによって完全にサポートされています。

> この表には、[Subgraph Studio](https://thegraph.com/studio/) で引き続き無料で提供されるテスト ネットワークは含まれません。

| ネットワーク          | グラフネットワークへの統合を発表 | ネットワーク統合完了 | フェーズ1：ホスティングサービス上で新規サブグラフの無効化 | フェーズ2：ホスティングサービスでのサブグラフのアップグレードの無効化 | フェーズ3：ホスティングサービスでのサブグラフの無効化 |
| --------------- |:----------------:|:----------:|:-----------------------------:|:-----------------------------------:|:---------------------------:|
| Ethereum        |        ✓         |     ✓      |                               |                                     |                             |
| Gnosis (元 xDAI) |        ✓         |   ✓\*    |                               |                                     |                             |
| Polygon         |        ✓         |            |                               |                                     |                             |
| Celo            |        ✓         |   ✓\*    |                               |                                     |                             |
| Arbitrum One    |        ✓         |   ✓\*    |                               |                                     |                             |
| Avalanche       |        ✓         |   ✓\*    |                               |                                     |                             |
| Optimism        |        ✓         |            |                               |                                     |                             |
| Fantom          |        ✓         |            |                               |                                     |                             |

\* ネットワークは現在、The Graph の分散型ネットワークでベータ版です。

## クエリフィー、APIキー、課金に関するFAQ

### クエリ料金はどのように設定されていますか?

クエリフィーの価格は、分散型ネットワーク上のクエリ需要に影響されます。Core開発者は、[Agora](https://github.com/graphprotocol/agora)と呼ばれるクエリ価格コストモデル言語を作成しました。これは、Indexers が効率的にクエリの価格を設定することを可能にします。詳しくは、[Agora documentation](https://github.com/graphprotocol/agora/blob/master/docs/README.md)をご覧ください。

### クエリ予算の上限を設定する方法は？

Subgraph Studioの[API Key](https://thegraph.com/studio/apikeys/)セクションのBudgetタブで、最大クエリ予算を設定することができます。[このビデオ](https://www.loom.com/share/b5fc533e48584cb694017392c80c75e0)で、API Keyの他の部分の調整と同様に、このプロセスの概要を見ることができます。

最大クエリ予算を低く設定しすぎると、インデクサーが除外され、クエリ失敗やクエリ速度低下など、質の低いサービスになる可能性があることに注意してください。

2022 年 9 月末の時点では、最小の最大クエリ バジェットとして $0.00035 ～ $0.0004 の範囲内にとどまることがベスト プラクティスです。

### API Keyを保護するにはどうすればよいですか？

ユーザーは、[Subgraph Studio](https://thegraph.com/studio/)でサブグラフとドメインの両方でAPIキーを制限することが推奨されます：

![ドメインを制限する](/img/restrictdomain.png)

### クエリフィーの支払いに必要なAPIキーの入力方法を教えてください。

Subgraph Studio [Billing Dashboard](https://thegraph.com/studio/billing/) の「Add GRT」ボタンを押すと、課金残高を記入することができます。よりシームレスで定期的な支払いを追加するために、このエクスペリエンスを改善するための作業が継続的に行われています。

[この動画](https://www.loom.com/share/a81de6ef11d64c62872ea210c58c6af5)には、その概要が紹介されています。

### APIキーに課金残高が少ない場合のアラートを設定するにはどうすればよいですか？

ユーザーは、自分のメールアドレス[ここに](https://thegraph.com/studio/settings/)に課金アラートを設定する必要があります。

また、課金残高が少なくなると、ユーザーのUI内でバナーが点滅し、警告を表示します。

APIキーの設定を管理するためのベストプラクティスは何ですか？

高いサービス品質を維持しつつ、低い平均クエリー価格を維持するために、最大クエリーバジェットを$0.0004にすることをお勧めします。これは、[API Keyセクション](https://thegraph.com/studio/apikeys/)のbudget billingタブで行うことができます。

## 移行に関するよくある質問

### The Graphの分散型ネットワークに自分のサブグラフを移行するにはどうすればよいですか？

[ステップバイステップガイド](https://thegraph.com/blog/how-to-migrate-ethereum-subgraph)または[このビデオ](https://www.youtube.com/watch?v=syXwYEk-VnU&t=1s)で、サブグラフをThe Graph Networkに移行する方法について説明します。

### グラフネットワークに早期に移行したサブグラフへの移行補助金はありますか？

はい。助成金の申請は、[こちら](mailto:migration@thegraph.foundation)までお願いします。

### The Graphのエコシステムからの移行プロセスにおいて、金銭的、技術的、マーケティング的なサポートはあるのでしょうか？

プロジェクトには、サブグラフのキュレーション（Indexers を惹きつけるため）や初期クエリフィーの支払い（[こちら](https://thegraph.typeform.com/to/Zz8UAPri?typeform-source=thegraph.com)で申請）に使用するための移行助成金があり、[direct channel](http://thegraph.com/discord) では、すべての段階においてエンジニアがサポートし、移行後は優先的にプロジェクトを紹介するマーケティング キャンペーンも行われています（Twitter スレッドの中で紹介されています）。[1](https://twitter.com/graphprotocol/status/1496891582401814537), [2](https://twitter.com/graphprotocol/status/1491926128302379008), & [3](https://twitter.com/graphprotocol/status/1491126245396201473)

### クエリの所要時間は？

分散型ネットワークでは、クエリに平均150〜300ミリ秒かかります。

### グラフネットワークの課金プロセスは、ホスティングサービスよりも複雑ですか？

はい。ネットワークのUXは、まだホスティングサービスと同等の品質ではありません。特に課金UXはまだ非常に初期段階にあり、多くの可動部分があるため、コア開発チームがプロセスの抽象化に取り組んでいます。これらの改善の多くは、近い将来公開される予定です。

### グラフネットワーククエリの支払いは、フィアット、クレジットカード、またはステーブルコインで行えますか？

今後数ヶ月の間に、ユーザーがサブグラフの支払いを行うために必要なステップの数は大幅に削減されます。支払いは引き続きGRTで行われますが、フィアットのオンランプと、フィアットと暗号をGRTに変換して定期的な支払いを行う自動支払いシステムの実装に向けた取り組みが、すでに行われています。

### ネットワークがホスティングサービスと同じUXになることはあるのでしょうか？

まだやるべきことはありますが、グラフネットワークでは、現在のホスティングサービスと同等かそれ以上の質の高いUXを提供することを目標としています。短期的には、より合理的で予測可能な課金体験を提供し、ユーザーが高品質のdappsを構築することに集中できるようにすることを目指しています。

### 自分のサブグラフがグラフネットワークのインデクサーに拾われるようにするにはどうしたらいいですか？

最低でも10,000GRTのキュレーションを行うことが推奨されており、ユーザーは公開時と同じトランザクションでキュレーションを行うことができます。また、キュレーションコミュニティに自分のサブグラフのキュレーションを依頼することも可能です[こちら](https://t.me/CurationStation)。

これらの初期費用をカバーするために、初期移住者向けの移住補助金があります。お気軽に[こちら](mailto:migration@thegraph.foundation)から申請してください。

### なぜ、サブグラフにはキュレーションのシグナルが必要なのか？サブグラフにキュレーターからの十分なシグナルがない場合はどうすればよいのか？

高シグナルと高インデックス報酬には線形相関があるため、キュレーションシグナルが高いほど、インデックス作成者にとってサブグラフは魅力的となります。キュレーションがなければ、インデクサーがサブグラフをピックアップするインセンティブはありません。

### サブグラフ開発者がキュレーションシグナルに使用するGRTはどうなるのでしょうか？

サブグラフを最初にシグナルした場合、シグナルしたGRTの量は減らない。キュレーションのために使われたGRTは、後で削除することができます。また、キュレーターは、インデクサーの取り込んだクエリフィーの10%を得ることができます。

### キュレーションプロセスにはどのような改良が加えられるのでしょうか？

短期的には、Arbitrumの最初のキュレーションモデルは、キュレーションシグナルに原則的な保護を提供します。長期的には、コア開発者は開発者にキュレーションシグナルのレンタル機能を提供することを優先し、サブグラフが十分にインデックス化されることを保証しつつ、より予測可能な価格体験を提供する予定です。

### フロントエンドでsubgraph APIを切り替えるには？

少なくとも1つのインデクサーがサブグラフのインデックスを完全に作成した後、ユーザは分散型ネットワークにクエリすることができます。

サブグラフのクエリURLを取得するために、クエリURLの横にあるマークをクリックすると、コピー＆ペーストすることができます。このように表示されます。

`https://gateway.thegraph.com/api/[api-key]/subgraphs/id/S9ihna8D733WTEShJ1KctSTCvY1VJ7gdVwhUujq4Ejo`

[api-key]をSubgraph Studioの[API Keyセクション](https://thegraph.com/studio/apikeys/)で生成したAPI Keyに置き換えるだけで、簡単に利用できます.

### クエリのコストはどのくらいですか？

ネットワーク内の平均クエリフィーは変動します。2022年9月の1ヶ月間、クエリフィーコストの平均価格は$0.00012～$0.00020の範囲にあります。

### 自分のサブグラフの容量と金額を調べるにはどうしたらいいですか？

ホスティングサービスのボリュームデータは公開されていません。ボリュームとコストの見積もりは[こちら](mailto:migration@thegraph.foundation)までご連絡ください。

### ゲートウェイはどのように機能するのですか？完全に分散化されているのですか？

ゲートウェイは、IndexerがDappsにサービスを提供できるようにクエリーを処理します。ゲートウェイは中間段階にあり、徐々に非中央集権化が進んでいます。詳しくは近日中に公開予定です。

## 「ネットワークFAQ」

### サブグラフのアップグレードに費用はかかりますか？

はい。キュレーションシグナルは1％です。この1%はキュレーター（0.5%）とサブグラフ開発者（0.5%）に均等に分配されます。つまり、10K GRTのシグナルが出るごとに、サブグラフ開発者は50GRTのアップグレード費用が発生します。

### シンクロ時間を短縮するには？

サブグラフ内のスマートコントラクトの呼び出しを最小限にします。スマートコントラクトの状態にアクセスするには、RPCのeth_callが必要で、同期時間が遅くなります。

### Subgraph Studioの移行に伴い、マルチシグのサポートはありますか？

はい。最近マルチシグのサポートが追加されました。詳細は[こちら](https://thegraph.com/docs/studio/multisig)をご覧ください。

### イーサリアムとArbitrumのGRTのコントラクトアドレスを教えてください。

- Ethereum: `0xc944E90C64B2c07662A292be6244BDf05Cda44a7`
- Arbitrum: `0x9623063377AD1B27544C965cCd7342f7EA7e88C7`

### 通常、プロジェクトはAPI KeyにどれくらいのGRTを保持しているのでしょうか？

多くのプロジェクトは、APIキーに30～60日分のGRTを保持しているため、頻繁に補充する必要はありません。30～60日分のGRT料金を理解するには、[こちら](mailto:migration@thegraph.foundation)までご連絡ください。

### 分散型ネットワークでのクエリ決済はどのように行われるのですか？ 

料金は毎週請求され、ユーザーのAPI Keyから引き出されます。GRTはArbitrumに接続され、Arbitrum上に配置されます。

### 分散型ネットワークにおけるサブグラフのAPIキーはどのように使われるのですか？

APIキーは、ユーザーが支払う最大クエリフィーと、価格、経済的な鮮度、クエリ速度などの要素の優先順位の両方を可能にします。

### ホスティングサービスと分散型ネットワークのサービス品質の比較は、現状どうなっているのでしょうか？

ホスティングサービスと分散型ネットワークの遅延の中央値はほぼ同じですが、分散型ネットワークは高いパーセンタイルで遅延が大きくなる傾向があります。クエリの 200 レートも概ね同様で、どちらも > 99.9% です。分散化の結果、ネットワークはサブグラフ間で広範な停止が発生しませんでしたが、ホスティングサービスは集中化の結果、まれに一時的な停止が発生します。

### FAQに答えがない場合はどうすればいいですか？

ご不明な点がございましたら、[migration@thegraph.foundation](mailto:migration@thegraph.foundation) までご連絡ください。
