---
title: 開発者 FAQ
---

### 1. サブグラフとは？

サブグラフは、ブロックチェーンデータを基に構築されたカスタム API です。サブグラフは GraphQL クエリ言語を使ってクエリされ、Graph CLI を使って Graph Node にデプロイされます。デプロイされ、The Graph の分散型ネットワークに公開されると、インデクサーはサブグラフを処理し、サブグラフの消費者がクエリできるようにします。

### 2. 作成したサブグラフを削除できますか？

一度作成したサブグラフの削除はできません。

### 3. サブグラフの名前は変更できますか？

一度作成したサブグラフの名前を変更することはできません。サブグラフを作成する際には、他の dapps から検索しやすく、識別しやすい名前になるよう、よく考えてから作成してください。

### 4. サブグラフに関連する GitHub アカウントは変更できますか？

一度作成したサブグラフに関連する GitHub のアカウントは変更できません。サブグラフを作成する前に、この点をよく考えてください。

### 5. スマートコントラクトにイベントがない場合でも、サブグラフを作成できますか？

スマートコントラクトを構成して、クエリしたいデータに関連するイベントを持つことを強くお勧めします。サブグラフ内のイベントハンドラは、コントラクトのイベントによってトリガされ、有用なデータを取得するための圧倒的に速い方法です。

使用しているコントラクトにイベントが含まれていない場合、サブグラフはコールハンドラとブロックハンドラを使用してインデックス作成をトリガすることができます。しかし、パフォーマンスが大幅に低下するため、これは推奨されません。

### 6. 同じ名前のサブグラフを複数のネットワークに配置することは可能ですか？

複数のネットワークには別々の名前が必要です。同じ名前で異なるサブグラフを持つことはできませんが、単一のコードベースで複数のネットワークに対応する便利な方法があります。詳しくはドキュメントをご覧ください: [Redeploying a Subgraph](/deploying/deploying-a-subgraph-to-hosted#redeploying-a-subgraph)

### 7. テンプレートとデータソースはどう違うのですか？

テンプレートは、サブグラフがインデックスを作成している間に、その場でデータソースを作成することができます。また、コントラクトの形状（ABI、イベントなど）を前もって知っているので、テンプレートでどのようにインデックスを作成するかを定義することができ、コントラクトが作成されると、サブグラフはコントラクトのアドレスを供給することで動的なデータソースを作成します。

データソース・テンプレートのインスタンス化」のセクションをご覧ください: [Data Source Templates](/developing/creating-a-subgraph#data-source-templates)

### 8. 最新版の graph-node を使用していることを確認する方法はありますか？

以下のコマンドを実行してください:

```sh
docker pull graphprotocol/graph-node:latest
```

**注:** docker / docker-compose は、最初に実行したときにプルされた graph-node のバージョンを常に使用しますので、最新版の graph-node を使用していることを確認するために、このコマンドを実行することが重要です。

### 9. サブグラフ・マッピングからコントラクト関数を呼び出したり、パブリック・ステート変数にアクセスするにはどうすればいいですか？

[AssemblyScript API](/developing/assemblyscript-api) セクション内の `スマート コントラクトへのアクセス` 状態を見てください。

### 10. 2 つのコントラクトで`graph-cli`の`graph init` を使ってサブグラフをセットアップすることは可能ですか？それとも、`graph init`を実行した後、`subgraph.yaml`に別のデータソースを手動で追加する必要がありますか？

`graph init`は基本的な出発点として意図されており、そこから手動でデータソースを追加することができます。

### 11. GitHub の課題に貢献したいのですが、オープンソースのリポジトリはどこにありますか？

- [graph-node](https://github.com/graphprotocol/graph-node)
- [graph-cli](https://github.com/graphprotocol/graph-cli)
- [graph-ts](https://github.com/graphprotocol/graph-ts)

### 12. イベントを処理する際に、エンティティの "自動生成された "Id を構築する推奨される方法は何ですか？

もし、イベント中に 1 つのエンティティしか作成されず、他に利用できるものがなければ、トランザクションハッシュ＋ログインデックスがユニークになります。Bytes に変換して`crypto.keccak256`に通すことで難読化することができますが、これでは一意性は高まりません。

### 13. 複数のコントラクトをリスニングする際、イベントをリスニングするコントラクトの順番を選択することは可能ですか？

サブグラフ内では、複数のコントラクトにまたがっているかどうかにかかわらず、イベントは常にブロックに表示される順序で処理されます。

### 14. イベントハンドラ内からネットワーク（mainnet, Goerli, local）を区別することは可能ですか？

はい、以下の例のように`graph-ts`をインポートすることで可能です。

```javascript
import { dataSource } from '@graphprotocol/graph-ts'

dataSource.network()
dataSource.address()
```

### 15. Goerli では、ブロックハンドラやコールハンドラをサポートしていますか？

はい。 Goerli は、ブロック ハンドラー、コール ハンドラー、およびイベント ハンドラーをサポートしています。イベント ハンドラーは、他の 2 つのハンドラーよりもはるかにパフォーマンスが高く、すべての EVM 互換ネットワークでサポートされていることに注意してください。

### 16. サブグラフのマッピングに ethers.js や他の JS ライブラリをインポートできますか？

マッピングは AssemblyScript で書かれているため、現在はできません。代替案としては、生データをエンティティに格納し、JS ライブラリを必要とするロジックをクライアントで実行することが考えられます。

### 17. インデックス作成を開始するブロックを指定することはできますか？

はい。`subgraph.yaml`ファイルの`dataSources.source.startBlock`は、データソースがインデックス作成を開始するブロックの番号を指定します。ほとんどの場合、コントラクトが作成されたブロックを使用することをお勧めします。開始ブロック

### 18. インデックス作成のパフォーマンスを向上させるためのヒントはありますか？

はい、コントラクトがデプロイされたブロックからインデックス作成を開始するオプションのスタートブロック機能をご利用ください: [Start blocks](/developing/creating-a-subgraph#start-blocks)

### 19. サブグラフに直接クエリして、インデックスを作成した最新のブロック番号を確認する方法はありますか？

はい、あります。organization/subgraphName」を公開先の組織とサブグラフの名前に置き換えて、以下のコマンドを実行してみてください:

```sh
curl -X POST -d '{ "query": "{indexingStatusForCurrentVersion(subgraphName: \"organization/subgraphName\") { chains { latestBlock { hash number }}}}"}' https://api.thegraph.com/index-node/graphql
```

### 20. The Graph がサポートするネットワークは？

対応ネットワークの一覧は[こちら](/developing/supported-networks)で確認できます。

### 21. 再デプロイせずに、サブグラフを別のアカウントやエンドポイントに複製することは可能ですか？

サブグラフを再デプロイする必要がありますが、サブグラフの ID（IPFS ハッシュ）が変わらなければ、最初から同期する必要はありません。

### 22. graph-node の上に Apollo Federation を使用することは可能ですか？

将来的にはサポートしたいと考えていますが、フェデレーションはまだサポートされていません。現時点でできることは、クライアント上またはプロキシサービス経由でスキーマステッチを使用することです。

### 23. The Graph が 1 回のクエリで返すオブジェクトの数に制限はありますか？

デフォルトでは、クエリの応答は 1 つのコレクションにつき 100 アイテムに制限されています。それ以上の数を受け取りたい場合は、1 コレクションあたり 1000 アイテムまで、それ以上は以下のようにページネーションすることができます:

```graphql
someCollection(first: 1000, skip: <number>) { ... }
```

### 24. dapp のフロントエンドが The Graph を使ってクエリを行う場合、クエリキーをフロントエンドに直接書き込む必要がありますか？また、ユーザーにクエリ料を支払う場合、悪意のあるユーザーがいるとクエリ料が非常に高くなってしまうのではないでしょうか？

現在、dapp の推奨されるアプローチは、キーをフロントエンドに追加し、それをエンド ユーザーに公開することです。とはいえ、そのキーを _yourdapp.io_ や subgraph.ゲートウェイは現在 Edge & によって実行されています。ノード。ゲートウェイの責任の一部は、不正行為を監視し、悪意のあるクライアントからのトラフィックをブロックすることです。

### 25. ホスティングサービスの現在のサブグラフはどこで確認できますか？

あなたや他の人がホステッドサービスにデプロイしたサブグラフを見つけるために、ホステッドサービスに向かってください。[こちら](https://thegraph.com/hosted-service)で見つけることができます。

### 26. ホスティングサービスでは、クエリフィーが発生しますか？

The Graph は、ホステッドサービスに対して課金することはありません。The Graph は非中央集権的なプロトコルであり、中央集権的なサービスに課金することは The Graph の価値観に合致しません。ホステッドサービスは常に、分散型ネットワークに移行するための一時的なステップでした。開発者には十分な時間があるので、安心して分散型ネットワークに移行することができます。

### 27. ホスティングサービスはいつ終了しますか？

ホスティングサービスは 2023 年第 1 四半期に停止する予定です。発表のブログ記事[こちら](https://thegraph.com/blog/sunsetting-hosted-service)をお読みください。Hosted Service を利用しているすべての Dapps は、分散型ネットワークに移行することが推奨されます。Migration Grants は、開発者のサブグラフの移行を支援するために用意されています。サブグラフを移行するアプリは[こちら](https://thegraph.typeform.com/to/Zz8UAPri?typeform-source=thegraph.com)から申請することができます。

### 28. メインネット上のサブグラフをアップグレードするには？

サブグラフの開発者であれば、CLI を使ってサブグラフの新バージョンをスタジオにアップグレードすることができます。その時点では非公開ですが、満足できるものであれば、分散化された Graph Explorer に公開することができます。これにより、キュレーターがシグナリングを開始できるサブグラフの新バージョンが作成されます。
