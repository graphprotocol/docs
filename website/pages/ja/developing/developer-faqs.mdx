---
title: 開発者 FAQ
---

## 1. What is a subgraph?

サブグラフは、ブロックチェーンデータを基に構築されたカスタムAPIです。サブグラフはGraphQLクエリ言語を使ってクエリされ、Graph CLIを使ってGraph Nodeにデプロイされます。デプロイされ、The Graphの分散型ネットワークに公開されると、インデクサーはサブグラフを処理し、サブグラフの消費者がクエリできるようにします。

## 2. Can I delete my subgraph?

一度作成したサブグラフの削除はできません。

## 3. Can I change my subgraph name?

一度作成したサブグラフの名前を変更することはできません。サブグラフを作成する際には、他の dapps から検索しやすく、識別しやすい名前になるよう、よく考えてから作成してください。

## 4. Can I change the GitHub account associated with my subgraph?

一度作成したサブグラフに関連する GitHub のアカウントは変更できません。サブグラフを作成する前に、この点をよく考えてください。

## 5. Am I still able to create a subgraph if my smart contracts don't have events?

スマートコントラクトを構成して、クエリしたいデータに関連するイベントを持つことを強くお勧めします。サブグラフ内のイベントハンドラは、コントラクトのイベントによってトリガされ、有用なデータを取得するための圧倒的に速い方法です。

使用しているコントラクトにイベントが含まれていない場合、サブグラフはコールハンドラとブロックハンドラを使用してインデックス作成をトリガすることができます。しかし、パフォーマンスが大幅に低下するため、これは推奨されません。

## 6. Is it possible to deploy one subgraph with the same name for multiple networks?

複数のネットワークには別々の名前が必要です。同じ名前で異なるサブグラフを持つことはできませんが、単一のコードベースで複数のネットワークに対応する便利な方法があります。詳しくはドキュメントをご覧ください: [Redeploying a Subgraph](/deploying/deploying-a-subgraph-to-hosted#redeploying-a-subgraph)

## 7. How are templates different from data sources?

テンプレートは、サブグラフがインデックスを作成している間に、その場でデータソースを作成することができます。また、コントラクトの形状（ABI、イベントなど）を前もって知っているので、テンプレートでどのようにインデックスを作成するかを定義することができ、コントラクトが作成されると、サブグラフはコントラクトのアドレスを供給することで動的なデータソースを作成します。

データソース・テンプレートのインスタンス化」のセクションをご覧ください: [Data Source Templates](/developing/creating-a-subgraph#data-source-templates)

## 8. How do I make sure I'm using the latest version of graph-node for my local deployments?

以下のコマンドを実行してください:

```sh
docker pull graphprotocol/graph-node:latest
```

**注:** docker / docker-compose は、最初に実行したときにプルされた graph-node のバージョンを常に使用しますので、最新版の graph-node を使用していることを確認するために、このコマンドを実行することが重要です。

## 9. How do I call a contract function or access a public state variable from my subgraph mappings?

[AssemblyScript API](/developing/assemblyscript-api) セクション内の `スマート コントラクトへのアクセス` 状態を見てください。

## 10. Is it possible to set up a subgraph using `graph init` from `graph-cli` with two contracts? Or should I manually add another datasource in `subgraph.yaml` after running `graph init`?

`graph init`は基本的な出発点として意図されており、そこから手動でデータソースを追加することができます。

## 11. I want to contribute or add a GitHub issue. Where can I find the open source repositories?

- [graph-node](https://github.com/graphprotocol/graph-node)
- [graph-cli](https://github.com/graphprotocol/graph-cli)
- [graph-ts](https://github.com/graphprotocol/graph-ts)

## 12. What is the recommended way to build "autogenerated" ids for an entity when handling events?

もし、イベント中に 1 つのエンティティしか作成されず、他に利用できるものがなければ、トランザクションハッシュ＋ログインデックスがユニークになります。Bytes に変換して`crypto.keccak256`に通すことで難読化することができますが、これでは一意性は高まりません。

## 13. When listening to multiple contracts, is it possible to select the contract order to listen to events?

サブグラフ内では、複数のコントラクトにまたがっているかどうかにかかわらず、イベントは常にブロックに表示される順序で処理されます。

## 14. Is it possible to differentiate between networks (mainnet, Goerli, local) from within event handlers?

はい、以下の例のように`graph-ts`をインポートすることで可能です。

```javascript
import { dataSource } from '@graphprotocol/graph-ts'

dataSource.network()
dataSource.address()
```

## 15. Do you support block and call handlers on Goerli?

はい。 Goerli は、ブロック ハンドラー、コール ハンドラー、およびイベント ハンドラーをサポートしています。イベント ハンドラーは、他の 2 つのハンドラーよりもはるかにパフォーマンスが高く、すべての EVM 互換ネットワークでサポートされていることに注意してください。

## 16. Can I import ethers.js or other JS libraries into my subgraph mappings?

マッピングは AssemblyScript で書かれているため、現在はできません。代替案としては、生データをエンティティに格納し、JS ライブラリを必要とするロジックをクライアントで実行することが考えられます。

## 17. Is it possible to specify what block to start indexing on?

はい。`subgraph.yaml`ファイルの`dataSources.source.startBlock`は、データソースがインデックス作成を開始するブロックの番号を指定します。ほとんどの場合、コントラクトが作成されたブロックを使用することをお勧めします。開始ブロック

## 18. Are there some tips to increase the performance of indexing? My subgraph is taking a very long time to sync

はい、コントラクトがデプロイされたブロックからインデックス作成を開始するオプションのスタートブロック機能をご利用ください: [Start blocks](/developing/creating-a-subgraph#start-blocks)

## 19. Is there a way to query the subgraph directly to determine the latest block number it has indexed?

はい、あります。organization/subgraphName」を公開先の組織とサブグラフの名前に置き換えて、以下のコマンドを実行してみてください:

```sh
curl -X POST -d '{ "query": "{indexingStatusForCurrentVersion(subgraphName: \"organization/subgraphName\") { chains { latestBlock { hash number }}}}"}' https://api.thegraph.com/index-node/graphql
```

## 20. What networks are supported by The Graph?

対応ネットワークの一覧は[こちら](/developing/supported-networks)で確認できます。

## 21. Is it possible to duplicate a subgraph to another account or endpoint without redeploying?

サブグラフを再デプロイする必要がありますが、サブグラフの ID（IPFS ハッシュ）が変わらなければ、最初から同期する必要はありません。

## 22. Is this possible to use Apollo Federation on top of graph-node?

将来的にはサポートしたいと考えていますが、フェデレーションはまだサポートされていません。現時点でできることは、クライアント上またはプロキシサービス経由でスキーマステッチを使用することです。

## 23. Is there a limit to how many objects The Graph can return per query?

デフォルトでは、クエリの応答は 1 つのコレクションにつき 100 アイテムに制限されています。それ以上の数を受け取りたい場合は、1 コレクションあたり 1000 アイテムまで、それ以上は以下のようにページネーションすることができます:

```graphql
someCollection(first: 1000, skip: <number>) { ... }
```

## 24. If my dapp frontend uses The Graph for querying, do I need to write my query key into the frontend directly? What if we pay query fees for users – will malicious users cause our query fees to be very high?

現在、dapp の推奨されるアプローチは、キーをフロントエンドに追加し、それをエンド ユーザーに公開することです。とはいえ、そのキーを _yourdapp.io_ や subgraph.ゲートウェイは現在 Edge & によって実行されています。ノード。ゲートウェイの責任の一部は、不正行為を監視し、悪意のあるクライアントからのトラフィックをブロックすることです。

## 25. Where do I go to find my current subgraph on the Hosted Service?

あなたや他の人がホステッドサービスにデプロイしたサブグラフを見つけるために、ホステッドサービスに向かってください。[こちら](https://thegraph.com/hosted-service)で見つけることができます。

## 26. Will the Hosted Service start charging query fees?

The Graph は、ホステッドサービスに対して課金することはありません。The Graph は非中央集権的なプロトコルであり、中央集権的なサービスに課金することは The Graph の価値観に合致しません。ホステッドサービスは常に、分散型ネットワークに移行するための一時的なステップでした。開発者には十分な時間があるので、安心して分散型ネットワークに移行することができます。

## 27. When will the Hosted Service be shut down?

ホスティングサービスは2023年第1四半期に停止する予定です。発表のブログ記事[こちら](https://thegraph.com/blog/sunsetting-hosted-service)をお読みください。Hosted Serviceを利用しているすべてのDappsは、分散型ネットワークに移行することが推奨されます。Migration Grants は、開発者のサブグラフの移行を支援するために用意されています。サブグラフを移行するアプリは[こちら](https://thegraph.typeform.com/to/Zz8UAPri?typeform-source=thegraph.com)から申請することができます。

## 28. How do I upgrade a subgraph on mainnet?

サブグラフの開発者であれば、CLI を使ってサブグラフの新バージョンをスタジオにアップグレードすることができます。その時点では非公開ですが、満足できるものであれば、分散化された Graph Explorer に公開することができます。これにより、キュレーターがシグナリングを開始できるサブグラフの新バージョンが作成されます。
