---
title: بداية سريعة
---

هذا الدليل سيأخذك سريعا خلال كيفية تهيئة وإنشاء ونشر الغراف الفرعي الخاص بك في سبغراف استيديو أو [الخدمة المستضافة].

تأكد من أن الغراف الفرعي الخاص بك سيقوم بفهرسة البيانات من [الشبكة المدعومة](/developing/supported-networks).

تم كتابة هذا الدليل على افتراض أن لديك:

- عنوان عقد ذكي على الشبكة التي تختارها
- GRT to curate your subgraph
- محفظة عملات رقمية

## 1. Create a subgraph on Subgraph Studio

انتقل إلى [سبغراف استوديو] (https://thegraph.com/studio) وقم بربط محفظتك.

بمجرد الريط، يمكنك البدء بالنقر على "إنشاء غراف فرعي." اختر الشبكة من اختيارك وانقر على "استمرار".

## 2. Install the Graph CLI

أداة واجهة سطر الأوامر للغراف Graph CLI مكتوبة بلغة جافاسكريبت وستحتاج إلى تثبيت npm أو yarn لاستخدامها.

On your local machine, run one of the following commands:

Using [npm](https://www.npmjs.com/):

```sh
npm install -g @graphprotocol/graph-cli
```

Using [yarn](https://yarnpkg.com/):

```sh
yarn global add @graphprotocol/graph-cli
```

## 3. Initialize your Subgraph

> يمكنك العثور على الأوامر المتعلقة بالغراف الفرعي الخاص بك على صفحة الغراف الفرعي في (سبغراف استوديو) (https://thegraph.com/studio).

عند تهيئة غرافك الفرعي، ستطلب منك أداة "واجهة سطر الأوامر" (CLI) المعلومات التالية:

- البروتوكول: اختر البروتوكول الذي سيفهرس من فهرسة البيانات
- المعرّف الخاص بالغراف الفرعي: قم بإنشاء اسم لغرافك الغرعي. يُعتبر "سبغراف سلوج" معرّف فريد يستخدم لتمييز غرافك الفرعي.
- الدليل الذي سيتم إنشاء الغراف الفرعي فيه: اختر الدليل المحلي الذي ترغب في إنشاء الغراف الفرعي فيه
- شبكة الايثيروم(اختيارية): قد تحتاج إلى تحديد الشبكة المتوافقة مع آلة إيثيريوم الإفتراضية التي سيقوم غرافك الفرعي بفهرسة البيانات منها
- Contract address: Locate the smart contract address you’d like to query data from
- واجهة التطبيق الثنائية: إذا لم يتم ملء واجهة التطبيق الثنائية تلقائياً، فستحتاج إلى إدخاله يدوياً كملف JSON
- كتلة البداية: يُقترح إدخال كتلة البداية لتوفير الوقت أثناء قيام غرافك الفرعي بفهرسة بيانات سلاسل الكتل. يمكنك تحديد كتلة البداية من خلال العثور على الكتلة التي تم نشر عقدك فيها.
- Contract Name: input the name of your contract
- فهرسة أحداث العقد ككيانات: يُقترح ضبط هذا الخيار على "صحيح" (True) حيث سيتم إضافة تعيينات تلقائية إلى غرافك الفرعي لكل حدث يتم إصداره
- إضافة عقد آخر (اختياري): يمكنك إضافة عقد آخر

قم بتهيئة غرافك الفرعي من عقد موجود عن طريق تنفيذ الأمر التالي:

```sh
graph init --studio <SUBGRAPH_SLUG>
```

يرجى مراجعة الصورة المرفقة كمثال عن ما يمكن توقعه عند تهيئة غرافك الفرعي:

أمر الغراف الفرعي(/img/subgraph-init-example.png)

## 4. اكتب غرافك الفرعي

الأوامر السابقة تنشئ هيكل غرافك الفرعي والذي يمكنك استخدامه كنقطة بداية لبناء غرافك الفرعي. عند إجراء تغييرات على الغراف الفرعي، ستعمل بشكل رئيسي مع ثلاثة ملفات:

- البيان التعريفي (subgraph.yaml) - يقوم بتحديد أي من مصادر البيانات التي ستقوم غرافاتك الفرعية بفهرستها.
- المخطط (schema.graphql) - مخطط لغة استعلام الغراف GraphQL يحدد البيانات التي ترغب في استردادها من الغراف الفرعي.
- (AssemblyScript Mappings (mapping.ts هذا هو الكود الذي يترجم البيانات من مصادر البيانات الخاصة بك إلى الكيانات المحددة في المخطط.

للمزيد من المعلومات حول كيفية كتابة غرافك الفرعي، يُرجى الاطلاع على إنشاء غراف فرعي(/developing/creating-a-subgraph).

## 5. Deploy to the Subgraph Studio

عند كتابة غرافك الفرعي، قم بتنفيذ الأوامر التالية:

```sh
$ graph codegen
$ graph build
```

- قم بالمصادقة وأنشر غرافك الفرعي. يمكن العثور على مفتاح النشر على صفحة الغراف الفرعي في سبغراف استيديو.

```sh
$ graph auth --studio <DEPLOY_KEY>
$ graph deploy --studio <SUBGRAPH_SLUG>
```

You will be asked for a version label. It's strongly recommended to use [semver](https://semver.org/) for versioning like `0.0.1`. That said, you are free to choose any string as version such as:`v1`, `version1`, `asdf`.

## 6. اختبر غرافك الفرعي

يمكنك اختبار غرافك الفرعي بإجراء استعلام تجريبي في قسم الملعب (Playground).

ستخبرك السجلات إذا كانت هناك أي أخطاء في غرافك الفرعي. ستبدو سجلات الغراف الفرعي الفعّال على النحو التالي:

![Subgraph logs](/img/subgraph-logs-image.png)

إذا فشل غرافك الفرعي، فيمكنك الاستعلام عن صحة الغراف الفرعي باستخدام ملعب غرافي GraphiQL Playground. لاحظ أنه يمكنك الاستفادة من الاستعلام أدناه وإدخال معرف النشر الخاص بك لغرافك الفرعي. في هذه الحالة، `Qm...` هو معرف النشر (يمكن العثور عليه في صفحة الغراف الفرعي ضمن **التفاصيل**). سيخبرك الاستعلام أدناه عند فشل الغراف الفرعي حتى تتمكن من إصلاحه بناءً عليه:

```graphql
{
  indexingStatuses(subgraphs: ["Qm..."]) {
    node
    synced
    health
    fatalError {
      message
      block {
        number
        hash
      }
      handler
    }
    nonFatalErrors {
      message
      block {
        number
        hash
      }
      handler
    }
    chains {
      network
      chainHeadBlock {
        number
      }
      earliestBlock {
        number
      }
      latestBlock {
        number
      }
      lastHealthyBlock {
        number
      }
    }
    entityCount
  }
}
```

## 7. قم بنشر غرافك الفرعي على شبكة الغراف اللامركزية

حالما يتم نشر غرافك الفرعي على سبغراف استيديو، وقمت باختباره، وهو جاهز لوضع الإنتاج، يمكنك عندها نشره على الشبكة اللامركزية.

في سبغراف استيديو، انقر على غرافك الفرعي. في صفحة الغراف الفرعي، ستتمكن من النقر على زر النشر في أعلى اليمين.

حدد الشبكة التي ترغب في نشر غرافك الفرعي عليها. يُوصى بنشر الغرافات الفرعية على شبكة أربترم ون للاستفادة من [سرعة معاملات أسرع وتكاليف غاز أقل](/arbitrum/arbitrum-faq).

قبل أن تتمكن من استعلام غرافك الفرعي، يجب أن يبدأ المفهرسون في تقديم الاستعلامات عليه. لتتمكن من تسريع هذه العملية، تستطيع أن تنسِّق غرافك الفرعي باستخدام عملة الغراف GRT.

في الوقت الحالي، يُوصى بأن تنسق غرافك الفرعي باستخدام 10,000 من عملة الغراف GRT لضمان أن يتم فهرسته ويكون متاحاً للاستعلام في أقرب وقت ممكن.

لتوفير تكاليف الغاز، يمكنك تنسيق غرافك الفرعي في نفس العملية التي نشرته عن طريق اختيار هذا الزر عند نشر غرافك الفرعي على شبكة الغراف اللامركزية:

![Subgraph publish](/img/publish-and-signal-tx.png)

## 8. استعلم عن غرافك الفرعي

الآن يمكنك الاستعلام عن غرافك الفرعي عن طريق إرسال استعلامات لغة GraphQL إلى عنوان استعلامات غرافك الفرعي URL والذي يمكنك أن تجده عن طريق النقر على زر الاستعلام.

يمكنك الاستعلام من التطبيق اللامركزي الخاص بك إذا لم يكن لديك مفتاح لواجهة برمجة التطبيقات عبر عنوان URL للاستعلام المؤقت المجاني والمحدود المعدل والذي يمكن استخدامه للتطوير والتدريج.

For more information about querying data from your subgraph, read more [here](/querying/querying-the-graph/).
