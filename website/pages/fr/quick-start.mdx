---
title: Démarrage Rapide
---

Learn how to easily publish and query a [subgraph](/developing/developer-faqs/#1-what-is-a-subgraph) on The Graph.

## Prerequisites for this guide

- Un portefeuille crypto
- A smart contract address on one of the [supported networks](/developing/supported-networks/)

## Step-by-step

### 1. Installez la CLI de The Graph

You must have [Node.js](https://nodejs.org/) and a package manager of your choice (`npm`, `yarn` or `pnpm`) installed to use the Graph CLI. Check for the [most recent](https://github.com/graphprotocol/graph-tooling/releases?q=%40graphprotocol%2Fgraph-cli&expanded=true) CLI version.

Sur votre machine locale, exécutez l'une des commandes suivantes :

Using [npm](https://www.npmjs.com/):

```sh
npm install -g @graphprotocol/graph-cli@latest
```

Using [yarn](https://yarnpkg.com/):

```sh
npm install -g @graphprotocol/graph-cli
```

### 2. Create your subgraph

If your contract has events, the `init` command will automatically create a scaffold of a subgraph.

#### Create via Graph CLI

Use the following command to create a subgraph in Subgraph Studio using the CLI:

```sh
graph init --product subgraph-studio
```

#### Create via Subgraph Studio

Subgraph Studio lets you create, manage, deploy, and publish subgraphs, as well as create and manage API keys.

1. Go to [Subgraph Studio](https://thegraph.com/studio/) and connect your wallet.
2. Click "Create a Subgraph". It is recommended to name the subgraph in Title Case: "Subgraph Name Chain Name".

For additional information on subgraph creation and the Graph CLI, see [Creating a Subgraph](/developing/creating-a-subgraph).

### 3. Initialize your subgraph

#### From an existing contract

The following command initializes your subgraph from an existing contract:

```sh
graph init <SUBGRAPH_SLUG>
```

> Note: If your contract was verified on Etherscan, then the ABI will automatically be created in the CLI.

You can find commands for your specific subgraph on the subgraph page in [Subgraph Studio](https://thegraph.com/studio/).

When you initialize your subgraph, the CLI will ask you for the following information:

- Protocol: Choose the protocol your subgraph will be indexing data from.
- Subgraph slug: Create a name for your subgraph. Your subgraph slug is an identifier for your subgraph.
- Directory to create the subgraph in: Choose your local directory.
- Ethereum network (optional): You may need to specify which EVM-compatible network your subgraph will be indexing data from.
- Contract address: Locate the smart contract address you’d like to query data from.
- ABI: If the ABI is not auto-populated, you will need to input it manually as a JSON file.
- Start Block: You should input the start block to optimize subgraph indexing of blockchain data. Locate the start block by finding the block where your contract was deployed.
- Contract Name: Input the name of your contract.
- Index contract events as entities: It is suggested that you set this to true, as it will automatically add mappings to your subgraph for every emitted event.
- Add another contract (optional): You can add another contract.

La capture d'écran suivante donne un exemple de ce qui vous attend lors de l'initialisation de votre subgraph :

![Subgraph command](/img/subgraph-init-example.png)

### 4. Write your subgraph

The `init` command in the previous step creates a scaffold subgraph that you can use as a starting point to build your subgraph.

When making changes to the subgraph, you will mainly work with three files:

- Manifest (`subgraph.yaml`) - defines what data sources your subgraph will index.
- Schema (`schema.graphql`) - defines what data you wish to retrieve from the subgraph.
- AssemblyScript Mappings (`mapping.ts`) - translates data from your data sources to the entities defined in the schema.

For a detailed breakdown on how to write your subgraph, check out [Creating a Subgraph](/developing/creating-a-subgraph/).

### 5. Déployer votre subgraph

N'oubliez pas que déployer n'est pas la même chose que publier.

- Lorsque vous déployez un subgraph, vous le poussez vers [Subgraph Studio](https://thegraph.com/studio/), où vous pouvez le tester, le mettre en scène/préproduction et l'examiner.
- Lorsque vous publiez un subgraph, vous le publiez sur la blockchain vers le réseau décentralisé.

1. Une fois votre subgraph écrit, exécutez les commandes suivantes :

   ```sh
   graph codegen
   graph build
   ```

2. Authentifiez-vous et déployez votre subgraph. La clé de déploiement se trouve sur la page du subgraph dans Subgraph Studio.

![Clé de déploiement](/img/subgraph-studio-deploy-key.jpg)

````
```sh

graph auth <DEPLOY_KEY>

graph deploy <SUBGRAPH_SLUG>
```
````

- Le CLI demandera une étiquette de version.
  - Il est fortement recommandé d'utiliser le [versionnage sémantique](https://semver.org/), par exemple `0.0.1`. Cela dit, vous pouvez choisir n'importe quelle chaîne de caractères pour la version, comme : `v1`, `version1`, `asdf`, etc.

### 6. Examiner votre subgraph

Si vous souhaitez analyser votre subgraph avant de le publier sur le réseau, vous pouvez utiliser [Subgraph Studio](https://thegraph.com/studio/) pour :

- Exécuter un exemple de requête.
- Analyser votre subgraph dans le tableau de bord pour vérifier les informations.
- Vérifier les logs sur le tableau de bord pour voir si des erreurs surviennent avec votre subgraph. Les logs d'un subgraph opérationnel ressembleront à ceci :

  ![Logs du subgraph](/img/subgraph-logs-image.png)

### 7. Publier votre subgraph sur The Graph Network⁠

La publication d'un subgraph sur le réseau décentralisé le rend disponible pour que les [Curateurs](/network/curating/) commencent à le curer et les [Indexeurs](/network/indexing/) commencent à l'indexer.

#### Publier avec Subgraph Studio⁠

1. Pour publier votre subgraph, cliquez sur le bouton "Publish" dans le tableau de bord.
2. Sélectionnez le réseau sur lequel vous souhaitez publier votre subgraph.

#### Publication avec l'Interface en Ligne de Commande (CLI)

À partir de la version 0.73.0, vous pouvez également publier votre subgraph avec Graph CLI.

1. Ouvrez le `graph-cli`.

2. Utilisez les commandes suivantes :

   ```sh
   graph codegen && graph build
   ```

   Puis,

   ```sh
   graph publish
   ```

3. Une fenêtre s'ouvrira, vous permettant de connecter votre portefeuille, d'ajouter des métadonnées et de déployer votre subgraph final sur un réseau de votre choix.

![cli-ui](/img/cli-ui.png)

Pour personnaliser votre déploiement, consultez [Publication d'un Subgraph](/publishing/publishing-a-subgraph/).

#### Ajouter un signal à votre subgraph⁠

1. Pour attirer les indexeurs à interroger votre subgraph, vous devriez y ajouter un signal de curation en GRT.

   - Cette action améliore la qualité du service, réduit la latence et renforce la redondance et la disponibilité du réseau pour votre subgraph.

2. Si éligibles aux récompenses d'indexation, les Indexeurs reçoivent des récompenses en GRT proportionnelles au montant signalé.

   - Il est recommandé de curer au moins 3 000 GRT pour attirer 3 Indexeurs. Vérifiez l'éligibilité aux récompenses en fonction de l'utilisation des fonctionnalités du subgraph et des réseaux supportés.

Pour en savoir plus sur la curation, lisez [Curation](/network/curating/).

Pour économiser sur les frais de gas, vous pouvez curer votre subgraph dans la même transaction que celle où vous le publiez en sélectionnant cette option :

![Subgraph publish](/img/studio-publish-modal.png)

### 8. Interroger votre subgraph

Vous pouvez maintenant interroger votre subgraph en envoyant des requêtes GraphQL à son URL de requête, que vous trouverez en cliquant sur le bouton "Query".

Pour plus d'informations sur l'interrogation des données de votre subgraph, lisez [Interroger The Graph](/querying/querying-the-graph/).
