---
title: À propos de The Graph
---

Cette page expliquera ce qu'est The Graph et comment vous pouvez commencer.

## Qu’est-ce que The Graph ?

The Graph est un protocole décentralisé pour l'indexation et l'interrogation de données blockchain. The Graph permet d'interroger des données qui sont difficiles à interroger directement.

Les projets avec des contrats intelligents complexes comme [Uniswap](https://uniswap.org/) et des projets NFT comme [Bored Ape](https://boredapeyachtclub.com/) Yacht Club stockent des données sur la blockchain Ethereum. La façon dont ces données sont stockées rend leur lecture difficile au-delà de quelques informations simples.

Dans le cas du Bored Ape Yacht Club, nous pouvons effectuer des opérations de lecture de base sur [le contrat](https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code), comme obtenir le propriétaire d'un certain singe, obtenir l'URI du contenu d'un singe en fonction de son identifiant ou de l'offre totale. , car ces opérations de lecture sont programmées directement dans le contrat intelligent, mais des requêtes et des opérations plus avancées du monde réel telles que l'agrégation, la recherche, les relations et le filtrage non trivial ne sont pas possibles. Par exemple, si nous souhaitions rechercher les singes appartenant à une certaine adresse et filtrer selon l'une de ses caractéristiques, nous ne serions pas en mesure d'obtenir cette information en interagissant directement avec le contrat lui-même.

Pour obtenir ces données, vous devez traiter chaque événement de [`transfert`](https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code#L1746) jamais émis, lire les métadonnées d'IPFS à l'aide de l'ID de jeton et du hachage IPFS, puis les agréger. Même pour ce type de questions relativement simples, il faudrait **heures, voire jours** à une application décentralisée (dapp) exécutée dans un navigateur pour obtenir une réponse.

Vous pouvez également créer votre propre serveur, y traiter les transactions, les enregistrer dans une base de données et créer un point de terminaison d'API par-dessus tout cela afin d'interroger les données. Cependant, cette option est [consommatrice de ressources](/network/benefits/), nécessite une maintenance, présente un point de défaillance unique et brise d'importantes propriétés de sécurité requises pour la décentralisation.

**L’indexation des données blockchain est vraiment très difficile.**

Les propriétés de la blockchain telles que la finalité, les réorganisations de chaîne ou les blocs non verrouillés compliquent davantage ce processus et rendent non seulement la récupération de résultats de requête corrects à partir des données de la blockchain, mais aussi conceptuellement difficile.

The Graph résout ce problème avec un protocole décentralisé qui indexe et permet l'interrogation performante et efficace des données blockchain. Ces API (les « sous-graphes » indexés) peuvent ensuite être interrogées avec une API GraphQL standard. Il existe aujourd'hui un service hébergé ainsi qu'un protocole décentralisé avec les mêmes capacités. Les deux s'appuient sur l'implémentation open source de [Graph Node](https://github.com/graphprotocol/graph-node).

## Fonctionnement du Graph

The Graph apprend quoi et comment indexer les données Ethereum en fonction des descriptions de subgraphs, connues sous le nom de manifeste de subgraph. La description du subgraph définit les contrats intelligents d'intérêt pour un subgraph, les événements de ces contrats auxquels il faut prêter attention et comment mapper les données d'événement aux données que The Graph stockera dans sa base de données.

Une fois que vous avez écrit un `manifeste de subgraph`, vous utilisez le Graph CLI pour stocker la définition dans IPFS et vous indiquez par la même occasion à l'indexeur de commencer à indexer les données pour ce subgraph.

Ce diagramme donne plus de détails sur le flux de données une fois qu'un manifeste de subgraph a été déployé, traitant des transactions Ethereum :

![Un graphique expliquant comment The Graph utilise Graph Node pour répondre aux requêtes des consommateurs de données](/img/graph-dataflow.png)

La description des étapes du flux :

1. Une dapp ajoute des données à Ethereum via une transaction sur un contrat intelligent.
2. Le contrat intelligent va alors produire un ou plusieurs événements lors du traitement de la transaction.
3. Parallèlement, Le nœud de The Graph scanne continuellement Ethereum à la recherche de nouveaux blocs et de nouvelles données intéressantes pour votre subgraph.
4. The Graph Node trouve alors les événements Ethereum d'intérêt pour votre subgraph dans ces blocs et vient exécuter les corrélations correspondantes que vous avez fournies. Le gestionnaire de corrélation se définit comme un module WASM qui crée ou met à jour les entités de données que le nœud de The Graph stocke en réponse aux événements Ethereum.
5. Le dapp interroge le Graph Node pour des données indexées à partir de la blockchain, à l'aide du [point de terminaison GraphQL](https://graphql.org/learn/) du noeud. À son tour, le Graph Node traduit les requêtes GraphQL en requêtes pour sa base de données sous-jacente afin de récupérer ces données, en exploitant les capacités d'indexation du magasin. Le dapp affiche ces données dans une interface utilisateur riche pour les utilisateurs finaux, qui s'en servent pour émettre de nouvelles transactions sur Ethereum. Le cycle se répète.

## Les Étapes suivantes

Dans les sections suivantes, nous expliquerons plus en détail comment définir les subgraphs, comment les déployer et comment interroger les données à partir des index que Le nœud de The Graph construit.

Before you start writing your own subgraph, you might want to have a look at [Graph Explorer](https://thegraph.com/explorer) and explore some of the subgraphs that have already been deployed. The page for each subgraph contains a playground that lets you query that subgraph's data with GraphQL.
