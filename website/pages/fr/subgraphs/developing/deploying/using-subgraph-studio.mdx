---
title: Deploying Using Subgraph Studio
---

Apprenez à déployer votre subgraph sur Subgraph Studio.

> Note: When you deploy a subgraph, you push it to Subgraph Studio, where you'll be able to test it. It's important to remember that deploying is not the same as publishing. When you publish a subgraph, you're publishing it onchain.

## Présentation de Subgraph Studio

Dans [Subgraph Studio](https://thegraph.com/studio/), vous pouvez faire ce qui suit:

- Voir une liste des subgraphs que vous avez créés
- Gérer, voir les détails et visualiser l'état d'un subgraph spécifique
- Créez et gérez vos clés API pour des subgraphs spécifiques
- Limitez vos clés API à des domaines spécifiques et autorisez uniquement certains Indexers à les utiliser pour effectuer des requêtes
- Créer votre subgraph
- Déployer votre subgraph en utilisant The Graph CLI
- Tester votre subgraph dans l'environnement de test
- Intégrer votre subgraph en staging en utilisant l'URL de requête du développement
- Publier votre subgraph sur The Graph Network
- Gérer votre facturation

## Installer The Graph CLI

Avant de déployer, vous devez installer The Graph CLI.

Vous devez avoir [Node.js](https://nodejs.org/) et un gestionnaire de packages de votre choix (`npm`, `yarn` ou `pnpm`) installés pour utiliser The Graph CLI. Vérifiez la version la [plus récente](https://github.com/graphprotocol/graph-tooling/releases?q=%40graphprotocol%2Fgraph-cli&expanded=true) de l'outil CLI.

### Installation avec yarn

```bash
yarn global add @graphprotocol/graph-cli
```

### Installation avec npm

```bash
npm install -g @graphprotocol/graph-cli
```

## Commencer

1. Ouvrez [Subgraph Studio](https://thegraph.com/studio/).
2. Connectez votre portefeuille pour vous connecter.
   - Vous pouvez le faire via MetaMask, Coinbase Wallet, WalletConnect ou Safe.
3. Après vous être connecté, votre clé de déploiement unique sera affichée sur la page des détails de votre subgraph.
   - La clé de déploiement vous permet de publier vos subgraphs ou de gérer vos clés d'API et votre facturation. Elle est unique mais peut être régénérée si vous pensez qu'elle a été compromise.

> Important : Vous avez besoin d'une clé API pour interroger les subgraphs

### Comment créer un subgraph dans Subgraph Studio

<VideoEmbed youtube="nGIFuC69bSA" />

> For additional written detail, review the [Quick Start](/subgraphs/quick-start/).

### Compatibilité des subgraphs avec le réseau de The Graph

Pour être pris en charge par les Indexeurs sur The Graph Network, les subgraphs doivent :

- Index a [supported network](/supported-networks/)
- Ne doit utiliser aucune des fonctionnalités suivantes :
  - ipfs.cat & ipfs.map
  - Erreurs non fatales
  - Greffage

## Initialisez votre Subgraph

Une fois que votre subgraph a été créé dans Subgraph Studio, vous pouvez initialiser son code via la CLI en utilisant cette commande :

```bash
graph init <SUBGRAPH_SLUG>
```

Vous pouvez trouver la valeur `<SUBGRAPH_SLUG>` sur la page des détails de votre subgraph dans Subgraph Studio, voir l'image ci-dessous :

![Subgraph Studio - Slug](/img/doc-subgraph-slug.png)

Après avoir exécuté la commande `graph init`, ilvous sera demandé de saisir l'adresse du contrat, le réseau, et un ABI que vous souhaitez interroger. Cela générera un nouveau dossier sur votre machine locale avec quelques codes de base pour commencer à travailler sur votre subgraph. Vous pouvez ensuite finaliser votre subgraph pour vous assurer qu'il fonctionne comme prévu.

## Authentification The Graph

Avant de pouvoir déployer votre subgraph sur Subgraph Studio, vous devez vous connecter à votre compte via la CLI. Pour le faire, vous aurez besoin de votre clé de déploiement, que vous pouvez trouver sur la page des détails de votre subgraph.

Ensuite, utilisez la commande suivante pour vous authentifier depuis la CLI :

```bash
graph auth <DEPLOY KEY>
```

## Déploiement d'un Subgraph

Une fois prêt, vous pouvez déployer votre subgraph sur Subgraph Studio.

> Déployer un subgraph avec la CLI le pousse vers le Studio, où vous pouvez le tester et mettre à jour les métadonnées. Cette action ne publiera pas votre subgraph sur le réseau décentralisé.

Utilisez la commande CLI suivante pour déployer votre subgraph :

```bash
graph deploy <SUBGRAPH_SLUG>
```

Après avoir exécuté cette commande, la CLI demandera une étiquette de version.

- Il est fortement recommandé d'utiliser [semver](https://semver.org/) pour le versionnage, comme `0.0.1`. Cela dit, vous êtes libre de choisir n'importe quelle chaîne de caractère comme version telle que v1, version1 ou asdf.
- Les étiquettes que vous créez seront visibles dans Graph Explorer et pourront être utilisées par les Curateurs pour décider s'ils veulent signaler sur une version spécifique ou non, donc choisissez-les judicieusement.

## Tester votre Subgraph

Après le déploiement, vous pouvez tester votre subgraph (soit dans Subgraph Studio, soit dans votre propre application, avec l'URL de requête du déploiement), déployer une autre version, mettre à jour les métadonnées, et publier sur [Graph Explorer](https://thegraph.com/explorer) lorsque vous êtes prêt.

Utilisez Subgraph Studio pour vérifier les journaux (logs) sur le tableau de bord et rechercher les erreurs éventuelles de votre subgraph.

## Publiez votre subgraph

In order to publish your subgraph successfully, review [publishing a subgraph](/subgraphs/developing/publishing/publishing-a-subgraph/).

## Versionning de votre subgraph avec le CLI

Si vous souhaitez mettre à jour votre subgraph, vous pouvez faire ce qui suit :

- Vous pouvez déployer une nouvelle version dans Studio en utilisant la CLI (cette version sera privée à ce stade).
- Une fois que vous en êtes satisfait, vous pouvez publier votre nouveau déploiement sur [Graph Explorer](https://thegraph.com/explorer).
- Cette action créera une nouvelle version de votre subgraph sur laquelle les Curateurs pourront commencer à signaler et que les Indexeurs pourront indexer.

You can also update your subgraph's metadata without publishing a new version. You can update your subgraph details in Studio (under the profile picture, name, description, etc.) by checking an option called **Update Details** in [Graph Explorer](https://thegraph.com/explorer). If this is checked, an onchain transaction will be generated that updates subgraph details in Explorer without having to publish a new version with a new deployment.

> Note: There are costs associated with publishing a new version of a subgraph to the network. In addition to the transaction fees, you must also fund a part of the curation tax on the auto-migrating signal. You cannot publish a new version of your subgraph if Curators have not signaled on it. For more information, please read more [here](/resources/roles/curating/).

## Archivage automatique des versions de subgraphs

Chaque fois que vous déployez une nouvelle version de subgraph dans Subgraph Studio, la version précédente sera archivée. Les versions archivées ne seront pas indexées/synchronisées et ne pourront donc pas être interrogées. Vous pouvez désarchiver une version de votre subgraph dans Subgraph Studio.

> Remarque : les versions précédentes des subgraphs non publiés mais déployés dans Studio seront automatiquement archivées.

![Subgraph Studio - Unarchive](/img/Unarchive.png)
