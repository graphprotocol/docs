# The Graph-TypeScript-Bibliothek (graph-ts)

[![npm (scoped)](https://img.shields.io/npm/v/@graphprotocol/graph-ts.svg)](https://www.npmjs.com/package/@graphprotocol/graph-ts)
[![Build Status](https://travis-ci.org/graphprotocol/graph-ts.svg?branch=master)](https://travis-ci.org/graphprotocol/graph-ts)

TypeScript/AssemblyScript-Bibliothek zum Schreiben von Subgraph-Mappings, die auf
[The Graph](https://github.com/graphprotocol/graph-node).

## Verwendung

Eine detaillierte Anleitung zur Erstellung eines Subgraphen finden Sie in der
[Graph CLI docs](https://github.com/graphprotocol/graph-cli).

Ein Schritt bei der Erstellung des Subgraphen ist das Schreiben von Mappings, die Blockchain-Ereignisse verarbeiten und
Entitäten in den Speicher schreiben. Diese Mappings werden in TypeScript/AssemblyScript geschrieben.

Die Bibliothek `graph-ts` bietet APIs für den Zugriff auf den Graph Node-Speicher, Blockchain-Daten, Smart
Verträge, Daten auf IPFS, kryptographische Funktionen und mehr. Um sie zu verwenden, müssen Sie lediglich eine
Abhängigkeit von ihr hinzufügen:

```sh
npm install --dev @graphprotocol/graph-ts # NPM
yarn add --dev @graphprotocol/graph-ts    # Yarn
```

Danach können Sie die „Store“-API und andere Funktionen aus dieser Bibliothek in Ihre Mappings importieren. A
einige Beispiele:

```typescript
import { crypto, store } from '@graphprotocol/graph-ts'
// This is just an example event type generated by `graph-cli`
// from an Ethereum smart contract ABI
import { NameRegistered } from './types/abis/SomeContract'
// This is an example of an entity type generated from a
// subgraph's GraphQL schema
import { Domain } from './types/schema'

function handleNameRegistered(event: NameRegistered) {
  // Example use of a crypto function
  let id = crypto.keccak256(name).toHexString()

  // Example use of the generated `Entry` class
  let domain = new Domain()
  domain.name = name
  domain.owner = event.params.owner
  domain.timeRegistered = event.block.timestamp

  // Example use of the store API
  store.set('Name', id, entity)
}
```

## Hilfsfunktionen für AssemblyScript

Siehe die Datei `helper-functions.ts` in
[this](https://github.com/graphprotocol/graph-tooling/blob/main/packages/ts/helper-functions.ts)
Repository für einige allgemeine Funktionen, die helfen, auf der AssemblyScript-Bibliothek aufzubauen, wie
Byte-Array-Verkettung, unter anderem.

## API

Die Dokumentation zur API finden Sie
[hier](https://thegraph.com/docs/en/developer/assemblyscript-api/).

Beispiele für die Verwendung von `graph-ts` finden Sie in einem der folgenden Subgraphen:

- https://github.com/graphprotocol/ens-subgraph
- https://github.com/graphprotocol/decentraland-subgraph
- https://github.com/graphprotocol/adchain-subgraph
- https://github.com/graphprotocol/0x-subgraph
- https://github.com/graphprotocol/aragon-subgraph
- https://github.com/graphprotocol/dharma-subgraph

## Lizenz

Copyright &copy; 2018 Graph Protocol, Inc. und Mitwirkende.

The Graph TypeScript-Bibliothek ist doppelt lizenziert unter der
[MIT-Lizenz](https://github.com/graphprotocol/graph-tooling/blob/main/LICENSE-MIT) und der
[Apache-Lizenz, Version 2.0](https://github.com/graphprotocol/graph-tooling/blob/main/LICENSE-APACHE).

Sofern nicht durch geltendes Recht vorgeschrieben oder schriftlich vereinbart, wird die unter dieser Lizenz vertriebene Software
auf einer „AS IS“-Basis verteilt, OHNE GARANTIEN ODER BEDINGUNGEN JEGLICHER ART, weder ausdrücklich noch
stillschweigend. In der Lizenz finden Sie die spezifischen Bestimmungen zu den Rechten und Beschränkungen unter der
Lizenz.
