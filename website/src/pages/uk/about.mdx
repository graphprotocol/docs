---
title: Про The Graph
---

На цій сторінці ви дізнаєтесь, що таке The Graph і як ви можете розпочати працювати з ним.

## Що таке The Graph?

The Graph - це децентралізований протокол для індексації та запитів щодо даних блокчейну. The Graph дозволяє робити запити про дані, які важко отримати безпосередньо.

Проєкти зі складними смартконтрактами, такі як [Uniswap](https://uniswap.org/), також НФТ проєкти, до прикладу - [Bored Ape Yacht Club](https://boredapeyachtclub.com/) зберігають свої дані на блокчейні Ethereum. Це робить практично неможливим зчитування будь-чого, окрім основних даних безпосередньо з блокчейну.

У випадку з Bored Ape Yacht Club ми можемо виконувати базові операції по зчитуванню [контракту](https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code), такі як отримання даних про власника конкретної мавпи, отримання URI контенту про певну мавпу на основі їх ID або загальної кількості. У нас є змога зробити це, оскільки конкретно ці операції запрограмовані безпосередньо в смартконтракті, але більш детальні, реальні запити, такі як агрегація, пошук, взаємозв'язки, нетривіальна фільтрація - неможливі. Наприклад, якщо ми захочемо отримати інформацію про мавп, які перебувають у власності за певною адресою, і відфільтрувати їх за однією з їх характеристик, ми не зможемо отримати цю інформацію, взаємодіючи безпосередньо з самим смартконтрактом.

Щоб отримати ці дані, вам потрібно буде обробити абсолютно кожну [`трансфер-транзакцію`](https://etherscan.io/address/0xbc4ca0eda7647a8ab7c2061c2e118a18a936f13d#code#L1746), прочитати метадані з IPFS, використовуючи ID токена та хеш IPFS, а після цього об'єднати всю отриману інформацію. Таким чином, навіть на такі прості запити децентралізованому додатку (dapp) ви можете витратити **години, а то й дні** для отримання потрібної відповіді.

Ви також можете створити власний сервер, обробляти транзакції на ньому, зберігати їх у базі даних і створити на ньому кінцеву точку API для запиту даних. Проте, цей варіант дуже [ресурсозатратний](/network/benefits/), потребує регулярного обслуговування, являє собою єдину точку збою, а також порушує важливі особливості безпеки, що необхідні для децентралізації.

**Індексування даних блокчейну це дуже важке заняття.**

Такі властивості блокчейну, як закінченість, реорганізація мережі або незамкнені блоки, ще більше ускладнюють цей процес і роблять його не тільки часозатратним, а й концептуально ускладнюють отримання правильних відповідей на ваші запити з даних блокчейну.

The Graph розв'язує цю проблему за допомогою децентралізованого протоколу, який індексує та забезпечує швидкий та ефективний запит даних блокчейну. Ці API (індексовані "підграфи") можна отримувати за допомогою стандартного API GraphQL. Сьогодні існує як hosted service, так і децентралізований протокол з тими ж можливостями. Обидва підтримуються за допомогою реалізації відкритого вихідного коду [Graph Node](https://github.com/graphprotocol/graph-node).

## Як працює The Graph

The Graph вивчає що і як індексувати в даних Ethereum за допомогою описів до підграфів, які називаються підграф маніфестами. Цей опис допомагає визначити смартконтракти, які представляють певний інтерес для підграфа, також події, що відбулись в цих смартконтрактах, на які варто звернути увагу, а також допомагає зіставити дані про ці події з тими даними, які The Graph буде зберігати у своїй базі даних.

Після того як ви написали `підграф маніфест`, використовуйте the Graph CLI, щоб зберегти значення в IPFS і вказати індексатору почати тестування даних для цього підграфа.

На цій діаграмі більш детально показано потік даних, що стосуються транзакцій в Ethereum, одразу після розгортання підграф маніфесту:

![Малюнок, що пояснює, як The Graph використовує Graph Node для обслуговування запитів до споживачів даних](/img/graph-dataflow.png)

Цей потік даних проходить такі етапи:

1. Додаток відправляє дані в мережу Ethereum через транзакцію в смартконтракті.
2. Під час обробки транзакції смартконтракт видає одну або декілька різних подій.
3. Graph Node постійно сканує Ethereum на наявність нових блоків і даних для вашого підграфа, які вони можуть містити.
4. Graph Node знаходить події на Ethereum для вашого підграфа в цих блоках і запускає надані вами mapping handlers. Mapping - це модуль WASM, який створює або оновлює структуру даних, що зберігаються у Graph Node у відповідь на події на Ethereum.
5. Додаток запитує Graph Node про дані, проіндексовані в блокчейні, використовуючи [кінцеву точку GraphQL](https://graphql.org/learn/). The Graph Node, і собі, переводить запити GraphQL в запити до свого базового сховища даних, щоб отримати ці дані, використовуючи можливості індексації сховища. Dapp відображає ці дані в величезному інтерфейсі для кінцевих користувачів, який вони використовують для створення нових транзакцій на Ethereum. Цикл повторюється.

## Наступні кроки

У наступних розділах ми більш детально розглянемо, як створювати підграфи, як їх розгортати і як запитувати дані з отриманих індексів, які формує Graph Node.

Перш ніж ви розпочнете писати свій власний підграф, можете зазирнути в Graph Explorer та ознайомитись там з різними підграфами, які уже було розгорнуто. Сторінка кожного підграфа містить поле, де ви зможете отримати дані про цей підграф за допомогою GraphQL.
