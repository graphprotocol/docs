---
title: Démarrage rapide
---

Apprenez à construire, publier et interroger facilement un [subgraph](/subgraphs/developing/developer-faq/#1-what-is-a-subgraph) sur The Graph.

## Prerequisites

- Un portefeuille crypto
- Une adresse de contrat intelligent sur un [réseau pris en charge](/supported-networks/)
- [Node.js](https://nodejs.org/) installé
- Un gestionnaire de package de votre choix (`npm`, `yarn` ou `pnpm`)

## Comment construire un subgraph

### 1. Créer un subgraph dans Subgraph Studio

Accédez à [Subgraph Studio](https://thegraph.com/studio/) et connectez votre portefeuille.

Subgraph Studio lets you create, manage, deploy, and publish subgraphs, as well as create and manage API keys.

Cliquez sur « Créer un subgraph ». Il est recommandé de nommer le subgraph en majuscule : « Nom du subgraph Nom de la chaîne ».

### 2. Installez la CLI Graph

Sur votre machine locale, exécutez l'une des commandes suivantes :

Utilisation de [npm](https://www.npmjs.com/) :

```sh
npm install -g @graphprotocol/graph-cli@latest
```

Using [yarn](https://yarnpkg.com/):

```sh
yarn global add @graphprotocol/graph-cli
```

### 3. Initialize your subgraph

> You can find commands for your specific subgraph on the subgraph page in [Subgraph Studio](https://thegraph.com/studio/).

La commande `graph init` créera automatiquement la structure de base (scaffold) d'un subgraph basé sur les événements de votre contrat.

The following command initializes your subgraph from an existing contract:

```sh
graph init
```

Si votre contrat est vérifié sur le scanner de blocs où il est déployé (comme [Etherscan](https://etherscan.io/)), l'ABI sera automatiquement créé dans le CLI.

When you initialize your subgraph, the CLI will ask you for the following information:

- **Protocole** : Choisissez le protocole à partir duquel votre subgraph indexera les données.
- **Subgraph slug** : Créez un nom pour votre subgraph. Votre nom de subgraph est un identifiant pour votre subgraph.
- **Répertoire** : Choisissez un répertoire dans lequel créer votre subgraph.
- **Ethereum network** (optionnel) : Vous pouvez avoir besoin de spécifier le réseau compatible EVM à partir duquel votre subgraph indexera les données.
- **Adresse du contrat** : Localisez l'adresse du contrat intelligent dont vous souhaitez interroger les données.
- **ABI** : Si l'ABI n'est pas renseigné automatiquement, vous devrez le saisir manuellement sous la forme d'un fichier JSON.
- **Bloc de départ** : Vous devez saisir le bloc de départ pour optimiser l'indexation du subgraph des données de la blockchain. Localisez le bloc de départ en trouvant le bloc où votre contrat a été déployé.
- **Nom du contrat** : Saisissez le nom de votre contrat.
- **Indexer les événements du contrat comme des entités** : Il est conseillé de mettre ce paramètre à true, car il ajoutera automatiquement des mappings à votre subgraph pour chaque événement émis.
- **Ajouter un autre contrat** (facultatif) : Vous pouvez ajouter un autre contrat.

La capture d'écran suivante donne un exemple de ce qui vous attend lors de l'initialisation de votre subgraph :

![Commande de subgraph](/img/CLI-Example.png)

### 4. Modifiez votre subgraph

The `init` command in the previous step creates a scaffold subgraph that you can use as a starting point to build your subgraph.

When making changes to the subgraph, you will mainly work with three files:

- Manifest (`subgraph.yaml`) - defines what data sources your subgraph will index.
- Schema (`schema.graphql`) - defines what data you wish to retrieve from the subgraph.
- AssemblyScript Mappings (`mapping.ts`) - translates data from your data sources to the entities defined in the schema.

For a detailed breakdown on how to write your subgraph, check out [Creating a Subgraph](/developing/creating-a-subgraph/).

### 5. Déployer votre subgraph

> N'oubliez pas que le déploiement n'est pas la même chose que la publication.

Lorsque vous **déployez** un subgraph, vous l'envoyez à [Subgraph Studio](https://thegraph.com/studio/), où vous pouvez le tester, le mettre en scène et le réviser. L'indexation d'un subgraph déployé est effectuée par l'[Indexeur de mise à niveau](https://thegraph.com/blog/upgrade-indexer/), qui est un Indexeur unique détenu et géré par Edge & Node, plutôt que par les nombreux Indexeurs décentralisés de The Graph Network. Un subgraph **déployé** est libre d'utilisation, à taux limité, non visible par le public et destiné à être utilisé à des fins de développement, de mise en place et de test.

Une fois votre subgraph écrit, exécutez les commandes suivantes :

````
```sh
graph codegen && graph build
```
````

Authentifiez-vous et déployez votre subgraph. La clé de déploiement se trouve sur la page du subgraph dans Subgraph Studio.

![Clé de déploiement](/img/subgraph-studio-deploy-key.jpg)

````
```sh

graph auth <DEPLOY_KEY>

graph deploy <SUBGRAPH_SLUG>
```
````

La CLI demandera un label de version. Il est fortement recommandé d'utiliser [le versionnement sémantique](https://semver.org/), par exemple `0.0.1`.

### 6. Examiner votre subgraph

Si vous souhaitez tester votre subgraph avant de le publier, vous pouvez utiliser [Subgraph Studio] (https://thegraph.com/studio/) pour effectuer les opérations suivantes :

- Exécuter un exemple de requête.
- Analyser votre subgraph dans le tableau de bord pour vérifier les informations.
- Vérifier les logs sur le tableau de bord pour voir si des erreurs surviennent avec votre subgraph. Les logs d'un subgraph opérationnel ressembleront à ceci :

  ![Logs du subgraph](/img/subgraph-logs-image.png)

### 7. Publier votre subgraph sur The Graph Network⁠

Lorsque votre subgraph est prêt pour un environnement de production, vous pouvez le publier sur le réseau décentralisé. La publication est une action onchain qui effectue les opérations suivantes :

- Il rend votre subgraph disponible pour être indexé par les [Indexeurs](/indexing/overview/) décentralisés sur The Graph Network.
- Il supprime les limites de taux et rend votre subgraph publiquement consultable et interrogeable dans [Graph Explorer] (https://thegraph.com/explorer/).
- Il rend votre subgraph disponible pour les [Curateurs](/resources/roles/curating/) afin de le curer.

> Plus la quantité de GRT que vous et d'autres curez sur votre subgraph est importante, plus les Indexeurs seront incités à indexer votre subgraph, ce qui améliorera la qualité de service, réduira la latence et renforcera la redondance du réseau pour votre subgraph.

#### Publier avec Subgraph Studio⁠

Pour publier votre subgraph, cliquez sur le bouton "Publish" dans le tableau de bord.

![Publier un subgraph sur Subgraph Studio](/img/publish-sub-transfer.png)

Sélectionnez le réseau sur lequel vous souhaitez publier votre subgraph.

#### Publication à partir de la CLI

À partir de la version 0.73.0, vous pouvez également publier votre subgraph avec Graph CLI.

Ouvrez le `graph-cli`.

Utilisez les commandes suivantes :

````
```sh
graph codegen && graph build
```

Then,

```sh
graph publish
```
````

3. Une fenêtre s'ouvrira, vous permettant de connecter votre portefeuille, d'ajouter des métadonnées et de déployer votre subgraph finalisé sur le réseau de votre choix.

![cli-ui](/img/cli-ui.png)

Pour personnaliser votre déploiement, voir [Publier un subgraph](/subgraphs/developing/publishing/publishing-a-subgraph/).

#### Ajout de signal à votre subgraph

1. Pour inciter les Indexeurs à interroger votre subgraph, vous devez y ajouter un signal de curation GRT.

   - Cette action améliore la qualité du service, réduit la latence et renforce la redondance et la disponibilité du réseau pour votre subgraph.

2. Si éligibles aux récompenses d'indexation, les Indexeurs reçoivent des récompenses en GRT proportionnelles au montant signalé.

   - Il est recommandé de curer au moins 3 000 GRT pour attirer 3 Indexeurs. Vérifiez l'éligibilité aux récompenses en fonction de l'utilisation des fonctionnalités du subgraph et des réseaux supportés.

Pour en savoir plus sur la curation, lisez [Curating](/resources/roles/curating/).

Pour économiser sur les frais de gas, vous pouvez curer votre subgraph dans la même transaction que celle où vous le publiez en sélectionnant cette option :

![Publication de subgraph](/img/studio-publish-modal.png)

### 8. Interroger votre subgraph

Vous avez maintenant accès à 100 000 requêtes gratuites par mois avec votre subgraph sur The Graph Network!

Vous pouvez interroger votre subgraph en envoyant des requêtes GraphQL à son URL de requête, que vous trouverez en cliquant sur le bouton Requête.

Pour plus d'informations sur l'interrogation des données de votre subgraph, lisez [Interrogation de The Graph](/subgraphs/querying/introduction/).
