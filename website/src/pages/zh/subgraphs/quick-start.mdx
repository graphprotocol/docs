---
title: 快速开始
---

Create, deploy, and query a [Subgraph](/subgraphs/developing/developer-faq/#1-what-is-a-subgraph) on The Graph Network.

By the end, you'll have:

- Initialized a Subgraph from a smart contract
- Deployed it to Subgraph Studio for testing
- Published to The Graph Network for decentralized indexing using Studio or CLI

## 先决条件

- 一个加密钱包
- A deployed smart contract on a [supported network](/supported-networks/)
- [Node.js](https://nodejs.org/) & a package manager of your choice (`npm`, `yarn` or `pnpm`)

## 如何构建子图

### 1. 在子图工作室中创建子图

1. Go to [Subgraph Studio](https://thegraph.com/studio/)
2. Connect your wallet
3. Click "Create a Subgraph"
4. Name it in Title Case: "Subgraph Name Chain Name"

### 2. 安装 Graph CLI

在本地计算机上，运行以下命令之一：

使用[npm](https://www.npmjs.com/)：

```sh
npm install -g @graphprotocol/graph-cli@latest
```

Using [yarn](https://yarnpkg.com/):

```sh
yarn global add @graphprotocol/graph-cli
```

Verify install:

```sh
graph --version
```

### 3. 初始化子图

> You can find commands for your specific Subgraph in [Subgraph Studio](https://thegraph.com/studio/).

Initialize your Subgraph from an existing contract:

```sh
graph init
```

初始化子图时，CLI工具会要求您提供以下信息：

- **协议**：选择子图将要索引数据的协议。
- **子图slug**: 为你的子图创建一个名称。子图slug是你的子图的标识符。
- **Directory**：选择一个目录来创建你的子图。
- **Etherum网络** (可选)：您可能需要指定您的子图将索引数据来自哪个EVM兼容网络。
- **Contract address**: Locate the smart contract address you'd like to query data from.
- **ABI**：如果ABI没有自动填充，您需要手动输入JSON文件。
- **Start Block**: You should input the start block where the contract was deployed to optimize Subgraph indexing of blockchain data.
- **合约名称**：输入合约名称。
- **将合约事件作为实体索引**：建议您将其设置为真。 因为它会自动将映射添加到你的子图中。
- **添加其他合约**（可选）：您可以添加其他合约。

See the following screenshot for an example of what to expect when initializing your Subgraph:

![Subgraph command](/img/CLI-Example.png)

### 4. 编写子图

When making changes to the Subgraph, you will primarily work with three files:

- Manifest (`subgraph.yaml`): Defines what data sources your Subgraph will index.
- Schema (`schema.graphql`): Defines what data you wish to retrieve from the Subgraph.
- AssemblyScript Mappings (`mapping.ts`): Translates data from your data sources to the entities defined in the schema.

For a detailed breakdown on how to write your Subgraph, refer to [Creating a Subgraph](/subgraphs/developing/creating/starting-your-subgraph/).

## Path 1: Studio Approach

### 5. Build your Subgraph

Run the following:

```sh
graph codegen && graph build
```

### 6. Deploy your Subgraph to Subgraph Studio

When you **deploy** a Subgraph, you push it to [Subgraph Studio](https://thegraph.com/studio/), where you can test, stage and review it. A deployed Subgraph's indexing is performed by the [Upgrade Indexer](https://thegraph.com/blog/upgrade-indexer/), which is a single Indexer owned and operated by Edge & Node. A **deployed** Subgraph is free to use, rate-limited, not visible to the public, and meant to be used for development, staging, and testing purposes.

> [!IMPORTANT] You do not need to use Subgraph Studio to publish your Subgraph to The Graph Network. Studio is only required for testing and staging your Subgraph prior to publishing.

1. Get your deploy key from the Subgraph page in Studio

![部署密钥](/img/subgraph-studio-deploy-key.jpg)

2. Authenticate:

```sh

graph auth <DEPLOY_KEY>
```

3. Deploy:

```sh
graph deploy <SUBGRAPH_SLUG>
```

### 7. Review in Studio

Use the Studio to:

- 运行一个示例查询。
- 在仪表盘分析您的子图以检查信息。
- 检查仪表盘上的日志，以查看您的子图表是否有任何错误。 操作子图的日志将看起来像这样：

  ![Subgraph logs](/img/subgraph-logs-image.png)

### 8. Publish to The Graph Network

当你的子图准备好生产环境时，你可以将它发布到去中心化的网络。 发布是一种在线操作，可以做以下工作：

- It makes your Subgraph available to be indexed by the decentralized [Indexers](/indexing/overview/) on The Graph Network.
- 取消了费率限制，使你的子图可以公开搜索并可以在 [Graph Explorer](https://thegraph.com/explorer/) 中查询。
- It makes your Subgraph available for [Curators](/resources/roles/curating/) to add curation signal.

1. Click **Publish** in Studio
2. Select network
3. (Recommended) Add curation during the same transaction to save on gas costs: ![Subgraph publish](/img/studio-publish-modal.png)

![Publish a Subgraph on Subgraph Studio](/img/publish-sub-transfer.png)

> Curation with 3,000+ GRT is recommended to incentivize indexing.

## Path 2: CLI Approach

1. 打开 `graph-cli`。
2. Run the following commands to build and publish your Subgraph: `graph codegen && graph build` then `graph publish`.
3. A browser window will prompt you to connect your wallet, add metadata, and publish your Subgraph to the network of your choice.

![cli-ui](/img/cli-ui.png)

### Custom Options

You can customize the deployment by uploading to a specific IPFS node and using additional flags:

```
USAGE
  $ graph publish [SUBGRAPH-MANIFEST] [-h] [--protocol-network arbitrum-one|arbitrum-sepolia --subgraph-id <value>] [-i <value>] [--ipfs-hash <value>] [--webapp-url
    <value>]

FLAGS
  -h, --help                   Show CLI help.
  -i, --ipfs=<value>           [default: https://ipfs.thegraph.com/api/v0] Upload build results to an IPFS node.
  --ipfs-hash=<value>          IPFS hash of the subgraph manifest to deploy.
  --protocol-network=<option>  [default: arbitrum-one] The network to use for the subgraph deployment.
                               <options: arbitrum-one|arbitrum-sepolia>
  --subgraph-id=<value>        Subgraph ID to publish to.
  --webapp-url=<value>         [default: https://cli.thegraph.com/publish] URL of the web UI you want to use to deploy.

```

> [!NOTE] Add GRT signal to your Subgraph to incentivize Indexers to query your Subgraph. Refer to [Adding Signal](developing/publishing/publishing-a-subgraph/#adding-signal-to-your-subgraph) for specifics.

### Final Step: Query your Subgraph

After publishing, access your Subgraph's Query URL from [Graph Explorer](https://thegraph.com/explorer/). You can query your Subgraph by sending GraphQL queries to its Query URL, which you can find by clicking the Query button.

You get access to 100,000 free queries/month with your Subgraph on The Graph Network.

Refer to [Querying The Graph](/subgraphs/querying/introduction/) to structure GraphQL queries.
