---
title: 快速开始
---

Create, deploy, and query a [Subgraph](/subgraphs/developing/developer-faq/#1-what-is-a-subgraph) on The Graph Network.

By the end, you'll have:

- Initialized a Subgraph from a smart contract
- Deployed it to Subgraph Studio for testing
- Published to The Graph Network for decentralized indexing

## 先决条件

- 一个加密钱包
- A deployed smart contract on a [supported network](/supported-networks/)
- [Node.js](https://nodejs.org/) & a package manager of your choice (`npm`, `yarn` or `pnpm`)

## 如何构建子图

### 1. 在子图工作室中创建子图

1. Go to [Subgraph Studio](https://thegraph.com/studio/)
2. Connect your wallet
3. Click "Create a Subgraph"
4. Name it in Title Case: "Subgraph Name Chain Name"

### 2. 安装 Graph CLI

在本地计算机上，运行以下命令之一：

使用[npm](https://www.npmjs.com/)：

```sh
npm install -g @graphprotocol/graph-cli@latest
```

Using [yarn](https://yarnpkg.com/):

```sh
yarn global add @graphprotocol/graph-cli
```

Verify install:

```sh
graph --version
```

### 3. 初始化子图

> You can find commands for your specific Subgraph in [Subgraph Studio](https://thegraph.com/studio/).

The following command initializes your Subgraph from an existing contract and indexes events:

```sh
graph init
```

初始化子图时，CLI工具会要求您提供以下信息：

- **协议**：选择子图将要索引数据的协议。
- **子图slug**: 为你的子图创建一个名称。子图slug是你的子图的标识符。
- **Directory**：选择一个目录来创建你的子图。
- **Etherum网络** (可选)：您可能需要指定您的子图将索引数据来自哪个EVM兼容网络。
- **合约地址**：找到要查询数据的智能合约地址。
- **ABI**：如果ABI没有自动填充，您需要手动输入JSON文件。
- **Start Block**: You should input the start block where the contract was deployed to optimize Subgraph indexing of blockchain data.
- **合约名称**：输入合约名称。
- **将合约事件作为实体索引**：建议您将其设置为真。 因为它会自动将映射添加到你的子图中。
- **添加其他合约**（可选）：您可以添加其他合约。

See the following screenshot for an example of what to expect when initializing your Subgraph:

![Subgraph command](/img/CLI-Example.png)

### 4. 编写子图

在对子图进行修改时，你将主要与三个文件一起工作：

- 清单（`subgraph.yaml`）--该清单定义了你的子图将索引哪些数据源。
- 模式（`schema.graphql`）--定义你希望从子图中检索到的数据。
- AssemblyScript 映射（`mapping.ts`）--将数据源中的数据转换为模式中定义的实体的代码。

想了解更多如何编写子图的信息，请参阅[创建子图](/developing/creating-a-subgraph/)。

### 5. 部署子图

When you **deploy** a Subgraph, you push it to [Subgraph Studio](https://thegraph.com/studio/), where you can test, stage and review it. A deployed Subgraph's indexing is performed by the [Upgrade Indexer](https://thegraph.com/blog/upgrade-indexer/), which is a single Indexer owned and operated by Edge & Node. A **deployed** Subgraph is free to use, rate-limited, not visible to the public, and meant to be used for development, staging, and testing purposes.

一旦您的子图被编写好，请运行以下命令：

````
```sh
graph codegen && graph build
```
````

认证并部署子图。部署密钥可以在子图工作室的子图页面上找到。

![部署密钥](/img/subgraph-studio-deploy-key.jpg)

````
```sh

graph auth <DEPLOY_KEY>

graph deploy <SUBGRAPH_SLUG>
```
````

### 6. 审查子图

如果你想在发布之前测试你的子图，你可以使用 [Subgraph Studio](https://thegraph.com/studio/) 来执行以下操作：

- 运行一个示例查询。
- 在仪表盘分析您的子图以检查信息。
- 检查仪表盘上的日志，以查看您的子图表是否有任何错误。 操作子图的日志将看起来像这样：

  ![Subgraph logs](/img/subgraph-logs-image.png)

### 7. 将你的子图发布到 The Graph的去中心化网络

当你的子图准备好生产环境时，你可以将它发布到去中心化的网络。 发布是一种在线操作，可以做以下工作：

- It makes your Subgraph available to be indexed by the decentralized [Indexers](/indexing/overview/) on The Graph Network.
- 取消了费率限制，使你的子图可以公开搜索并可以在 [Graph Explorer](https://thegraph.com/explorer/) 中查询。
- It makes your Subgraph available for [Curators](/resources/roles/curating/) to add curation signal.

To publish your Subgraph, click the Publish button in the dashboard and select your network.

![Publish a Subgraph on Subgraph Studio](/img/publish-sub-transfer.png)

> It is recommended that you curate your own Subgraph with at least 3,000 GRT to incentivize indexing.

为了节省燃气费，您可以通过选择此选项来策展您的子图发布在相同的交易中：

![Subgraph publish](/img/studio-publish-modal.png)

### 8. 查询子图

您现在每月可以使用The Graph网络上的子图访问100 000个免费查询！

现在，您可以通过将GraphQL查询发送到子图的查询URL来查询子图，您可以单击查询按钮找到该查询URL。

有关从您的子图查询数据的更多信息，请阅读[Querying The Graph](/subgraphs/querying/introduction/)。
