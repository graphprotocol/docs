---
title: Транзакции Solana
sidebarTitle: Транзакции
---

Узнайте, как инициализировать проект Substreams на основе Solana в рамках Dev Container.

> Примечание: Этот гид не включает [Изменения аккаунтов](/substreams/developing/solana/account-changes/).

## Параметры

Если вы предпочитаете начать работу локально в вашем терминале, а не через Dev Container (требуется VS Code), обратитесь к [руководству по установке Substreams CLI](https://docs.substreams.dev/reference-material/substreams-cli/installing-the-cli).

## Шаг 1: Инициализация Вашего проекта субпотоков Solana

1. Откройте [Dev Container](https://github.com/streamingfast/substreams-starter) и следуйте шагам на экране, чтобы инициализировать Ваш проект.

2. Выполнив команду `substreams init`, Вам будет предложено выбрать между двумя вариантами проектов для Solana. Выберите наиболее подходящий вариант для Вашего проекта:
   - **sol-minimal**: Этот вариант создаёт простые субпотоки, которые извлекают сырые данные блоков Solana и генерирует соответствующий код на Rust. Этот путь начнёт с полного сырого блока, и вы сможете перейти к файлу `substreams.yaml` (манифест), чтобы изменить входные данные.
   - **sol-transactions**: Этот вариант создаёт субпотоки, которые фильтруют транзакции Solana на основе одного или нескольких Program ID и/или Account ID, используя кешированный [Solana Foundational Module](https://substreams.dev/streamingfast/solana-common/v0.3.0).
   - **sol-anchor-beta**: Этот вариант создаёт субпотоки, которые декодируют инструкции и события с использованием Anchor IDL. Если IDL недоступен (смотрите [Anchor CLI](https://www.anchor-lang.com/docs/cli)), Вам нужно будет предоставить его самостоятельно.

Модули в Solana Common не включают транзакции голосования. Чтобы уменьшить размер и затраты на обработку данных на 75%, задержите Ваш поток на более чем 1000 блоков от начала. Это можно сделать с помощью функции [`sleep`](https://doc.rust-lang.org/std/thread/fn.sleep.html) в Rust.

Чтобы получить доступ к транзакциям голосования, используйте полный блок Solana, `sf.solana.type.v1.Block`, в качестве входных данных.

## Шаг 2: Визуализация данных

1. Выполните команду `substreams auth`, чтобы создать Ваш [аккаунт](https://thegraph.market/) и сгенерировать токен аутентификации (JWT), затем передайте этот токен обратно в качестве входных данных.

2. Теперь Вы можете свободно использовать команду `substreams gui`, чтобы визуализировать и итеративно работать с Вашими извлечёнными данными.

## Шаг 2.5: (По желанию) Преобразование данных

В сгенерированных директориях отредактируйте Ваши модули субпотоков, чтобы добавить дополнительные фильтры, агрегации и преобразования, а затем обновите манифест соответственно.

## Шаг 3: Загрузка данных

Чтобы сделать Ваш запрос в субпотоках доступным для выполнения (в отличие от [прямой трансляции](https://docs.substreams.dev/how-to-guides/sinks/stream)), Вы можете автоматически сгенерировать [субграф на базе субпотоков](/sps/introduction/) или базу данных SQL sink.

### Субграф

1. Выполните команду `substreams codegen subgraph`, чтобы инициализировать sink, создавая необходимые файлы и определения функций.
2. Создайте Ваши [мэппинги субграфа](/sps/triggers/) в файле `mappings.ts` и связанные объекты в файле `schema.graphql`.
3. Создайте и разверните локально или в [Subgraph Studio](https://thegraph.com/studio-pricing/), выполнив команду `deploy-studio`.

### SQL

1. Выполните команду `substreams codegen sql` и выберите либо ClickHouse, либо Postgres, чтобы инициализировать sink и создать необходимые файлы.
2. Выполните команду `substreams build`, чтобы собрать sink [SQL субпотока](https://docs.substreams.dev/how-to-guides/sinks/sql-sink).
3. Выполните команду `substreams-sink-sql`, чтобы записать данные в выбранную Вами базу данных SQL.

> Примечание: Выполните команду `help`, чтобы лучше ориентироваться в среде разработки и проверить состояние контейнеров.

## Дополнительные ресурсы

Вам могут быть полезны следующие дополнительные ресурсы для разработки Вашего первого приложения на Solana.

- [Справочник по Dev Container](/substreams/developing/dev-container/) поможет Вам ориентироваться в контейнере и решать распространённые ошибки.
- [Справочник по CLI](https://docs.substreams.dev/reference-material/substreams-cli/command-line-interface) позволяет Вам изучить все инструменты, доступные в CLI субпотоков.
- [Справочник по компонентам](https://docs.substreams.dev/reference-material/substreams-components/packages) более подробно объясняет, как работать с файлом `substreams.yaml`.
