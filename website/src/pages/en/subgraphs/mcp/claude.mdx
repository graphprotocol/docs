---
title: Claude
---

The Subgraph Model Context Protocol (MCP) server enables Claude to interact directly with Subgraphs on The Graph Network. This integration allows you to explore Subgraph schemas, execute GraphQL queries, and find relevant Subgraphs for specific contractsâ€”all through natural language conversations with Claude.

## What You Can Do

With the Subgraph MCP integration, you can:

- Access the GraphQL schema for any Subgraph on The Graph Network
- Execute GraphQL queries against any Subgraph deployment
- Find top Subgraph deployments for a contract address on a specific chain
- Ask natural language questions about Subgraph data without writing GraphQL queries manually

## Prerequisites

- [Claude Desktop](https://claude.ai/download) installed (latest version)
- A Gateway API key from [Subgraph Studio](https://thegraph.com/studio/)
- [`npx`](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) or [`bunx`](https://bun.sh/) installed and available in your path

## Configuration

Create or edit your `claude_desktop_config.json` file.

> **Settings** > **Developer** > **Edit Config**

- OSX: `~/Library/Application Support/Claude/claude_desktop_config.json`
- Windows: `%APPDATA%\Claude\claude_desktop_config.json`
- Linux: `.config/Claude/claude_desktop_config.json`

```json label="claude_desktop_config.json"
{
  "mcpServers": {
    "subgraph": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "--header",
        "Authorization: Bearer GATEWAY_API_KEY",
        "https://subgraph-ai.graphops.xyz/sse"
      ]
    }
  }
}
```

Replace `GATEWAY_API_KEY` with your API key from Subgraph Studio.

## Using Both Token API MCP and Subgraph MCP Together

You can configure Claude Desktop to use both the Token API MCP and Subgraph MCP simultaneously:

```json label="claude_desktop_config.json"
{
  "mcpServers": {
    "token-api": {
      "command": "npx",
      "args": ["@pinax/mcp", "--sse-url", "https://token-api.thegraph.com/sse"],
      "env": {
        "ACCESS_TOKEN": "ACCESS_TOKEN"
      }
    },
    "subgraph": {
      "command": "npx",
      "args": [
        "mcp-remote",
        "--header",
        "Authorization: Bearer GATEWAY_API_KEY",
        "https://subgraph-ai.graphops.xyz/sse"
      ]
    }
  }
}
```

- For Token API access tokens, visit [The Graph Market](https://thegraph.com/explorer)
- For Subgraph Gateway API keys, visit [Subgraph Studio](https://thegraph.com/studio/)

## Troubleshooting

To enable logs for the MCP, add the `--verbose true` option to your args array.

## Using The Graph Resource in Claude

After configuring Claude Desktop:

1. Restart Claude Desktop
2. Start a new conversation
3. Click on the context menu (top right)
4. Add "The Graph" resource by adding `graphql://subgraph` to your chat context

**Important**: Claude Desktop may not automatically utilize the Subgraph MCP. You must manually add "The Graph" resource to your chat context for each conversation where you want to use it.

## Available Tools and Usage

The Subgraph MCP provides several tools for interacting with Subgraphs:

### Schema Retrieval Tools

- **Get schema by deployment ID**: Access the GraphQL schema using a deployment ID (0x...)
- **Get schema by Subgraph ID**: Access the schema for the current deployment of a Subgraph (5zvR82...)
- **Get schema by IPFS hash**: Access the schema using a Subgraph's IPFS manifest hash (Qm...)

### Query Execution Tools

- **Execute query by deployment ID**: Run GraphQL queries against specific, immutable deployments
- **Execute query by Subgraph ID**: Run GraphQL queries against the latest version of a Subgraph

### Discovery Tools

- **Get top Subgraph deployments**: Find the top 3 Subgraph deployments indexing a specific contract on a particular chain

## Natural Language Queries

One of the most powerful features of the Subgraph MCP integration is the ability to ask questions in natural language. Claude will:

1. Understand your goal (lookup, find Subgraphs, query, get schema)
2. Find relevant deployments if needed
3. Fetch and interpret the Subgraph schema
4. Convert your question into an appropriate GraphQL query
5. Execute the query and present the results in a readable format

### Example Natural Language Queries

```
What are the pairs with maximum volume on deployment 0xde0a7b5368f846f7d863d9f64949b688ad9818243151d488b4c6b206145b9ea3?

Which tokens have the highest market cap in this Subgraph?

Show me the most recent 5 swaps for the USDC/ETH pair
```

## Key Identifier Types

When working with Subgraphs, you'll encounter different types of identifiers:

- **Subgraph ID** (e.g., `5zvR82...`): Logical identifier for a Subgraph
- **Deployment ID** (e.g., `0x4d7c...`): Identifier for a specific, immutable deployment
- **IPFS Hash** (e.g., `QmTZ8e...`): Identifier for the manifest of a specific deployment
