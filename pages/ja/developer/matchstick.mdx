---
title: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
---

Matchstickã¯[LimeChain](https://limechain.tech/)ãŒé–‹ç™ºã—ãŸãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã€ã‚µãƒ–ã‚°ãƒ©ãƒ•ã®é–‹ç™ºè€…ãŒã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆã—ã€è‡ªä¿¡ã‚’æŒã£ã¦ã‚µãƒ–ã‚°ãƒ©ãƒ•ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™!

[Matchstick installation guide](https://github.com/LimeChain/matchstick/blob/main/README.md#quick-start-)ã«å¾“ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã§ã€æœ€åˆã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ä½œæˆã«ç§»ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›¸ã

Gravatarã®[Example Subgraph](https://github.com/graphprotocol/example-subgraph)ã‚’ä½¿ã£ã¦ã€ç°¡å˜ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ãŒã‚ã‚‹ã¨ã—ã¾ã™ï¼ˆã‚ˆã‚Šç°¡æ˜“åŒ–ã™ã‚‹ãŸã‚ã®2ã¤ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚‚ä¸€ç·’ã«ï¼‰ã€‚

```javascript
export function handleNewGravatar(event: NewGravatar): void {
  let gravatar = new Gravatar(event.params.id.toHex())
  gravatar.owner = event.params.owner
  gravatar.displayName = event.params.displayName
  gravatar.imageUrl = event.params.imageUrl
  gravatar.save()
}

export function handleNewGravatars(events: NewGravatar[]): void {
  events.forEach((event) => {
    handleNewGravatar(event)
  })
}

export function createNewGravatarEvent(
  id: i32,
  ownerAddress: string,
  displayName: string,
  imageUrl: string
): NewGravatar {
  let mockEvent = newMockEvent()
  let newGravatarEvent = new NewGravatar(
    mockEvent.address,
    mockEvent.logIndex,
    mockEvent.transactionLogIndex,
    mockEvent.logType,
    mockEvent.block,
    mockEvent.transaction,
    mockEvent.parameters
  )
  newGravatarEvent.parameters = new Array()
  let idParam = new ethereum.EventParam('id', ethereum.Value.fromI32(id))
  let addressParam = new ethereum.EventParam(
    'ownderAddress',
    ethereum.Value.fromAddress(Address.fromString(ownerAddress))
  )
  let displayNameParam = new ethereum.EventParam('displayName', ethereum.Value.fromString(displayName))
  let imageUrlParam = new ethereum.EventParam('imageUrl', ethereum.Value.fromString(imageUrl))

  newGravatarEvent.parameters.push(idParam)
  newGravatarEvent.parameters.push(addressParam)
  newGravatarEvent.parameters.push(displayNameParam)
  newGravatarEvent.parameters.push(imageUrlParam)

  return newGravatarEvent
}
```

ã¾ãšã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‰ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã¯`gravity.test.ts`ã¨ã—ã¾ã—ãŸã€‚æ–°ã—ãä½œã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã§ã€`runTests()`ã¨ã„ã†åå‰ã®é–¢æ•°ã‚’å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®é–¢æ•°ãŒãã®é€šã‚Šã®åå‰ã§ã‚ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒ†ã‚¹ãƒˆãŒã©ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã‹ã®ä¾‹ã§ã™:

```typescript
import { clearStore, test, assert } from 'matchstick-as/assembly/index'
import { Gravatar } from '../../generated/schema'
import { NewGravatar } from '../../generated/Gravity/Gravity'
import { createNewGravatarEvent, handleNewGravatars } from '../mappings/gravity'

export function runTests(): void {
  test('Can call mappings with custom events', () => {
    // Initialise
    let gravatar = new Gravatar('gravatarId0')
    gravatar.save()

    // Call mappings
    let newGravatarEvent = createNewGravatarEvent(12345, '0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7', 'cap', 'pac')

    let anotherGravatarEvent = createNewGravatarEvent(3546, '0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7', 'cap', 'pac')

    handleNewGravatars([newGravatarEvent, anotherGravatarEvent])

    assert.fieldEquals('Gravatar', 'gravatarId0', 'id', 'gravatarId0')
    assert.fieldEquals('Gravatar', '12345', 'owner', '0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7')
    assert.fieldEquals('Gravatar', '3546', 'displayName', 'cap')

    clearStore()
  })

  test('Next test', () => {
    //...
  })
}
```

ã¾ãšé‡è¦ãªã®ã¯ã€`matchstick-as`ã¨ã„ã†AssemblyScriptã®ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª(npmãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦é…å¸ƒ)ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚ãƒªãƒã‚¸ãƒˆãƒªã¯[ã“ã“](https://github.com/LimeChain/matchstick-as)ã«ã‚ã‚Šã¾ã™ã€‚`matchstick-as` ã¯ä¾¿åˆ©ãªãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã—ã€ãƒ†ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã‚’æ§‹ç¯‰ã™ã‚‹ã®ã«ä½¿ã†`test()`é–¢æ•°ã‚‚å®šç¾©ã—ã¦ã„ã¾ã™ã€‚æ®‹ã‚Šã®éƒ¨åˆ†ã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

- åˆæœŸçŠ¶æ…‹ã‚’è¨­å®šã—ã€ã‚«ã‚¹ã‚¿ãƒ Gravatarã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’1ã¤è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
- `createNewGravatarEvent()`é–¢æ•°ã‚’ä½¿ã£ã¦ã€2ã¤ã®`NewGravatar`ã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ãã®ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚
- ã“ã‚Œã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰`handleNewGravatars()`ã‚’å‘¼ã³å‡ºã—ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒªã‚¹ãƒˆã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚
- ã‚¹ãƒˆã‚¢ã®çŠ¶æ…‹ã‚’ã‚¢ã‚µãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã©ã®ã‚ˆã†ãªä»•çµ„ã¿ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ- Entityã‚¿ã‚¤ãƒ—ã¨idã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªçµ„ã¿åˆã‚ã›ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚ãã—ã¦ã€ãã®Entityã®ç‰¹å®šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€æœŸå¾…ã™ã‚‹å€¤ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’ã‚¢ã‚µãƒ¼ãƒˆã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚¹ãƒˆã‚¢ã«è¿½åŠ ã—ãŸæœ€åˆã®Gravatar Entityã¨ã€ãƒãƒ³ãƒ‰ãƒ©é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚ŒãŸã¨ãã«è¿½åŠ ã•ã‚Œã‚‹2ã¤ã®Gravatar Entityã®ä¸¡æ–¹ã«å¯¾ã—ã¦è¡Œã£ã¦ã„ã¾ã™ã€‚
- æœ€å¾Œã«ã€`clearStore()`ã‚’ä½¿ã£ã¦ã‚¹ãƒˆã‚¢ã‚’æƒé™¤ã—ã€æ¬¡ã®ãƒ†ã‚¹ãƒˆãŒæ–°é®®ã§ç©ºã®ã‚¹ãƒˆã‚¢ãƒ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å§‹ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã¯å¿…è¦ã«å¿œã˜ã¦ã„ãã¤ã§ã‚‚å®šç¾©ã§ãã¾ã™ã€‚

ã“ã‚Œã§æœ€åˆã®ãƒ†ã‚¹ãƒˆãŒå®Œæˆã—ã¾ã—ãŸ! ğŸ‘

â— **é‡è¦:** _ãƒ†ã‚¹ãƒˆã‚’å‹•ä½œã•ã›ã‚‹ã«ã¯ã€ `runTests()`é–¢æ•°ã‚’ mappings ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã“ã§ã¯ä½¿ã‚ã‚Œã¾ã›ã‚“ãŒã€å¾Œã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«Rustã«æ‹¾ã‚ã‚Œã‚‹ã‚ˆã†ã«ã€exportæ–‡ãŒå¿…è¦ãªã®ã§ã™ã€‚_

ãƒ†ã‚¹ãƒˆç”¨ã®wrapperé–¢æ•°ã¯ï¼Œmappingsãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã§æ¬¡ã®ã‚ˆã†ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ãã¾ã™:

```
export { runTests } from "../tests/gravity.test.ts";
```

â— **é‡è¦:** _ç¾åœ¨ã€ã‚µãƒ–ã‚°ãƒ©ãƒ•ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«Matchstickã‚’ä½¿ç”¨ã™ã‚‹ã¨å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚Matchstickã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒ†ã‚¹ãƒˆã«ã®ã¿ä½¿ç”¨ã—ã€ãƒ†ã‚¹ãƒˆãŒçµ‚ã‚ã£ãŸã‚‰ã“ã®è¡Œ (`export { runTests } from "../tests/gravity.test.ts"`) ã‚’å‰Šé™¤ã™ã‚‹ã‹ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãã ã•ã„ã€‚ã”è¿·æƒ‘ã‚’ãŠã‹ã‘ã—ã¦ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ãŒã€ã“ã®å•é¡Œã¯ã¾ã‚‚ãªãè§£æ±ºã™ã‚‹äºˆå®šã§ã™ã€‚_

_ã“ã®è¡Œã‚’å‰Šé™¤ã—ãªã„ã¨ã€ã‚µãƒ–ã‚°ãƒ©ãƒ•ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™:_

```
/...
Mapping terminated before handling trigger: oneshot canceled
.../
```

ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ã‚µãƒ–ã‚°ãƒ©ãƒ•ã®ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

`gravityã®ãƒ†ã‚¹ãƒˆ`

ã™ã¹ã¦ãŒã†ã¾ãã„ãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™:

![Matchstick saying â€œAll tests passed!â€](/img/matchstick-tests-passed.png)

## ä¸€èˆ¬çš„ãªãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

### ç‰¹å®šã®çŠ¶æ…‹ã§ã‚¹ãƒˆã‚¢ã«ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€æ—¢çŸ¥ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚»ãƒƒãƒˆã§ã‚¹ãƒˆã‚¢ã‚’ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã“ã§ã¯ã€Gravatarã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã§ã‚¹ãƒˆã‚¢ã‚’åˆæœŸåŒ–ã™ã‚‹ä¾‹ã‚’ç¤ºã—ã¾ã™:

```typescript
let gravatar = new Gravatar('entryId')
gravatar.save()
```

### ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½¿ã£ãŸãƒãƒƒãƒ”ãƒ³ã‚°é–¢æ•°ã®å‘¼ã³å‡ºã—

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã‚’ã‚¹ãƒˆã‚¢ã«ãƒã‚¤ãƒ³ãƒ‰ã•ã‚ŒãŸãƒãƒƒãƒ”ãƒ³ã‚°é–¢æ•°ã«æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™:

```typescript
import { store } from 'matchstick-as/assembly/store'
import { NewGravatar } from '../../generated/Gravity/Gravity'
import { handleNewGravatars, createNewGravatarEvent } from './mapping'

let newGravatarEvent = createNewGravatarEvent(12345, '0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7', 'cap', 'pac')

handleNewGravatar(newGravatarEvent)
```

### ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã§ã™ã¹ã¦ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’å‘¼ã³å‡ºã™

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£ã§ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

```typescript
import { NewGravatar } from '../../generated/Gravity/Gravity'
import { store } from 'matchstick-as/assembly/store'
import { handleNewGravatars, createNewGravatarEvent } from './mapping'

let newGravatarEvent = createNewGravatarEvent(12345, '0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7', 'cap', 'pac')

let anotherGravatarEvent = createNewGravatarEvent(3546, '0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7', 'cap', 'pac')

handleNewGravatars([newGravatarEvent, anotherGravatarEvent])
```

```
export function handleNewGravatars(events: NewGravatar[]): void {
    events.forEach(event => {
        handleNewGravatar(event);
    });
}
```

### ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚³ãƒ¼ãƒ«ã®ãƒ¢ãƒƒã‚¯

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚³ãƒ¼ãƒ«ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™:

```typescript
import { addMetadata, assert, createMockedFunction, clearStore, test } from 'matchstick-as/assembly/index'
import { Gravity } from '../../generated/Gravity/Gravity'
import { Address, BigInt, ethereum } from '@graphprotocol/graph-ts'

let contractAddress = Address.fromString('0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7')
let expectedResult = Address.fromString('0x90cBa2Bbb19ecc291A12066Fd8329D65FA1f1947')
let bigIntParam = BigInt.fromString('1234')
createMockedFunction(contractAddress, 'gravatarToOwner', 'gravatarToOwner(uint256):(address)')
  .withArgs([ethereum.Value.fromSignedBigInt(bigIntParam)])
  .returns([ethereum.Value.fromAddress(Address.fromString('0x90cBa2Bbb19ecc291A12066Fd8329D65FA1f1947'))])

let gravity = Gravity.bind(contractAddress)
let result = gravity.gravatarToOwner(bigIntParam)

assert.equals(ethereum.Value.fromAddress(expectedResult), ethereum.Value.fromAddress(result))
```

ã“ã®ã‚ˆã†ã«ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚³ãƒ¼ãƒ«ã‚’ãƒ¢ãƒƒã‚¯ã—ã¦æˆ»ã‚Šå€¤ã‚’ãƒãƒ¼ãƒ‰ã‚³ã‚¢ã™ã‚‹ãŸã‚ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã€é–¢æ•°åã€é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£ã€å¼•æ•°ã®é…åˆ—ã€ãã—ã¦ã‚‚ã¡ã‚ã‚“æˆ»ã‚Šå€¤ã‚’æä¾›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€é–¢æ•°ã®æˆ»ã‚Šå€¤ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™:

```typescript
let contractAddress = Address.fromString('0x89205A3A3b2A69De6Dbf7f01ED13B2108B2c43e7')
createMockedFunction(contractAddress, 'getGravatar', 'getGravatar(address):(string,string)')
  .withArgs([ethereum.Value.fromAddress(contractAddress)])
  .reverts()
```

### ã‚¹ãƒˆã‚¢ã®çŠ¶æ…‹ã‚’ã‚¢ã‚µãƒ¼ãƒˆã™ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ã‚¢ã‚µãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€ã‚¹ãƒˆã‚¢ã®æœ€çµ‚çš„ãªçŠ¶æ…‹ï¼ˆã¾ãŸã¯é€”ä¸­ã®çŠ¶æ…‹ï¼‰ã‚’ã‚¢ã‚µãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚’è¡Œã†ãŸã‚ã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯Entityã‚¿ã‚¤ãƒ—ã€Entityã®ç‰¹å®šã®IDã€Entityã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æœŸå¾…å€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«ç°¡å˜ãªä¾‹ã‚’ç¤ºã—ã¾ã™:

```typescript
import { assert } from 'matchstick-as/assembly/index'
import { Gravatar } from '../generated/schema'

let gravatar = new Gravatar('gravatarId0')
gravatar.save()

assert.fieldEquals('Gravatar', 'gravatarId0', 'id', 'gravatarId0')
```

assert.fieldEquals()é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæŒ‡å®šã•ã‚ŒãŸæœŸå¾…å€¤ã¨ç­‰ã—ã„ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚å€¤ãŒ**ç­‰ã—ããªã„** å ´åˆã¯ã€ãƒ†ã‚¹ãƒˆã¯å¤±æ•—ã—ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ãƒ†ã‚¹ãƒˆã¯æ­£å¸¸ã«é€šéã—ã¾ã™ã€‚

### ã‚¤ãƒ™ãƒ³ãƒˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã®ã‚„ã‚Šã¨ã‚Š

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€`newMockEvent()`é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ethereum.Eventã¨ã—ã¦è¿”ã•ã‚Œã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€Event ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã“ã‚Œã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’èª­ã¿æ›¸ãã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¦ã„ã¾ã™:

```typescript
// Read
let logType = newGravatarEvent.logType

// Write
let UPDATED_ADDRESS = '0xB16081F360e3847006dB660bae1c6d1b2e17eC2A'
newGravatarEvent.address = Address.fromString(UPDATED_ADDRESS)
```

### å¤‰æ•°ã®ç­‰å€¤æ€§ã®ä¸»å¼µ

```typescript
assert.equals(ethereum.Value.fromString("hello"); ethereum.Value.fromString("hello"));
```

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒã‚¹ãƒˆã‚¢ã«**ãªã„**ã“ã¨ã‚’ã‚¢ã‚µãƒ¼ãƒˆã™ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ã‚ã‚‹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒã‚¹ãƒˆã‚¢ã«å­˜åœ¨ã—ãªã„ã“ã¨ã‚’ã‚¢ã‚µãƒ¼ãƒˆã§ãã¾ã™ã€‚ã“ã®é–¢æ•°ã¯ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚¿ã‚¤ãƒ—ã¨idã‚’å—ã‘å–ã‚Šã¾ã™ã€‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒå®Ÿéš›ã«ã‚¹ãƒˆã‚¢å†…ã«ã‚ã‚‹å ´åˆã€ãƒ†ã‚¹ãƒˆã¯é–¢é€£ã™ã‚‹ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¦å¤±æ•—ã—ã¾ã™ã€‚ã“ã®æ©Ÿèƒ½ã‚’ä½¿ã£ãŸç°¡å˜ãªä¾‹ã‚’ã”ç´¹ä»‹ã—ã¾ã™:

```typescript
assert.notInStore('Gravatar', '23')
```

### ãƒ­ã‚°å‡ºåŠ›ã§ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã®è¡¨ç¤º

ãƒ­ã‚°å‡ºåŠ›ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ä»¥ä¸‹ã¯ãã®ä¾‹ã§ã™:

`Jul 09 14:54:42.420 INFO Program execution time: 10.06022ms`

## ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

è³ªå•ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€æ©Ÿèƒ½è¦æ±‚ãªã©ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€The Graph Discordã«Matchstickå°‚ç”¨ã®ãƒãƒ£ãƒ³ãƒãƒ«ğŸ”¥| unit-testingãŒã‚ã‚Šã¾ã™ã®ã§ã€ãã¡ã‚‰ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
