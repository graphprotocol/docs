---
title: サブグラフの定義
---

サブグラフとは、The Graph が Ethereum からどのデータをインデックス化し、どのように保存するかを定義するものです。展開されると、ブロックチェーンデータのグローバルグラフの一部を形成することになります。

![サブグラフの定義](/img/define-subgraph.png)

サブグラフの定義は、いくつかのファイルで構成されています。

- `subgraph.yaml`：サブグラフのマニフェストを含む YAML ファイル

- `schema.graphql`: サブグラフにどのようなデータが保存されているか、また GraphQL を使ってどのようにクエリを行うかを定義する GraphQL スキーマ

- `AssemblyScript Mappings`: イベントデータをスキーマで定義されたエンティティに変換する[AssemblyScript](https://github.com/AssemblyScript/assemblyscript)コード (例: このチュートリアルでは`mapping.ts`)

マニフェスト・ファイルの内容を詳しく説明する前に、サブグラフを構築してデプロイするために必要な [Graph CLI](https://github.com/graphprotocol/graph-cli)をインストールする必要があります。

## Graph CLI のインストール

Graph CLI は JavaScript で書かれており、使用するには`yarn`または `npm`のいずれかをインストールする必要があります。

`yarn`をインストールしたら、次のコマンドを実行して Graph CLI をインストールする。

**Install with yarn:**

```bash
yarn global add @graphprotocol/graph-cli
```

**Install with npm:**

```bash
npm install -g @graphprotocol/graph-cli
```
