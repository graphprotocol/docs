---
title: 定义子图
---

子图定义了 Graph 从以太坊索引哪些数据，以及如何存储这些数据。 子图一旦部署，就成为区块链数据全局图的一部分。

![定义子图](/img/define-subgraph.png)

子图定义由几个文件组成：

- `subgraph.yaml`: 包含子图清单的 YAML 文件

- `schema.graphql`: 一个 GraphQL 模式文件，它定义了为您的子图存储哪些数据，以及如何通过 GraphQL 查询这些数据

- `AssemblyScript映射`: 将事件数据转换为模式中定义的实体(例如本教程中的`mapping.ts`)的 [AssemblyScript](https://github.com/AssemblyScript/assemblyscript) 代码

在详细了解清单文件的内容之前，您需要安装[Graph CLI](https://github.com/graphprotocol/graph-cli)，以构建和部署子图。

## 安装 Graph CLI

Graph CLI 是使用 JavaScript 编写的，您需要安装`yarn`或 `npm`才能使用它；以下教程中假设您已经安装了 yarn。

一旦您安装了`yarn`，可以通过运行以下命令安装 Graph CLI

**使用 yarn 安装:**

```bash
yarn global add @graphprotocol/graph-cli
```

**使用 npm 安装:**

```bash
npm install -g @graphprotocol/graph-cli
```
