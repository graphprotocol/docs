---
title: 什么是托管服务？
---

本节将引导您将子图部署到 [托管服务](https://thegraph.com/hosted-service/) 提醒一下，托管服务不会很快关闭。 一旦去中心化网络达到托管服务相当的功能，我们将逐步取消托管服务。 您在托管服务上部署的子图在[此处](https://thegraph.com/hosted-service/)仍然可用。

如果您没有托管服务帐户，您可以使用您的 Github 帐户注册。 进行身份验证后，您可以开始通过 UI 创建子图并从终端部署它们。 除了主网之外，Graph Node 还支持许多以太坊测试网（Rinkeby、Goerli）。

## 创建子图

首先按照[此处](/developing/defining-a-subgraph)的说明安装 Graph CLI。 通过传入 `graph init --product hosted-service` 创建子图

### 基于现有合约

如果您已经将智能合约部署到以太坊主网或其中一个测试网，那么从该合约中引导一个新的子图可能是开始使用托管服务的好方法。

您可以使用此命令创建一个子图，为现有合约中的所有事件编制索引。 这将尝试从 [Etherscan](https://etherscan.io/) 获取合约 ABI。

```sh
graph init \
  --product hosted-service
  --from-contract <CONTRACT_ADDRESS> \
  <GITHUB_USER>/<SUBGRAPH_NAME> [<DIRECTORY>]
```

此外，您可以使用以下可选参数。 如果无法从 Etherscan 获取 ABI，它会退回到请求本地文件路径。 如果命令中缺少任何可选参数，它会带您进入交互式表单。

```sh
--network <ETHEREUM_NETWORK> \
--abi <FILE> \
```

`<GITHUB_USER>` 在这种情况下是您的 github 用户或组织名称, `<SUBGRAPH_NAME>`是您的子图的名称，并且`<DIRECTORY>` Graph 初始化将放置示例子图清单的目录的可选名称。 `<CONTRACT_ADDRESS>`是您现有合约的地址。 `<ETHEREUM_NETWORK>` 是合约所在的以太坊网络的名称。`<FILE>`是合约 ABI 文件的本地路径。**Both --network 和 --abi 都是可选的。**

### 基于子图示例

`graph init` 支持的第二种模式是从示例子图创建一个新项目。 以下命令执行此操作：

```
graph init --from-example --product hosted-service <GITHUB_USER>/<SUBGRAPH_NAME> [<DIRECTORY>]
```

示例子图基于 Dani Grant 的 Gravity 合约，该合约管理用户头像并在创建或更新头像时发出 `NewGravatar` 或 `UpdateGravatar` 事件。 子图通过将 `Gravatar` 实体写入 Graph 节点存储并确保根据事件更新这些事件来处理这些事件。 继续查看[子图清单](/developing/creating-a-subgraph#the-subgraph-manifest)，以更好地了解您的智能合约中需要关注的事件、映射等。

## 托管服务支持的网络

请注意托管服务支持以下网络。 [Graph Explorer](https://thegraph.com/explorer)目前不支持以太坊主网（“主网”）之外的网络。

- `mainnet`
- `rinkeby`
- `goerli`
- `poa-core`
- `poa-sokol`
- `xdai`
- `near-mainnet`
- `near-testnet`
- `matic`
- `mumbai`
- `fantom`
- `bnb`
- `chapel`
- `clover`
- `avalanche`
- `fuji`
- `celo`
- `celo-alfajores`
- `fuse`
- `moonbeam`
- `moonriver`
- `mbase` (Moonbeam/Moonriver Testnet)
- `arbitrum-one`
- `arbitrum-rinkeby`
- `optimism`
- `optimism-goerli`
- `aurora`
- `aurora-testnet`
- `harmony`
