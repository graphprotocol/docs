---
title: 如何使用子图工作室
---

欢迎使用您的新启动板 👩🏽‍🚀

Subgraph Studio 是您构建和创建子图、添加元数据并将其发布到新的分散式资源管理器的地方（更多关于[这里](/explorer)）。

您可以在 Subgraph Studio 中执行的操作：

- 通过 Studio UI 创建子图
- 使用 CLI 部署子图
- 使用 Studio UI 发布子图
- 在面板上测试子图
- 使用查询 URL 将其集成到暂存中
- 为特定子图创建和管理 API 密钥

在 Subgraph Studio 中，您可以完全控制您的子图。 您不仅可以在发布子图之前对其进行测试，还可以将 API 密钥限制在特定域中，并且只允许某些索引器从其 API 密钥中进行查询。

查询子图会产生查询费，用于奖励 Graph 网络上的[索引人](/indexing)。 如果您是 dapp 开发人员或子图开发人员，Studio 将使您能够构建更好的子图来支持您或您的社区的查询。 Studio 由 5 个主要部分组成：

- 您的用户帐户控制
- 您创建的子图列表
- 用于管理、查看详细信息和可视化特定子图状态的部分
- 用于管理 API 密钥的部分，您需要查询子图
- 管理帐单的部分

## 如何创建您的帐户

1. 使用您的钱包登录 - 您可以通过 MetaMask 或 WalletConnect 进行此操作
1. 登录后，您将在帐户主页中看到您唯一的部署密钥。 这将允许您发布您的子图或管理您的 API 密钥 + 计费。 如果您认为它已被泄露，您将拥有一个可以重新生成的唯一部署密钥。

## 如何在 Subgraph Studio 中创建子图

最好的部分！ 当您第一次创建子图时，您将被指示填写：

- 您的子图名称
- 图片
- 描述
- 类别
- 网站

## 子图与 The Graph 网络的兼容性

The Graph 网络还不能支持所有的数据源和 托管服务上可用的功能。 为了被网络上的索引器支持，子图必须：

- 索引主网以太坊
- 不得使用以下任何功能：
  - ipfs.cat & ipfs.map
  - 非致命错误
  - Grafting

更多功能和 网络将逐渐添加到 The Graph Network。

### 子图生命周期流程

![子图生命周期](/img/subgraph-lifecycle.png)

创建子图后，您将能够使用 [CLI](https://github.com/graphprotocol/graph-cli) 或命令行界面来部署它。 使用 CLI 部署子图会将子图推送到 Studio，您可以在其中使用 Playground 测试子图。 这最终将允许您发布到 Graph Network。 有关 CLI 设置的更多信息，[检查一下](/developer/define-subgraph-hosted#install-the-graph-cli)（pst，确保您手头有部署密钥）. 请记住，部署是**与**发布不同。 当您部署一个子图时，您只需将其推送到您可以对其进行测试的 Studio。 相反，当你发布一个子图时，你是在链上发布它。

## 在 Subgraph Studio 中测试您的子图

如果您想在将子图发布到网络之前对其进行测试，您可以在子图 **Playground** 中执行此操作或查看您的日志。 子图日志将告诉您**在哪里**您的子图在失败的情况下失败。

## 在 Subgraph Studio 中发布您的子图

你已经做到了这一点 - 恭喜！ 发布子图意味着当您在 CLI 中部署子图时会生成 IPFS 哈希，并存储在网络的以太坊智能合约中。 为了成功发布您的子图，您需要完成此[博客](https://thegraph.com/blog/building-with-subgraph-studio)中列出的以下步骤. 还请查看下面的视频概述：

<figure className="video-container">
  <iframe
    className="video-iframe"
    src="https://www.youtube.com/embed/HfDgC2oNnwo"
    title="YouTube video player"
    frameBorder="0"
    allowFullScreen
  ></iframe>
</figure>

请记住，在您完成发布流程时，您将能够推送到我们支持的测试网主网或 Rinkeby。 如果您是第一次开发子图，我们强烈建议您从发布到 Rinkeby 开始，这是免费的。 这将允许您查看子图在 The Graph Explorer 中的工作方式，并允许您测试管理元素。

您只能从主网索引数据（即使您的子图已发布到测试网），因为只有索引主网数据的子图才能发布到网络。 这是因为索引人需要提交针对特定块哈希的强制性索引证明记录。 因为发布子图是在链上采取的行动，请记住，交易可能需要几分钟才能完成。 您用于发布合约的任何地址都将是唯一能够发布未来版本的地址。 做出明智的选择！

具有管理信号的子图显示给索引人，以便它们可以在去中心化网络上被索引。 您可以在一个事务中发布子图和信号，这允许您在子图上创建第一个管理信号并节省气体成本。 通过将您的信号添加到策展人稍后提供的信号中，您的子图也将有更高的机会最终提供查询。

**现在您已经发布了您的子图，让我们来看看您将如何定期管理它们。**请注意，如果您的子图有 同步失败。 这通常是因为子图有错误 - 日志会告诉您这些问题存在于哪里！

## 使用 CLI 对子图进行版本控制

出于各种原因，开发人员可能想要更新他们的子图。 在这种情况下，您可以使用 CLI 将新版本的子图部署到 Studio（此时它只是私有的），如果您对它感到满意，您可以将此新部署发布到 Graph Explorer。 这将创建一个新版本的子图，策展人可以开始发出信号，索引人将能够索引这个新版本。

直到最近，开发人员还被迫将其子图的新版本部署并发布到 Explorer 以更新其子图的元数据。 现在，开发人员可以更新其子图的元数据**而无需发布新版本**。 开发人员可以通过选中图形资源管理器中名为 **Update Details** 的选项来更新 Studio 中的子图详细信息（在个人资料图片、名称、描述等下）。 如果选中此项，将生成一个链上事务，更新资源管理器中的子图详细信息，而无需发布具有新部署的新版本。

请注意，将新版本的子图发布到网络会产生成本。 除了交易费用外，开发人员还必须为自动迁移信号的一部分管理税提供资金。 如果策展人没有发出信号，您将无法发布子图的新版本。 有关策展风险的更多信息，请阅读更多[此处](/curating)。

### 子图版本的自动归档

每当您在 Subgraph Studio 中部署新的子图版本时，都会归档以前的版本。 存档版本不会被索引/同步，因此无法查询。 您可以在 Studio UI 中取消存档子图的存档版本。 请注意，部署到 Studio 的以前版本的未发布子图将被自动存档。

![Subgraph Studio - 取消归档](/img/Unarchive.png)

## 管理您的 API 密钥

无论您是 dapp 开发人员还是子图开发人员，您都需要管理您的 API 密钥。 这对于您能够查询子图很重要，因为 API 密钥确保应用程序服务之间的连接有效且经过授权。 这包括验证最终用户和使用应用程序的设备。

Studio 将列出现有的 API 密钥，这将使您能够管理或删除它们。

1. **概述**部分将允许您：
   - 编辑您的密钥名称
   - 重新生成 API 密钥
   - 使用统计信息查看 API 密钥的当前使用情况：
     - 查询数
     - 花费的 GRT 金额
2. Under **Security**, you’ll be able to opt into security settings depending on the level of control you’d like to have over your API keys. In this section, you can:
   - 查看和管理授权使用您的 API 密钥的域名
   - 分配可以使用您的 API 密钥查询的子图
3. Under **Indexer Preference**, you’ll be able to set different preferences for Indexers who are indexing subgraphs that your API key is used for. You can assign up to 5 points for each of these:
   - **Fastest Speed**: Time between the query and the response from an indexer. If you mark this as important we will optimize for fast indexers.
   - **Lowest Price**: The amount paid per query. If you mark this as important we will optimize for the less expensive indexers.
   - **Data Freshness**: How recent the latest block an indexer has processed for the subgraph you are querying. If you mark this as important we will optimize to find the indexers with the freshest data.
   - **Economic Security**: The amount of GRT an indexer can lose if they respond incorrectly to your query. If you mark this as important we will optimize for indexers with a large stake.
4. Under **Budget**, you’ll be able to update the maximum price per query. Note that we have a dynamic setting for that that's based on a volume discounting algorithm. **We strongly recommend using the default settings unless you are experiencing a specific problem.** Otherwise, you can update it under "Set a custom maximum budget". On this page you can also view different KPIs (in GRT and USD):
   - Average cost per query
   - Failed queries over max price
   - Most expensive query

## 如何管理您的子图

除了 API 密钥，您还可以使用许多工具来管理子图。 您可以按子图的**状态**和**类别**来组织子图。

- The **Status** tag allows you to pick between a variety of tags including `<created>`, `<deployed>`, `<published>`, `<archived>`, etc.
- Meanwhile, **Category** allows you to designate what category your subgraph falls into. Options include `<DeFi>`, `<NFTs>`, `<Governance>`, etc.
